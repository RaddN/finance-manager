<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Manager</title>
    <!-- SheetJS for Excel processing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- html2canvas for image export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Google API for Sheets and Drive -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo">
                <span>üìä</span> Finance Manager
            </div>
            <!-- Desktop Controls -->
            <div class="header-desktop-controls">
                <!-- Language Selector -->
                <select class="filter-input" id="language-selector" onchange="changeLanguage(this.value)"
                    style="width: auto; padding: 0.5rem; border-radius: 6px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-main);">
                    <option value="en">üá¨üáß English</option>
                    <option value="bn">üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                    <option value="es">üá™üá∏ Espa√±ol</option>
                    <option value="fr">üá´üá∑ Fran√ßais</option>
                    <option value="de">üá©üá™ Deutsch</option>
                    <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                    <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                    <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                </select>

                <!-- Notification Icon -->
                <div style="position: relative;">
                    <button class="btn btn-secondary" style="width: auto; position: relative;"
                        onclick="toggleNotifications()" id="notification-btn" title="Notifications">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                        <span id="notification-badge"
                            style="position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; display: none;">0</span>
                    </button>
                    <div id="notification-dropdown"
                        style="position: absolute; right: 0; top: calc(100% + 0.5rem); background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); min-width: 300px; max-width: 400px; max-height: 400px; overflow-y: auto; z-index: 1000; display: none;">
                        <div
                            style="padding: 1rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="margin: 0; font-size: 1rem;" data-translate="notifications">Notifications</h3>
                            <button onclick="clearAllNotifications()"
                                style="background: none; border: none; color: var(--primary); cursor: pointer; font-size: 0.875rem;"
                                data-translate="clear_all">Clear All</button>
                        </div>
                        <div id="notification-list" style="padding: 0.5rem;">
                            <div style="padding: 2rem; text-align: center; color: var(--text-light);"
                                data-translate="no_notifications">No notifications</div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-secondary" style="width: auto; display: none;" onclick="refreshData()"
                    title="Refresh Data" id="refresh-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" xml:space="preserve" width="16"
                        height="16">
                        <path fill="none" stroke="#000" stroke-miterlimit="10"
                            d="M12.85 5.45A5.47 5.47 0 0 0 8 2.5C5.65 2.5 3.7 3.95 2.9 6m.2 4.5c.9 1.75 2.75 3 4.9 3 2.35 0 4.3-1.45 5.1-3.5" />
                        <path fill="none" stroke="#000" stroke-miterlimit="10" d="M13 2.5v3h-3m-7 8v-3h3" />
                    </svg>
                </button>
                <button class="btn btn-secondary" style="width: auto; display: none;" onclick="exportData()"
                    title="Export Data" id="export-btn">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </button>
                <button class="btn btn-secondary" style="width: auto; display: none;" onclick="disconnectExcelFile()"
                    title="Disconnect Excel File" id="disconnect-btn">
                    <svg width="16" height="16" viewBox="-0.08 0 1.28 1.28" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M.103 0a.1.1 0 0 0-.101.102v1.077a.1.1 0 0 0 .101.101h.915a.1.1 0 0 0 .101-.101V.406L.742 0z"
                            fill-rule="evenodd" clip-rule="evenodd" fill="#0c8fe8" />
                        <g fill-rule="evenodd" clip-rule="evenodd">
                            <path d="M1.12.407v.02H.864S.738.402.741.293c0 0 .004.114.12.114z" fill="#0973e2" />
                            <path d="M.741 0v.291c0 .033.022.116.122.116h.256z" opacity=".5" fill="#fff" />
                        </g>
                        <path
                            d="M.565.712a.106.106 0 0 0-.151 0L.353.773a.11.11 0 0 0 0 .151.025.025 0 0 0 .035 0 .024.024 0 0 0 0-.035.06.06 0 0 1 0-.082L.45.746a.057.057 0 0 1 .081 0 .06.06 0 0 1 0 .081l-.029.03q.01.03.008.061L.566.862a.106.106 0 0 0 0-.151M.412.83a.025.025 0 0 0 0 .035.057.057 0 0 1 0 .081l-.061.061a.057.057 0 0 1-.081 0 .06.06 0 0 1 0-.081L.299.897A.14.14 0 0 1 .291.835L.235.891a.106.106 0 0 0 0 .151.11.11 0 0 0 .151 0L.448.98a.106.106 0 0 0 0-.151.025.025 0 0 0-.035 0"
                            fill="#fff" />
                    </svg>
                </button>
                <button class="btn btn-secondary" style="width: auto;" id="connect-btn" onclick="connectExcelFile()">
                    <svg width="16" height="16" viewBox="-0.08 0 1.28 1.28" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M.103 0a.1.1 0 0 0-.101.102v1.077a.1.1 0 0 0 .101.101h.915a.1.1 0 0 0 .101-.101V.406L.742 0z"
                            fill-rule="evenodd" clip-rule="evenodd" fill="#0c8fe8" />
                        <g fill-rule="evenodd" clip-rule="evenodd">
                            <path d="M1.12.407v.02H.864S.738.402.741.293c0 0 .004.114.12.114z" fill="#0973e2" />
                            <path d="M.741 0v.291c0 .033.022.116.122.116h.256z" opacity=".5" fill="#fff" />
                        </g>
                        <path
                            d="M.565.712a.106.106 0 0 0-.151 0L.353.773a.11.11 0 0 0 0 .151.025.025 0 0 0 .035 0 .024.024 0 0 0 0-.035.06.06 0 0 1 0-.082L.45.746a.057.057 0 0 1 .081 0 .06.06 0 0 1 0 .081l-.029.03q.01.03.008.061L.566.862a.106.106 0 0 0 0-.151M.412.83a.025.025 0 0 0 0 .035.057.057 0 0 1 0 .081l-.061.061a.057.057 0 0 1-.081 0 .06.06 0 0 1 0-.081L.299.897A.14.14 0 0 1 .291.835L.235.891a.106.106 0 0 0 0 .151.11.11 0 0 0 .151 0L.448.98a.106.106 0 0 0 0-.151.025.025 0 0 0-.035 0"
                            fill="#fff" />
                    </svg>
                </button>
                <button class="btn btn-secondary" style="width: auto;" id="dark-mode-toggle" onclick="toggleDarkMode()"
                    title="Toggle Dark Mode">
                    <svg class="icon" id="dark-mode-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>

            <!-- Mobile Controls -->
            <div class="header-mobile-controls">
                <!-- Language Selector -->
                <select class="filter-input" id="language-selector-mobile" onchange="changeLanguage(this.value)"
                    style="width: auto; padding: 0.5rem; border-radius: 6px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-main); font-size: 0.875rem;">
                    <option value="en">üá¨üáß</option>
                    <option value="bn">üáßüá©</option>
                    <option value="es">üá™üá∏</option>
                    <option value="fr">üá´üá∑</option>
                    <option value="de">üá©üá™</option>
                    <option value="hi">üáÆüá≥</option>
                    <option value="ar">üá∏üá¶</option>
                    <option value="zh">üá®üá≥</option>
                </select>

                <!-- Notification Icon -->
                <div style="position: relative;">
                    <button class="btn btn-secondary" style="width: auto; position: relative; padding: 0.5rem;"
                        onclick="toggleNotificationsMobile(event)" id="notification-btn-mobile" title="Notifications">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                        <span id="notification-badge-mobile"
                            style="position: absolute; top: -3px; right: -3px; background: var(--danger); color: white; border-radius: 50%; width: 16px; height: 16px; display: flex; align-items: center; justify-content: center; font-size: 0.65rem; font-weight: bold; display: none;">0</span>
                    </button>
                    <div id="notification-dropdown-mobile"
                        style="position: absolute; right: 0; top: calc(100% + 0.5rem); background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); min-width: calc(100vw - 2rem); max-width: calc(100vw - 2rem); max-height: 400px; overflow-y: auto; z-index: 1002; display: none;">
                        <div
                            style="padding: 1rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                            <h3 style="margin: 0; font-size: 1rem;" data-translate="notifications">Notifications</h3>
                            <button onclick="clearAllNotifications()"
                                style="background: none; border: none; color: var(--primary); cursor: pointer; font-size: 0.875rem;"
                                data-translate="clear_all">Clear All</button>
                        </div>
                        <div id="notification-list-mobile" style="padding: 0.5rem;">
                            <div style="padding: 2rem; text-align: center; color: var(--text-light);"
                                data-translate="no_notifications">No notifications</div>
                        </div>
                    </div>
                </div>

                <!-- Connect Excel Button (Mobile) -->
                <button class="btn btn-secondary"
                    style="width: auto; display: inline-flex; align-items: center; padding: 0.5rem;"
                    onclick="connectExcelFile()" title="Connect Excel File" id="connect-btn-mobile">
                    <svg width="16" height="16" viewBox="-0.08 0 1.28 1.28" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M.103 0a.1.1 0 0 0-.101.102v1.077a.1.1 0 0 0 .101.101h.915a.1.1 0 0 0 .101-.101V.406L.742 0z"
                            fill-rule="evenodd" clip-rule="evenodd" fill="#0c8fe8"></path>
                        <g fill-rule="evenodd" clip-rule="evenodd">
                            <path d="M1.12.407v.02H.864S.738.402.741.293c0 0 .004.114.12.114z" fill="#0973e2"></path>
                            <path d="M.741 0v.291c0 .033.022.116.122.116h.256z" opacity=".5" fill="#fff"></path>
                        </g>
                        <path
                            d="M.565.712a.106.106 0 0 0-.151 0L.353.773a.11.11 0 0 0 0 .151.025.025 0 0 0 .035 0 .024.024 0 0 0 0-.035.06.06 0 0 1 0-.082L.45.746a.057.057 0 0 1 .081 0 .06.06 0 0 1 0 .081l-.029.03q.01.03.008.061L.566.862a.106.106 0 0 0 0-.151M.412.83a.025.025 0 0 0 0 .035.057.057 0 0 1 0 .081l-.061.061a.057.057 0 0 1-.081 0 .06.06 0 0 1 0-.081L.299.897A.14.14 0 0 1 .291.835L.235.891a.106.106 0 0 0 0 .151.11.11 0 0 0 .151 0L.448.98a.106.106 0 0 0 0-.151.025.025 0 0 0-.035 0"
                            fill="#fff"></path>
                    </svg>
                </button>

                <!-- 3-Dot Menu -->
                <div style="position: relative; display: none;" id="mobile-menu-container">
                    <button class="btn btn-secondary" style="width: auto; padding: 0.5rem;"
                        onclick="toggleMobileMenu(event)" id="mobile-menu-btn" title="Menu">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </button>
                    <div id="mobile-menu-dropdown" class="mobile-menu-dropdown-header">
                        <button class="mobile-menu-item-header" onclick="refreshData(); closeMobileMenuHeader();">
                            <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <polyline points="1 20 1 14 7 14"></polyline>
                                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                            </svg>
                            <span data-translate="refresh">Refresh</span>
                        </button>
                        <button class="mobile-menu-item-header" onclick="exportData(); closeMobileMenuHeader();">
                            <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            <span data-translate="export">Export</span>
                        </button>
                        <button class="mobile-menu-item-header"
                            onclick="disconnectExcelFile(); closeMobileMenuHeader();">
                            <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            <span data-translate="disconnect">Disconnect</span>
                        </button>
                        <button class="mobile-menu-item-header" onclick="toggleDarkMode(); closeMobileMenuHeader();">
                            <svg class="icon icon-sm" id="dark-mode-icon-mobile" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <span data-translate="dark_mode">Dark Mode</span>
                        </button>
                        <button class="mobile-menu-item-header"
                            onclick="switchTab('settings'); closeMobileMenuHeader();">
                            <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364l-4.243-4.243m-4.242 0L5.636 17.364m12.728 0l-4.243-4.243m-4.242 0L5.636 6.636">
                                </path>
                            </svg>
                            <span data-translate="settings">Settings</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Status Bar -->
    <div id="status-bar" class="status-bar status-disconnected">
        Disconnected from 'finance_data.xlsx'. Please connect to start.
    </div>

    <!-- Navigation -->
    <nav class="nav-tabs">
        <div class="nav-tab active" onclick="switchTab('dashboard')" data-translate="dashboard">Dashboard</div>
        <div class="nav-tab" onclick="switchTab('income')" data-translate="income">Income</div>
        <div class="nav-tab" onclick="switchTab('expenses')" data-translate="expenses">Expenses</div>
        <div class="nav-tab" onclick="switchTab('receivables')" data-translate="receivables">Due (Receivables)</div>
        <div class="nav-tab" onclick="switchTab('payables')" data-translate="payables">Payables</div>
        <div class="nav-tab" onclick="switchTab('plans')" data-translate="plans">Future Plans</div>
        <div class="nav-tab" onclick="switchTab('budgets')" data-translate="budgets">Budgets</div>
        <div class="nav-tab" onclick="switchTab('categories')" data-translate="categories">Categories</div>
        <div class="nav-tab" onclick="switchTab('reports')" data-translate="reports">Reports</div>
        <div class="nav-tab" onclick="switchTab('analytics')" data-translate="analytics">Analytics</div>
        <div class="nav-tab" onclick="switchTab('templates')" data-translate="templates">üìã Templates</div>
        <div class="nav-tab" onclick="switchTab('accounts')" data-translate="accounts">üí≥ Accounts</div>
        <div class="nav-tab" onclick="switchTab('family')" data-translate="family_members">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family</div>
        <div class="nav-tab" onclick="switchTab('transfers')" data-translate="transfers">üí∏ Transfers</div>
        <div class="nav-tab" onclick="switchTab('debts')" data-translate="debts">üí∏ Debts</div>
        <div class="nav-tab" onclick="switchTab('recurring')" data-translate="recurring">üîÑ Recurring</div>
        <div class="nav-tab" onclick="switchTab('calendar')" data-translate="calendar">üìÖ Calendar</div>
        <div class="nav-tab" onclick="switchTab('cashflow')" data-translate="cashflow">üí∞ Cash Flow</div>
        <div class="nav-tab" onclick="switchTab('investments')" data-translate="investments">üìà Investments</div>
        <div class="nav-tab" onclick="switchTab('settings')" data-translate="settings">‚öôÔ∏è Settings</div>
    </nav>

    <!-- Main Content Area -->
    <main class="container">

        <!-- Dashboard View -->
        <div id="view-dashboard">
            <div class="stats-grid">
                <div class="stat-card" style="border-color: var(--success);">
                    <div class="stat-label" data-translate="this_month_income">This Month Income</div>
                    <div class="stat-value" id="dash-current-month-income">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: var(--danger);">
                    <div class="stat-label" data-translate="this_month_expenses">This Month Expenses</div>
                    <div class="stat-value" id="dash-current-month-expenses">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: var(--primary);">
                    <div class="stat-label" data-translate="this_month_balance">This Month Balance</div>
                    <div class="stat-value" id="dash-current-month-balance">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: var(--success);">
                    <div class="stat-label" data-translate="total_income">Total Income</div>
                    <div class="stat-value" id="dash-income">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: var(--danger);">
                    <div class="stat-label" data-translate="total_expenses">Total Expenses</div>
                    <div class="stat-value" id="dash-expenses">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: var(--primary);">
                    <div class="stat-label" data-translate="net_balance">Net Balance</div>
                    <div class="stat-value" id="dash-balance">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: var(--purple);">
                    <div class="stat-label" data-translate="total_savings">Total Savings</div>
                    <div class="stat-value" id="dash-savings">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: var(--warning);">
                    <div class="stat-label" data-translate="due_receivables">Due Receivables</div>
                    <div class="stat-value" id="dash-receivables-total">‡ß≥0</div>
                </div>
                <div class="stat-card" style="border-color: #c53030;">
                    <div class="stat-label" data-translate="due_payables">Due Payables</div>
                    <div class="stat-value" id="dash-payables-total">‡ß≥0</div>
                </div>
            </div>


            <!-- Family Members Overview -->
            <div class="card" id="family-members-overview-card" style="margin-bottom: 1.5rem; display: none;">
                <h2>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <span data-translate="family_members">Family Members</span> <span
                        data-translate="overview">Overview</span></h2>
                <div id="family-members-overview-content" style="margin-top: 1rem;">
                    <div class="text-center" style="padding: 1rem; color: var(--text-light);">Loading...</div>
                </div>
            </div>

            <!-- Bill Reminders Widget -->
            <div class="card" style="margin-bottom: 1.5rem;">
                <h2>üìÖ <span data-translate="upcoming_bills">Upcoming Bills & Reminders</span></h2>
                <div id="bill-reminders-content" style="margin-top: 1rem;">
                    <div class="text-center" style="padding: 1rem; color: var(--text-light);"
                        data-translate="loading_reminders">Loading reminders...</div>
                </div>
            </div>

            <!-- Alerts Banner -->
            <div id="dashboard-alerts"></div>

            <!-- Monthly Comparison -->
            <div class="card" id="monthly-comparison-card" style="margin-bottom: 2rem;">
                <h2>üìä <span data-translate="monthly_comparison">Monthly Comparison</span></h2>
                <div id="monthly-comparison-content"></div>
            </div>

            <!-- Financial Health Score -->
            <div class="card"
                style="margin-bottom: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;"
                            data-translate="financial_health_score">Financial Health Score</div>
                        <div style="font-size: 3rem; font-weight: bold;" id="health-score">-</div>
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-top: 0.5rem;" id="health-status"></div>
                    </div>
                    <div style="flex: 1; min-width: 200px;">
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.8;" data-translate="savings_rate">Savings
                                    Rate</div>
                                <div style="font-size: 1.5rem; font-weight: bold;" id="savings-rate">0%</div>
                            </div>
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.8;" data-translate="expense_ratio">Expense
                                    Ratio</div>
                                <div style="font-size: 1.5rem; font-weight: bold;" id="expense-ratio">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Insights -->
            <div class="analytics-grid" style="margin-bottom: 2rem;">
                <div class="insight-card">
                    <div class="insight-title" data-translate="average_monthly_expense">Average Monthly Expense</div>
                    <div class="insight-value" id="avg-monthly-expense">‡ß≥0</div>
                    <div class="insight-trend" id="expense-trend"></div>
                </div>
                <div class="insight-card">
                    <div class="insight-title" data-translate="average_monthly_income">Average Monthly Income</div>
                    <div class="insight-value" id="avg-monthly-income">‡ß≥0</div>
                    <div class="insight-trend" id="income-trend"></div>
                </div>
                <div class="insight-card">
                    <div class="insight-title" data-translate="top_spending_category">Top Spending Category</div>
                    <div class="insight-value" id="top-category" style="font-size: 1.2rem;">-</div>
                    <div class="insight-trend" id="top-category-amount"></div>
                </div>
                <div class="insight-card">
                    <div class="insight-title" data-translate="average_transaction_size">Average Transaction Size</div>
                    <div class="insight-value" id="avg-transaction">‡ß≥0</div>
                    <div class="insight-trend" data-translate="all_transactions">All transactions</div>
                </div>
                <div class="insight-card">
                    <div class="insight-title" data-translate="monthly_savings">Monthly Savings</div>
                    <div class="insight-value" id="avg-monthly-savings">‡ß≥0</div>
                    <div class="insight-trend" id="savings-trend"></div>
                </div>
                <div class="insight-card">
                    <div class="insight-title" data-translate="transaction_count">Transaction Count</div>
                    <div class="insight-value" id="transaction-count">0</div>
                    <div class="insight-trend" id="transaction-breakdown"></div>
                </div>
            </div>

            <!-- Charts Section -->
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                <div class="chart-container">
                    <div class="chart-title" data-translate="income_vs_expenses_trend">Income vs Expenses Trend</div>
                    <canvas id="trend-chart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title" data-translate="cash_flow">Cash Flow</div>
                    <canvas id="cashflow-chart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title" data-translate="expense_categories">Expense Categories</div>
                    <canvas id="expense-categories-chart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title" data-translate="income_categories">Income Categories</div>
                    <canvas id="income-categories-chart"></canvas>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                <div class="card">
                    <h2>üì• <span data-translate="due_receivables">Due Receivables</span></h2>
                    <div id="dash-receivables-list"></div>
                </div>
                <div class="card">
                    <h2>üì§ <span data-translate="due_payables">Due Payables</span></h2>
                    <div id="dash-payables-list"></div>
                </div>
            </div>
        </div>

        <!-- Generic List View (Used for Income, Expenses, Receivables, Payables) -->
        <div id="view-list" class="hidden">
            <div class="card">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <h2 id="list-title" style="margin: 0;">Items</h2>
                        <small id="list-count" style="color: var(--text-light); font-size: 0.875rem;"></small>
                    </div>
                    <div class="filter-bar" style="margin: 0;">
                        <div class="search-box">
                            <input type="text" id="search-input" placeholder="" data-translate-placeholder="search"
                                onkeyup="applyFilters()">
                            <span class="search-icon">üîç</span>
                        </div>
                        <select class="filter-input" id="category-filter" onchange="applyFilters()">
                            <option value="">All Categories</option>
                        </select>
                        <input type="date" class="filter-input" id="date-from-filter" onchange="applyFilters()"
                            placeholder="" data-translate-placeholder="from_date">
                        <input type="date" class="filter-input" id="date-to-filter" onchange="applyFilters()"
                            placeholder="" data-translate-placeholder="to_date">
                        <select class="filter-input" id="recurring-filter" onchange="applyFilters()"
                            style="min-width: 120px;">
                            <option value="">All Types</option>
                            <option value="recurring">Recurring Only</option>
                            <option value="non-recurring">Non-Recurring</option>
                        </select>
                        <select class="filter-input" id="family-member-filter" onchange="applyFilters()"
                            style="min-width: 150px;">
                            <option value="" data-translate="all_family_members">All Family Members</option>
                        </select>
                        <select class="filter-input" id="sort-by" onchange="applyFilters()" style="min-width: 150px;">
                            <option value="" data-translate="sort_by">Sort by...</option>
                            <option value="date-asc">Date (Oldest First)</option>
                            <option value="date-desc">Date (Newest First)</option>
                            <option value="amount-asc">Amount (Low to High)</option>
                            <option value="amount-desc">Amount (High to Low)</option>
                            <option value="category-asc">Category (A-Z)</option>
                            <option value="category-desc">Category (Z-A)</option>
                            <option value="status-asc">Status (Paid First)</option>
                            <option value="status-desc">Status (Unpaid First)</option>
                            <option value="priority-asc">Priority (Low to High)</option>
                            <option value="priority-desc">Priority (High to Low)</option>
                        </select>
                        <button class="btn-icon" onclick="clearFilters()">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                            Clear Filters
                        </button>
                        <button class="btn btn-secondary" onclick="exportFilteredToExcel()" style="width: auto; margin-left: 0.5rem;" title="Export Filtered Data to Excel">
                            üìä Export to Excel
                        </button>
                        <button class="btn btn-secondary" onclick="exportFilteredToImage()" style="width: auto; margin-left: 0.5rem;" title="Export Filtered Data as Image">
                            üñºÔ∏è Export as Image
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead id="list-thead"></thead>
                        <tbody id="list-tbody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Plans View -->
        <div id="view-plans" class="hidden">
            <div class="card">
                <h2 data-translate="plans">Future Plans & Goals</h2>
                <div id="plans-container"></div>
            </div>
        </div>

        <!-- Budgets View -->
        <div id="view-budgets" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2 data-translate="budgets">Budget Tracking</h2>
                    <button class="btn btn-primary" style="width: auto;" onclick="openModal('form', 'budget')"
                        data-translate="add_budget">+ Add
                        Budget</button>
                </div>
                <div id="budgets-container"></div>
            </div>
        </div>

        <!-- Reports View -->
        <div id="view-reports" class="hidden">
            <div class="card">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem;">
                    <h2 data-translate="reports">Financial Reports</h2>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn-icon" onclick="printReport()" data-translate="print">üñ®Ô∏è Print</button>
                    </div>
                </div>
                <div style="background: #f7fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div
                        style="font-size: 0.875rem; font-weight: 600; color: var(--text-main); margin-bottom: 0.75rem;">
                        Filters</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div>
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Report
                                Period</label>
                            <select class="filter-input" id="report-period" onchange="renderReports()"
                                style="width: 100%;">
                                <option value="month">This Month</option>
                                <option value="lastmonth">Last Month</option>
                                <option value="year">This Year</option>
                                <option value="lastyear">Last Year</option>
                                <option value="custom">Custom Range</option>
                                <option value="all">All Time</option>
                            </select>
                        </div>
                        <div id="custom-date-from-container" style="display: none;">
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Date
                                From</label>
                            <input type="date" class="filter-input" id="report-date-from" onchange="renderReports()"
                                style="width: 100%;">
                        </div>
                        <div id="custom-date-to-container" style="display: none;">
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Date
                                To</label>
                            <input type="date" class="filter-input" id="report-date-to" onchange="renderReports()"
                                style="width: 100%;">
                        </div>
                        <div>
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Transaction
                                Type</label>
                            <select class="filter-input" id="report-type" onchange="renderReports()"
                                style="width: 100%;">
                                <option value="all">All Types</option>
                                <option value="income">Income Only</option>
                                <option value="expense">Expense Only</option>
                                <option value="receivable">Receivables Only</option>
                                <option value="payable">Payables Only</option>
                            </select>
                        </div>
                        <div>
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Category</label>
                            <select class="filter-input" id="report-category" onchange="renderReports()"
                                style="width: 100%;">
                                <option value="">All Categories</option>
                            </select>
                        </div>
                        <div>
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">${t('account')}</label>
                            <select class="filter-input" id="report-account" onchange="renderReports()"
                                style="width: 100%;">
                                <option value="">${t('all_accounts')}</option>
                                ${(state.data.accounts || []).map(acc => `<option value="${acc.name}">${acc.name}
                                    (${acc.type})</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Status
                                (Receivables/Payables)</label>
                            <select class="filter-input" id="report-status" onchange="renderReports()"
                                style="width: 100%;">
                                <option value="">All Status</option>
                                <option value="paid">Paid</option>
                                <option value="unpaid">Unpaid</option>
                            </select>
                        </div>
                        <div>
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Priority</label>
                            <select class="filter-input" id="report-priority" onchange="renderReports()"
                                style="width: 100%;">
                                <option value="">All Priorities</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                            </select>
                        </div>
                        <div>
                            <label
                                style="display: block; font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Recurring</label>
                            <select class="filter-input" id="report-recurring" onchange="renderReports()"
                                style="width: 100%;">
                                <option value="">All Transactions</option>
                                <option value="recurring">Recurring Only</option>
                                <option value="non-recurring">Non-Recurring Only</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="resetReportFilters()"
                        style="margin-top: 0.75rem; font-size: 0.875rem;">Reset Filters</button>
                </div>
                <div id="reports-container"></div>
            </div>
        </div>

        <!-- Analytics View -->
        <div id="view-analytics" class="hidden">
            <div class="card">
                <h2>Advanced Analytics</h2>
                <div id="analytics-container"></div>
            </div>
        </div>

        <!-- Templates View -->
        <div id="view-templates" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2>Transaction Templates</h2>
                    <button class="btn btn-primary" onclick="openTemplateModal()" style="width: auto;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <span data-translate="create_template">Create Template</span>
                    </button>
                </div>
                <div id="templates-container"></div>
            </div>
        </div>

        <!-- Accounts View -->
        <div id="view-accounts" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 data-translate="account_management">Account Management</h2>
                    <button class="btn btn-primary" onclick="openAccountModal()" style="width: auto;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <span data-translate="add_account">Add Account</span>
                    </button>
                </div>
                <div id="accounts-container"></div>
            </div>
        </div>

        <!-- Family Members View -->
        <div id="view-family" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 data-translate="family_members">Family Members</h2>
                    <button class="btn btn-primary" onclick="openFamilyMemberModal()" style="width: auto;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <span data-translate="add_family_member">Add Family Member</span>
                    </button>
                </div>
                <div id="family-members-container"></div>
            </div>
        </div>

        <!-- Transfers View -->
        <div id="view-transfers" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 data-translate="account_transfers">Account Transfers</h2>
                    <button class="btn btn-primary" onclick="openTransferModal()" style="width: auto;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <span data-translate="add_transfer">Add Transfer</span>
                    </button>
                </div>
                <div id="transfers-container"></div>
            </div>
        </div>

        <!-- Debts View -->
        <div id="view-debts" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 data-translate="debt_tracker">Debt Tracker</h2>
                    <button class="btn btn-primary" onclick="openDebtModal()" style="width: auto;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <span data-translate="add_debt">Add Debt</span>
                    </button>
                </div>
                <div id="debts-container"></div>
            </div>
        </div>


        <!-- Recurring Transactions View -->
        <div id="view-recurring" class="hidden">
            <div class="card">
                <h2 data-translate="recurring_transactions_manager">Recurring Transactions Manager</h2>
                <div
                    style="margin-bottom: 1rem; padding: 1rem; background: #f0f9ff; border-radius: 8px; border-left: 4px solid var(--primary);">
                    <div style="font-weight: 600; margin-bottom: 0.5rem;">üí° Auto-Generate Recurring Transactions</div>
                    <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.75rem;">
                        This will automatically create transactions for all recurring items based on their frequency and
                        next due date.
                    </div>
                    <button class="btn btn-primary" onclick="generateRecurringTransactions()">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                        Generate Recurring Transactions
                    </button>
                </div>
                <div id="recurring-container"></div>
            </div>
        </div>

        <!-- Calendar View -->
        <div id="view-calendar" class="hidden">
            <div class="card">
                <h2 data-translate="calendar">Financial Calendar</h2>
                <div id="calendar-container"></div>
            </div>
        </div>

        <!-- Cash Flow View -->
        <div id="view-cashflow" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 data-translate="cash_flow_analysis">Cash Flow Analysis</h2>
                    <div>
                        <select class="filter-input" id="cashflow-period" onchange="renderCashFlow()"
                            style="min-width: 150px;">
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                </div>
                <div id="cashflow-container"></div>
            </div>
        </div>

        <!-- Investments View -->
        <div id="view-investments" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 data-translate="investment_portfolio">Investment Portfolio</h2>
                    <button class="btn btn-primary" onclick="openInvestmentModal()" style="width: auto;"
                        data-translate="add_investment">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Investment
                    </button>
                </div>
                <div id="investments-container"></div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="view-settings" class="hidden">
            <div class="card">
                <h2 data-translate="settings_preferences">Settings & Preferences</h2>

                <div class="settings-section">
                    <div class="settings-section-title" data-translate="general_settings">General Settings</div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="currency_symbol">Currency Symbol</div>
                            <div class="settings-description" data-translate="currency_symbol_description">Default
                                currency symbol for all amounts</div>
                        </div>
                        <select class="form-select" id="setting-currency" style="width: 200px;"
                            onchange="saveSettings()">
                            <option value="‡ß≥">‡ß≥ (Taka)</option>
                            <option value="$">$ (Dollar)</option>
                            <option value="‚Ç¨">‚Ç¨ (Euro)</option>
                            <option value="¬£">¬£ (Pound)</option>
                            <option value="‚Çπ">‚Çπ (Rupee)</option>
                            <option value="¬•">¬• (Yen)</option>
                        </select>
                    </div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="date_format">Date Format</div>
                            <div class="settings-description" data-translate="date_format_description">Preferred date
                                display format</div>
                        </div>
                        <select class="form-select" id="setting-date-format" style="width: 200px;"
                            onchange="saveSettings()">
                            <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                            <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                            <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                            <option value="DD-MM-YYYY">DD-MM-YYYY</option>
                        </select>
                    </div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="auto_save">Auto-save</div>
                            <div class="settings-description" data-translate="auto_save_description">Automatically save
                                changes to Excel file</div>
                        </div>
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="setting-auto-save" onchange="saveSettings()">
                            <span data-translate="enable">Enable</span>
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-section-title" data-translate="data_management">Data Management</div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="export_data">Export Data</div>
                            <div class="settings-description" data-translate="export_data_description">Download all data
                                as Excel file</div>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-primary" onclick="exportData()"
                                data-translate="export_to_excel">Export to Excel</button>
                            <button class="btn btn-secondary" onclick="exportDataCSV()"
                                data-translate="export_to_csv">Export to CSV</button>
                        </div>
                    </div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="import_data">Import Data</div>
                            <div class="settings-description" data-translate="import_data_description">Import data from
                                Excel file (will merge with existing data)</div>
                        </div>
                        <button class="btn btn-primary" onclick="importData()" style="width: auto;"
                            data-translate="import_from_excel">Import from Excel</button>
                    </div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="backup_data">Backup Data</div>
                            <div class="settings-description" data-translate="backup_data_description">Create a backup
                                of all your data</div>
                        </div>
                        <button class="btn btn-secondary" onclick="backupData()" style="width: auto;"
                            data-translate="create_backup">Create Backup</button>
                    </div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="restore_data">Restore Data</div>
                            <div class="settings-description" data-translate="restore_data_description">Restore data
                                from a backup file</div>
                        </div>
                        <button class="btn btn-secondary" onclick="restoreData()" style="width: auto;"
                            data-translate="restore_backup">Restore Backup</button>
                    </div>
                    <div class="settings-row">
                        <div>
                            <div class="settings-label" data-translate="undo_last_action">Undo Last Action</div>
                            <div class="settings-description" data-translate="undo_last_action_description">Undo the
                                last transaction (add/edit/delete)</div>
                        </div>
                        <button class="btn btn-secondary" onclick="undoLastAction()" id="undo-btn" style="width: auto;"
                            data-translate="undo">Undo</button>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-section-title" data-translate="keyboard_shortcuts">Keyboard Shortcuts</div>
                    <div style="padding: 1rem 0;">
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.75rem; color: var(--primary);"
                                    data-translate="navigation">Navigation</div>
                                <div style="font-size: 0.875rem; line-height: 2;">
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">1</span> -
                                        <span data-translate="dashboard">Dashboard</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">2</span> -
                                        <span data-translate="income">Income</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">3</span> -
                                        <span data-translate="expenses">Expenses</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">4</span> -
                                        <span data-translate="receivables">Receivables</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">5</span> -
                                        <span data-translate="payables">Payables</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">6</span> -
                                        <span data-translate="plans">Plans</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">7</span> -
                                        <span data-translate="budgets">Budgets</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">8</span> -
                                        <span data-translate="categories">Categories</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">9</span> -
                                        <span data-translate="reports">Reports</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">0</span> -
                                        <span data-translate="settings">Settings</span></div>
                                    <div><span class="shortcut-key">‚Üê</span> / <span class="shortcut-key">‚Üí</span> -
                                        Navigate Tabs</div>
                                </div>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.75rem; color: var(--primary);"
                                    data-translate="actions">Actions</div>
                                <div style="font-size: 0.875rem; line-height: 2;">
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">N</span> -
                                        <span data-translate="add_new_item">Add New Item</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">S</span> -
                                        <span data-translate="save">Save</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">E</span> -
                                        <span data-translate="export_data">Export Data</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">I</span> -
                                        <span data-translate="import_data">Import Data</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">B</span> -
                                        <span data-translate="backup_data">Backup Data</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">Z</span> -
                                        <span data-translate="undo">Undo</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">R</span> -
                                        <span data-translate="refresh">Refresh</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">F</span> -
                                        <span data-translate="search">Search</span></div>
                                    <div><span class="shortcut-key">Del</span> - <span data-translate="delete">Delete
                                            Selected</span></div>
                                </div>
                            </div>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.75rem; color: var(--primary);"
                                    data-translate="quick_access">Quick Access</div>
                                <div style="font-size: 0.875rem; line-height: 2;">
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">,</span> /
                                        <span class="shortcut-key">P</span> - <span
                                            data-translate="settings">Settings</span></div>
                                    <div><span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">/</span> -
                                        <span data-translate="show_shortcuts">Show Shortcuts</span></div>
                                    <div><span class="shortcut-key">F1</span> - <span
                                            data-translate="show_shortcuts">Show Shortcuts</span></div>
                                    <div><span class="shortcut-key">Esc</span> - Close Modal / Clear Search</div>
                                    <div><span class="shortcut-key">Enter</span> - Submit Form</div>
                                </div>
                            </div>
                        </div>
                        <div
                            style="margin-top: 1.5rem; padding: 1rem; background: var(--card-bg); border-radius: 8px; border: 1px solid var(--border);">
                            <div style="font-size: 0.75rem; color: var(--text-light); line-height: 1.6;">
                                <strong>üí° Tip:</strong> Keyboard shortcuts work globally except when typing in input
                                fields. Use <span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">/</span>
                                or <span class="shortcut-key">F1</span> to view this help anytime.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categories View -->
        <div id="view-categories" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2>Category Management</h2>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-primary" style="width: auto;" onclick="openModal('form', 'category')">+
                            Add Category</button>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                    <div>
                        <h3 style="margin-bottom: 1rem; font-size: 1rem; color: var(--text-main);">Income Categories
                        </h3>
                        <div id="income-categories-list"></div>
                    </div>
                    <div>
                        <h3 style="margin-bottom: 1rem; font-size: 1rem; color: var(--text-main);">Expense Categories
                        </h3>
                        <div id="expense-categories-list"></div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Sticky Add Button -->
    <button class="fab" onclick="openModal('selector')">+</button>

    <!-- Modal Overlay -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal" id="modal-content">
            <!-- Content injected via JS -->
        </div>
    </div>

    <script>
        // --- 1. STATE & CONFIG ---
        const CONFIG = {
            fileName: 'finance_data.xlsx',
            currency: '‡ß≥',
            dateFormat: 'YYYY-MM-DD'
        };

        // --- TRANSLATION SYSTEM ---
        const translations = {
            en: {
                notifications: 'Notifications',
                clear_all: 'Clear All',
                no_notifications: 'No notifications',
                view: 'View',
                edit: 'Edit',
                delete: 'Delete',
                dashboard: 'Dashboard',
                income: 'Income',
                expenses: 'Expenses',
                receivables: 'Due (Receivables)',
                payables: 'Payables',
                plans: 'Future Plans',
                budgets: 'Budgets',
                categories: 'Categories',
                category: 'Category',
                reports: 'Reports',
                analytics: 'Analytics',
                templates: 'Templates',
                accounts: 'Accounts',
                debts: 'Debts',
                goals: 'Goals',
                recurring: 'Recurring',
                calendar: 'Calendar',
                cashflow: 'Cash Flow',
                investments: 'Investments',
                settings: 'Settings',
                bill_details: 'Bill Details',
                amount: 'Amount',
                due_date: 'Due Date',
                status: 'Status',
                description: 'Description',
                priority: 'Priority',
                type: 'Type',
                paid: 'Paid',
                unpaid: 'Unpaid',
                high: 'High',
                medium: 'Medium',
                low: 'Low',
                today: 'Today',
                tomorrow: 'Tomorrow',
                days: 'days',
                close: 'Close',
                refresh: 'Refresh',
                export: 'Export',
                disconnect: 'Disconnect',
                dark_mode: 'Dark Mode',
                income_sources: 'Income Sources',
                date: 'Date',
                source: 'Source',
                actions: 'Actions',
                details: 'Details',
                from: 'From',
                to: 'To',
                search: 'Search...',
                from_date: 'From Date',
                to_date: 'To Date',
                sort_by: 'Sort by...',
                total_income: 'Total Income',
                total_expenses: 'Total Expenses',
                net_balance: 'Net Balance',
                this_month_income: 'This Month Income',
                this_month_expenses: 'This Month Expenses',
                this_month_balance: 'This Month Balance',
                total_savings: 'Total Savings',
                due_receivables: 'Due Receivables',
                due_payables: 'Due Payables',
                loading_reminders: 'Loading reminders...',
                no_items: 'No items',
                saved_successfully: 'Saved successfully!',
                connected_to: 'Connected to',
                disconnected: 'Disconnected',
                please_connect: 'Please connect Excel file.',
                upcoming_bills: 'Upcoming Bills & Reminders',
                monthly_comparison: 'Monthly Comparison',
                financial_health_score: 'Financial Health Score',
                savings_rate: 'Savings Rate',
                expense_ratio: 'Expense Ratio',
                average_monthly_expense: 'Average Monthly Expense',
                average_monthly_income: 'Average Monthly Income',
                top_spending_category: 'Top Spending Category',
                average_transaction_size: 'Average Transaction Size',
                monthly_savings: 'Monthly Savings',
                transaction_count: 'Transaction Count',
                income_vs_expenses_trend: 'Income vs Expenses Trend',
                cash_flow: 'Cash Flow',
                expense_categories: 'Expense Categories',
                income_categories: 'Income Categories',
                all_transactions: 'All transactions',
                not_enough_data: 'Not enough data for comparison. Need at least 2 months of data.',
                no_upcoming_bills: 'No upcoming bills in the next 7 days.',
                positive_monthly_savings: 'Positive monthly savings',
                negative_monthly_savings: 'Negative monthly savings',
                income_comma_expenses: 'income',
                expenses_word: 'expenses',
                item: 'item',
                items: 'items',
                showing: 'Showing',
                of: 'of',
                all_categories: 'All Categories',
                all_family_members: 'All Family Members',
                no_data_found: 'No data found.',
                no_future_plans: 'No future plans found.',
                no_budgets_set: 'No budgets set. Add a budget to track spending limits.',
                excellent_health: 'Excellent - Great financial health!',
                good_health: 'Good - On the right track',
                fair_health: 'Fair - Room for improvement',
                needs_attention: 'Needs Attention - Review spending habits',
                save: 'Save',
                update: 'Update',
                cancel: 'Cancel',
                add: 'Add',
                save_item: 'Save Item',
                update_item: 'Update Item',
                add_income: 'Add Income',
                edit_income: 'Edit Income',
                add_expense: 'Add Expense',
                edit_expense: 'Edit Expense',
                add_receivable: 'Add Receivable',
                edit_receivable: 'Edit Receivable',
                add_payable: 'Add Payable',
                edit_payable: 'Edit Payable',
                add_plan: 'Add Plan',
                edit_plan: 'Edit Plan',
                add_budget: 'Add Budget',
                edit_budget: 'Edit Budget',
                create_template: 'Create Template',
                edit_template: 'Edit Template',
                add_account: 'Add Account',
                update_account: 'Update Account',
                add_debt: 'Add Debt',
                update_debt: 'Update Debt',
                add_goal: 'Add Goal',
                update_goal: 'Update Goal',
                period: 'Period',
                daily: 'Daily',
                weekly: 'Weekly',
                monthly: 'Monthly',
                per_3_month: 'Per 3 Month',
                per_6_month: 'Per 6 Month',
                yearly: 'Yearly',
                active: 'Active',
                paused: 'Paused',
                completed: 'Completed',
                in_progress: 'In Progress',
                cancelled: 'Cancelled',
                budget_tracks_info: 'Budget tracks actual spending against this limit for the selected category within the selected period.',
                source: 'Source',
                notes_optional: 'Notes (Optional)',
                recurring_transaction: 'Recurring Transaction',
                frequency: 'Frequency',
                next_occurrence_date: 'Next Occurrence Date',
                payment_method: 'Payment Method',
                select_method: 'Select Method',
                cash: 'Cash',
                bank_transfer: 'Bank Transfer',
                card: 'Card',
                mobile_payment: 'Mobile Payment',
                other: 'Other',
                select_category: 'Select Category',
                from_client: 'From (Client/Person)',
                to_vendor: 'To (Vendor/Person)',
                name_placeholder: 'Name',
                reason: 'Reason',
                reminder_days_before: 'Reminder (Days Before Due)',
                reminder_days_before_deadline: 'Reminder (Days Before Deadline)',
                plan_title: 'Plan Title',
                target_amount: 'Target Amount',
                start_date: 'Start Date',
                target_deadline: 'Target Deadline',
                notes: 'Notes',
                additional_notes: 'Additional notes...',
                optional_description: 'Optional description',
                progress_note: 'Note: Progress will be calculated based on Total Savings (Income - Expenses + Receivables).',
                reminder_help_text: 'Get reminder this many days before due date (0 = on due date)',
                reminder_deadline_help: 'Get reminder this many days before deadline (0 = on deadline)',
                type_cannot_change: 'Type cannot be changed after creation',
                account_management: 'Account Management',
                debt_tracker: 'Debt Tracker',
                financial_goals: 'Financial Goals',
                account: 'Account',
                account_name: 'Account Name',
                account_type: 'Account Type',
                select_account: 'Select Account',
                initial_balance: 'Initial Balance',
                transfers: 'Transfers',
                transfer: 'Transfer',
                add_transfer: 'Add Transfer',
                account_transfers: 'Account Transfers',
                from_account: 'From Account',
                to_account: 'To Account',
                transfer_description_placeholder: 'e.g. Cash withdrawal, Account transfer',
                debt_name: 'Debt Name',
                debt_type: 'Debt Type',
                principal_amount: 'Principal Amount',
                amount_paid: 'Amount Paid',
                creditor_lender: 'Creditor/Lender',
                goal_name: 'Goal Name',
                current_amount: 'Current Amount',
                deadline: 'Deadline',
                template_name: 'Template Name',
                transaction_type: 'Transaction Type',
                recurring_only: 'Recurring Only',
                non_recurring: 'Non-Recurring',
                clear_filters: 'Clear Filters',
                all_types: 'All Types',
                all_accounts: 'All Accounts',
                transfers: 'Transfers',
                transfer: 'Transfer',
                account_transfers: 'Account Transfers',
                from_account: 'From Account',
                to_account: 'To Account',
                transfer_description_placeholder: 'e.g. Cash withdrawal, Account transfer',
                print: 'Print',
                no_accounts_found: 'No accounts found. Please add an account first.',
                no_accounts_added: 'No accounts added. Add an account to track balances across different sources.',
                no_transfers_recorded: 'No transfers recorded. Add a transfer to track money movement between accounts.',
                no_debts_tracked: 'No debts tracked. Add a debt to start tracking.',
                family_members: 'Family Members',
                family_member: 'Family Member',
                add_family_member: 'Add Family Member',
                edit_family_member: 'Edit Family Member',
                delete_family_member: 'Delete Family Member',
                family_member_name: 'Family Member Name',
                select_family_member: 'Select Family Member',
                select_family_members: 'Select Family Members',
                divide_equally: 'Divide Equally',
                expense_per_person: 'Per Person',
                no_family_members: 'No family members added. Add a family member to track shared expenses.',
                are_you_sure_delete_family_member: 'Are you sure you want to delete this family member?',
                settings_preferences: 'Settings & Preferences',
                general_settings: 'General Settings',
                currency_symbol: 'Currency Symbol',
                currency_symbol_description: 'Default currency symbol for all amounts',
                date_format: 'Date Format',
                date_format_description: 'Preferred date display format',
                auto_save: 'Auto-save',
                auto_save_description: 'Automatically save changes to Excel file',
                enable: 'Enable',
                data_management: 'Data Management',
                export_data: 'Export Data',
                export_data_description: 'Download all data as Excel file',
                export_to_excel: 'Export to Excel',
                export_to_csv: 'Export to CSV',
                import_data: 'Import Data',
                import_data_description: 'Import data from Excel file (will merge with existing data)',
                import_from_excel: 'Import from Excel',
                backup_data: 'Backup Data',
                backup_data_description: 'Create a backup of all your data',
                create_backup: 'Create Backup',
                restore_data: 'Restore Data',
                restore_data_description: 'Restore data from a backup file',
                restore_backup: 'Restore Backup',
                connect_excel: 'Connect Excel',
                local_excel: 'Local Excel File',
                local_excel_desc: 'Connect to a local Excel file on your computer',
                google_sheets: 'Google Sheets',
                google_sheets_desc: 'Connect to a Google Sheets document',
                other_options: 'Other Options',
                coming_soon: 'Coming Soon (OneDrive, Dropbox, etc.)',
                backup_storage: 'Backup Storage',
                local_storage: 'Local Storage',
                local_storage_desc: 'Save backup to your browser\'s local storage',
                google_drive: 'Google Drive',
                google_drive_desc: 'Save backup to your Google Drive',
                cancel: 'Cancel',
                local_storage_backups: 'Local Storage Backups:',
                restore_from_file: 'Restore from File',
                undo_last_action: 'Undo Last Action',
                undo_last_action_description: 'Undo the last transaction (add/edit/delete)',
                undo: 'Undo',
                keyboard_shortcuts: 'Keyboard Shortcuts',
                navigation: 'Navigation',
                show_shortcuts: 'Show Shortcuts',
                quick_access: 'Quick Access',
                overview: 'Overview',
                person: 'Person',
                people: 'People',
                net_contribution: 'Net Contribution',
                contributor: 'Contributor',
                owed: 'Owed',
                net_contributor: 'Net Contributor',
                net_owed: 'Net Owed',
                member_information: 'Member Information',
                all_status: 'All Status',
                color: 'Color',
                manage_categories: 'Manage Categories',
                recurring_transactions_manager: 'Recurring Transactions Manager',
                auto_generate_info: 'Auto-Generate Recurring Transactions',
                auto_generate_desc: 'This will automatically create transactions for all recurring items based on their frequency and dates.',
                generate_recurring: 'Generate Recurring Transactions',
                low: 'Low',
                medium: 'Medium',
                high: 'High',
                select_category_placeholder: 'Select Category',
                add_new_item: 'Add New Item',
                new: 'New',
                loan: 'Loan',
                mortgage: 'Mortgage',
                personal_loan: 'Personal Loan',
                savings: 'Savings',
                bank: 'Bank',
                is_required: 'is required!',
                must_be_greater_than_zero: 'must be greater than 0!',
                category_already_exists: 'This category already exists!',
                category_name_required: 'Category name is required!',
                are_you_sure_disconnect: 'Are you sure you want to disconnect from the Excel file? You will need to reconnect to save changes.',
                failed_to_save: 'Failed to save to Excel file. Check permissions.',
                are_you_sure_delete: 'Are you sure you want to delete',
                action_cannot_undo: 'This action cannot be undone.',
                are_you_sure_delete_template: 'Are you sure you want to delete this template?',
                are_you_sure_delete_account: 'Are you sure you want to delete this account? This will not delete transactions associated with it.',
                are_you_sure_delete_debt: 'Are you sure you want to delete this debt?',
                are_you_sure_delete_goal: 'Are you sure you want to delete this goal?',
                are_you_sure_delete_investment: 'Are you sure you want to delete this investment?',
                category_used_in_transactions: 'This category is used in',
                deleting_will_set_to_other: 'transaction(s). Deleting it will set those transactions to "Other". Continue?',
                cash_flow_analysis: 'Cash Flow Analysis',
                investment_portfolio: 'Investment Portfolio',
                add_investment: 'Add Investment',
                edit_investment: 'Edit Investment',
                all_methods: 'All Methods',
                placeholder_salary_freelance: 'e.g. Salary, Freelance',
                placeholder_groceries: 'e.g. Groceries',
                placeholder_new_laptop: 'e.g. New Laptop',
                placeholder_groceries_salary: 'e.g. Groceries, Salary',
                placeholder_monthly_salary: 'e.g. Monthly Salary',
                placeholder_main_bank: 'e.g. Main Bank Account',
                placeholder_home_loan: 'e.g. Home Loan',
                placeholder_bank_name: 'e.g. Bank Name',
                placeholder_emergency_fund: 'e.g. Emergency Fund',
                placeholder_apple_inc: 'e.g. Apple Inc.',
                placeholder_aapl: 'e.g. AAPL',
                total_cost_basis: 'Total Cost Basis',
                total_gain_loss: 'Total Gain/Loss',
                total_return: 'Total Return',
                placeholder_example_3: 'e.g. 3',
                placeholder_example_7: 'e.g. 7',
                optional_notes: 'Optional notes',
                investment_name: 'Investment Name',
                symbol_ticker: 'Symbol/Ticker',
                cost_basis: 'Cost Basis',
                current_value: 'Current Value',
                purchase_date: 'Purchase Date',
                stock: 'Stock',
                bond: 'Bond',
                mutual_fund: 'Mutual Fund',
                etf: 'ETF',
                cryptocurrency: 'Cryptocurrency',
                update_investment: 'Update Investment',
                delete_multiple_items: 'Delete Multiple Items',
                delete_all: 'Delete All',
                confirm: 'Confirm'
            },
            bn: {
                notifications: '‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶™‡ßç‡¶§‡¶ø',
                clear_all: '‡¶∏‡¶¨ ‡¶∏‡¶æ‡¶´ ‡¶ï‡¶∞‡ßÅ‡¶®',
                no_notifications: '‡¶ï‡ßã‡¶® ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶™‡ßç‡¶§‡¶ø ‡¶®‡ßá‡¶á',
                view: '‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®',
                edit: '‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                delete: '‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®',
                dashboard: '‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°',
                income: '‡¶Ü‡¶Ø‡¶º',
                expenses: '‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º',
                receivables: '‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø',
                payables: '‡¶¶‡ßá‡¶Ø‡¶º',
                plans: '‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§ ‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ',
                budgets: '‡¶¨‡¶æ‡¶ú‡ßá‡¶ü',
                categories: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó',
                category: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó',
                reports: '‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü',
                analytics: '‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£',
                templates: '‡¶ü‡ßá‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ü',
                accounts: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü',
                debts: '‡¶ã‡¶£',
                goals: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø',
                recurring: '‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§',
                calendar: '‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞',
                cashflow: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßç‡¶∞‡¶¨‡¶æ‡¶π',
                investments: '‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó',
                settings: '‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏',
                bill_details: '‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£',
                amount: '‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£',
                due_date: '‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                status: '‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ',
                description: '‡¶¨‡¶ø‡¶¨‡¶∞‡¶£',
                priority: '‡¶Ö‡¶ó‡ßç‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞',
                type: '‡¶ß‡¶∞‡¶®',
                paid: '‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß‡¶ø‡¶§',
                unpaid: '‡¶Ö‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß‡¶ø‡¶§',
                high: '‡¶â‡¶ö‡ßç‡¶ö',
                medium: '‡¶Æ‡¶ß‡ßç‡¶Ø‡¶Æ',
                low: '‡¶®‡¶ø‡¶Æ‡ßç‡¶®',
                today: '‡¶Ü‡¶ú',
                tomorrow: '‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ‡¶ï‡¶æ‡¶≤',
                days: '‡¶¶‡¶ø‡¶®',
                close: '‡¶¨‡¶®‡ßç‡¶ß',
                refresh: '‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂',
                export: '‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü',
                disconnect: '‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡¶®‡ßç‡¶®',
                dark_mode: '‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°',
                income_sources: '‡¶Ü‡¶Ø‡¶º‡ßá‡¶∞ ‡¶â‡ßé‡¶∏',
                date: '‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                source: '‡¶â‡ßé‡¶∏',
                actions: '‡¶ï‡¶∞‡ßç‡¶Æ',
                details: '‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§',
                from: '‡¶•‡ßá‡¶ï‡ßá',
                to: '‡¶™‡ßç‡¶∞‡¶§‡¶ø',
                search: '‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...',
                from_date: '‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                to_date: '‡¶∂‡ßá‡¶∑ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                sort_by: '‡¶∏‡¶æ‡¶ú‡¶æ‡¶®...',
                total_income: '‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶Ø‡¶º',
                total_expenses: '‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º',
                net_balance: '‡¶®‡¶ø‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏',
                this_month_income: '‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶Ü‡¶Ø‡¶º',
                this_month_expenses: '‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º',
                this_month_balance: '‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏',
                total_savings: '‡¶Æ‡ßã‡¶ü ‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º',
                due_receivables: '‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶§‡¶ø',
                due_payables: '‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®',
                loading_reminders: '‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...',
                no_items: '‡¶ï‡ßã‡¶® ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶®‡ßá‡¶á',
                saved_successfully: '‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§!',
                connected_to: '‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá',
                disconnected: '‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡¶®‡ßç‡¶®',
                please_connect: '‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                upcoming_bills: '‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶¨‡¶ø‡¶≤ ‡¶ì ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞',
                monthly_comparison: '‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶§‡ßÅ‡¶≤‡¶®‡¶æ',
                financial_health_score: '‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶ï ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶∏‡ßç‡¶ï‡ßã‡¶∞',
                savings_rate: '‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º ‡¶π‡¶æ‡¶∞',
                expense_ratio: '‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶Ö‡¶®‡ßÅ‡¶™‡¶æ‡¶§',
                average_monthly_expense: '‡¶ó‡¶°‡¶º ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º',
                average_monthly_income: '‡¶ó‡¶°‡¶º ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶Ü‡¶Ø‡¶º',
                top_spending_category: '‡¶∂‡ßÄ‡¶∞‡ßç‡¶∑ ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó',
                average_transaction_size: '‡¶ó‡¶°‡¶º ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡ßá‡¶∞ ‡¶Ü‡¶ï‡¶æ‡¶∞',
                monthly_savings: '‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º',
                transaction_count: '‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ',
                income_vs_expenses_trend: '‡¶Ü‡¶Ø‡¶º ‡¶¨‡¶®‡¶æ‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶™‡ßç‡¶∞‡¶¨‡¶£‡¶§‡¶æ',
                cash_flow: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßç‡¶∞‡¶¨‡¶æ‡¶π',
                expense_categories: '‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó',
                income_categories: '‡¶Ü‡¶Ø‡¶º ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó',
                all_transactions: '‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®',
                not_enough_data: '‡¶§‡ßÅ‡¶≤‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡ßá‡¶á‡•§ ‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß® ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§',
                no_upcoming_bills: '‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡ß≠ ‡¶¶‡¶ø‡¶®‡ßá ‡¶ï‡ßã‡¶® ‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶¨‡¶ø‡¶≤ ‡¶®‡ßá‡¶á‡•§',
                positive_monthly_savings: '‡¶á‡¶§‡¶ø‡¶¨‡¶æ‡¶ö‡¶ï ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º',
                negative_monthly_savings: '‡¶®‡ßá‡¶§‡¶ø‡¶¨‡¶æ‡¶ö‡¶ï ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º',
                income_comma_expenses: '‡¶Ü‡¶Ø‡¶º',
                expenses_word: '‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º',
                item: '‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ',
                items: '‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ',
                showing: '‡¶¶‡ßá‡¶ñ‡¶æ‡¶ö‡ßç‡¶õ‡ßá',
                of: '‡¶è‡¶∞',
                all_categories: '‡¶∏‡¶¨ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó',
                all_family_members: '‡¶∏‡¶¨ ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø',
                no_data_found: '‡¶ï‡ßã‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§',
                no_future_plans: '‡¶ï‡ßã‡¶® ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§ ‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§',
                no_budgets_set: '‡¶ï‡ßã‡¶® ‡¶¨‡¶æ‡¶ú‡ßá‡¶ü ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á‡•§ ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡¶æ‡¶ú‡ßá‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                excellent_health: '‡¶ö‡¶Æ‡ßé‡¶ï‡¶æ‡¶∞ - ‡¶¶‡ßÅ‡¶∞‡ßç‡¶¶‡¶æ‡¶®‡ßç‡¶§ ‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶ï ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø!',
                good_health: '‡¶≠‡¶æ‡¶≤ - ‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶•‡ßá',
                fair_health: '‡¶∏‡¶®‡ßç‡¶§‡ßã‡¶∑‡¶ú‡¶®‡¶ï - ‡¶â‡¶®‡ßç‡¶®‡¶§‡¶ø‡¶∞ ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó ‡¶Ü‡¶õ‡ßá',
                needs_attention: '‡¶Æ‡¶®‡ßã‡¶Ø‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶® - ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º‡ßá‡¶∞ ‡¶Ö‡¶≠‡ßç‡¶Ø‡¶æ‡¶∏ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®',
                source: '‡¶â‡ßé‡¶∏',
                notes_optional: '‡¶®‡ßã‡¶ü (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
                recurring_transaction: '‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®',
                frequency: '‡¶´‡ßç‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏‡¶ø',
                next_occurrence_date: '‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                payment_method: '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø',
                select_method: '‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                cash: '‡¶®‡¶ó‡¶¶',
                bank_transfer: '‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞',
                card: '‡¶ï‡¶æ‡¶∞‡ßç‡¶°',
                mobile_payment: '‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü',
                other: '‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø',
                select_category: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                from_client: '‡¶•‡ßá‡¶ï‡ßá (‡¶ï‡ßç‡¶≤‡¶æ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü/‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø)',
                to_vendor: '‡¶™‡ßç‡¶∞‡¶§‡¶ø (‡¶≠‡ßá‡¶®‡ßç‡¶°‡¶∞/‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø)',
                name_placeholder: '‡¶®‡¶æ‡¶Æ',
                reason: '‡¶ï‡¶æ‡¶∞‡¶£',
                reminder_days_before: '‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ (‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶ï‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá)',
                reminder_days_before_deadline: '‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ (‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá)',
                plan_title: '‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ',
                target_amount: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£',
                start_date: '‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                target_deadline: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ',
                notes: '‡¶®‡ßã‡¶ü',
                additional_notes: '‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶®‡ßã‡¶ü...',
                optional_description: '‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£',
                progress_note: '‡¶¶‡ßç‡¶∞‡¶∑‡ßç‡¶ü‡¶¨‡ßç‡¶Ø: ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø ‡¶Æ‡ßã‡¶ü ‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá (‡¶Ü‡¶Ø‡¶º - ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º + ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø)',
                reminder_help_text: '‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶è‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶æ‡¶® (0 = ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá)',
                reminder_deadline_help: '‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶∞ ‡¶è‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶æ‡¶® (0 = ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶Ø‡¶º)',
                type_cannot_change: '‡¶∏‡ßÉ‡¶∑‡ßç‡¶ü‡¶ø‡¶∞ ‡¶™‡¶∞‡ßá ‡¶ß‡¶∞‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ',
                account_management: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü',
                debt_tracker: '‡¶ã‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞',
                financial_goals: '‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶ï ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø',
                account_name: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ',
                account_type: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ß‡¶∞‡¶®',
                initial_balance: '‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏',
                debt_name: '‡¶ã‡¶£‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ',
                debt_type: '‡¶ã‡¶£‡ßá‡¶∞ ‡¶ß‡¶∞‡¶®',
                principal_amount: '‡¶Æ‡ßÇ‡¶≤ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£',
                amount_paid: '‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß‡¶ø‡¶§ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£',
                creditor_lender: '‡¶ã‡¶£‡¶¶‡¶æ‡¶§‡¶æ/‡¶ã‡¶£‡¶¶‡¶æ‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ',
                goal_name: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ',
                current_amount: '‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£',
                deadline: '‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ',
                template_name: '‡¶ü‡ßá‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ü ‡¶®‡¶æ‡¶Æ',
                transaction_type: '‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡ßá‡¶∞ ‡¶ß‡¶∞‡¶®',
                recurring_only: '‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§',
                non_recurring: '‡¶Ö-‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§',
                all_status: '‡¶∏‡¶¨ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ',
                color: '‡¶∞‡¶Ç',
                manage_categories: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®',
                recurring_transactions_manager: '‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶æ‡¶∞',
                auto_generate_info: '‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                auto_generate_desc: '‡¶è‡¶ü‡¶ø ‡¶´‡ßç‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶¨‡ßá‡•§',
                generate_recurring: '‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                low: '‡¶®‡¶ø‡¶Æ‡ßç‡¶®',
                medium: '‡¶Æ‡¶ß‡ßç‡¶Ø‡¶Æ',
                high: '‡¶â‡¶ö‡ßç‡¶ö',
                select_category_placeholder: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                add_new_item: '‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®',
                new: '‡¶®‡¶§‡ßÅ‡¶®',
                loan: '‡¶ã‡¶£',
                mortgage: '‡¶¨‡¶®‡ßç‡¶ß‡¶ï‡ßÄ',
                personal_loan: '‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶ã‡¶£',
                savings: '‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º',
                bank: '‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï',
                save: '‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£',
                update: '‡¶Ü‡¶™‡¶°‡ßá‡¶ü',
                cancel: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤',
                add: '‡¶Ø‡ßã‡¶ó',
                save_item: '‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£',
                update_item: '‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü',
                add_income: '‡¶Ü‡¶Ø‡¶º ‡¶Ø‡ßã‡¶ó',
                edit_income: '‡¶Ü‡¶Ø‡¶º ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                add_expense: '‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶Ø‡ßã‡¶ó',
                edit_expense: '‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                add_receivable: '‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó',
                edit_receivable: '‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                add_payable: '‡¶¶‡ßá‡¶Ø‡¶º ‡¶Ø‡ßã‡¶ó',
                edit_payable: '‡¶¶‡ßá‡¶Ø‡¶º ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                add_plan: '‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ ‡¶Ø‡ßã‡¶ó',
                edit_plan: '‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                add_budget: '‡¶¨‡¶æ‡¶ú‡ßá‡¶ü ‡¶Ø‡ßã‡¶ó',
                edit_budget: '‡¶¨‡¶æ‡¶ú‡ßá‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                create_template: '‡¶ü‡ßá‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ü ‡¶§‡ßà‡¶∞‡¶ø',
                edit_template: '‡¶ü‡ßá‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                add_account: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó',
                update_account: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü',
                add_debt: '‡¶ã‡¶£ ‡¶Ø‡ßã‡¶ó',
                update_debt: '‡¶ã‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü',
                add_goal: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó',
                update_goal: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü',
                period: '‡¶∏‡¶Æ‡¶Ø‡¶º‡¶ï‡¶æ‡¶≤',
                daily: '‡¶¶‡ßà‡¶®‡¶ø‡¶ï',
                weekly: '‡¶∏‡¶æ‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶ø‡¶ï',
                monthly: '‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï',
                per_3_month: '‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß© ‡¶Æ‡¶æ‡¶∏',
                per_6_month: '‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß¨ ‡¶Æ‡¶æ‡¶∏',
                yearly: '‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï',
                active: '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º',
                paused: '‡¶¨‡¶ø‡¶∞‡¶§‡¶ø',
                completed: '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®',
                in_progress: '‡¶ö‡¶≤‡¶Æ‡¶æ‡¶®',
                cancelled: '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤',
                budget_tracks_info: '‡¶¨‡¶æ‡¶ú‡ßá‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶ï‡¶æ‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶á ‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶™‡¶∞‡ßÄ‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶ï‡ßÉ‡¶§ ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßá‡•§',
                notes_optional: '‡¶®‡ßã‡¶ü (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)',
                recurring_transaction: '‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®',
                frequency: '‡¶´‡ßç‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏‡¶ø',
                next_occurrence_date: '‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                payment_method: '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø',
                select_method: '‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                cash: '‡¶®‡¶ó‡¶¶',
                bank_transfer: '‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞',
                card: '‡¶ï‡¶æ‡¶∞‡ßç‡¶°',
                mobile_payment: '‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü',
                other: '‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø',
                select_category: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                from_client: '‡¶•‡ßá‡¶ï‡ßá (‡¶ï‡ßç‡¶≤‡¶æ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü/‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø)',
                to_vendor: '‡¶™‡ßç‡¶∞‡¶§‡¶ø (‡¶≠‡ßá‡¶®‡ßç‡¶°‡¶∞/‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø)',
                name_placeholder: '‡¶®‡¶æ‡¶Æ',
                reason: '‡¶ï‡¶æ‡¶∞‡¶£',
                reminder_days_before: '‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ (‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶ï‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá)',
                reminder_days_before_deadline: '‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ (‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá)',
                plan_title: '‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ',
                target_amount: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£',
                start_date: '‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                target_deadline: '‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ',
                notes: '‡¶®‡ßã‡¶ü',
                additional_notes: '‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶®‡ßã‡¶ü...',
                optional_description: '‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£',
                progress_note: '‡¶¶‡ßç‡¶∞‡¶∑‡ßç‡¶ü‡¶¨‡ßç‡¶Ø: ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø ‡¶Æ‡ßã‡¶ü ‡¶∏‡¶û‡ßç‡¶ö‡¶Ø‡¶º‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá (‡¶Ü‡¶Ø‡¶º - ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º + ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡ßç‡¶Ø)',
                reminder_help_text: '‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶è‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶æ‡¶® (0 = ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá)',
                reminder_deadline_help: '‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶∞ ‡¶è‡¶§‡¶¶‡¶ø‡¶® ‡¶Ü‡¶ó‡ßá ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶æ‡¶® (0 = ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶Ø‡¶º)',
                type_cannot_change: '‡¶∏‡ßÉ‡¶∑‡ßç‡¶ü‡¶ø‡¶∞ ‡¶™‡¶∞‡ßá ‡¶ß‡¶∞‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ',
                account: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü',
                select_account: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                initial_balance: '‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏',
                transfers: '‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞',
                transfer: '‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞',
                add_transfer: '‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó',
                account_transfers: '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞',
                from_account: '‡¶•‡ßá‡¶ï‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü',
                to_account: '‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü',
                transfer_description_placeholder: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶®‡¶ó‡¶¶ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®, ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞',
                print: '‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü',
                no_accounts_found: '‡¶ï‡ßã‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                no_accounts_added: '‡¶ï‡ßã‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶â‡ßé‡¶∏ ‡¶ú‡ßÅ‡¶°‡¶º‡ßá ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                no_transfers_recorded: '‡¶ï‡ßã‡¶® ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ö‡¶∞‡ßç‡¶• ‡¶ö‡¶≤‡¶æ‡¶ö‡¶≤ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                no_debts_tracked: '‡¶ï‡ßã‡¶® ‡¶ã‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ã‡¶£ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                family_members: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø',
                family_member: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø',
                add_family_member: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó',
                edit_family_member: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                delete_family_member: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®',
                family_member_name: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ',
                select_family_member: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                select_family_members: '‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                divide_equally: '‡¶∏‡¶Æ‡¶æ‡¶®‡¶≠‡¶æ‡¶¨‡ßá ‡¶≠‡¶æ‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®',
                expense_per_person: '‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø',
                no_family_members: '‡¶ï‡ßã‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶≠‡¶æ‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶¨‡ßç‡¶Ø‡¶Ø‡¶º ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                are_you_sure_delete_family_member: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                settings_preferences: '‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶õ‡¶®‡ßç‡¶¶‡¶∏‡¶Æ‡ßÇ‡¶π',
                general_settings: '‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏',
                currency_symbol: '‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï',
                currency_symbol_description: '‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞‡¶æ ‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï',
                date_format: '‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü',
                date_format_description: '‡¶™‡¶õ‡¶®‡ßç‡¶¶‡¶∏‡¶á ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶® ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü',
                auto_save: '‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£',
                auto_save_description: '‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®',
                enable: '‡¶∏‡¶ï‡ßç‡¶∑‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®',
                data_management: '‡¶°‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ',
                export_data: '‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü',
                export_data_description: '‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®',
                export_to_excel: '‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤‡ßá ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü',
                export_to_csv: 'CSV ‡¶§‡ßá ‡¶è‡¶ï‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü',
                import_data: '‡¶°‡ßá‡¶ü‡¶æ ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü',
                import_data_description: '‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶°‡ßá‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú ‡¶π‡¶¨‡ßá)',
                import_from_excel: '‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü',
                backup_data: '‡¶°‡ßá‡¶ü‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™',
                backup_data_description: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶°‡ßá‡¶ü‡¶æ‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                create_backup: '‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                restore_data: '‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞',
                restore_data_description: '‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®',
                restore_backup: '‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞',
                undo_last_action: '‡¶∂‡ßá‡¶∑ ‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶´‡ßá‡¶∞‡¶æ‡¶®',
                undo_last_action_description: '‡¶∂‡ßá‡¶∑ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶´‡ßá‡¶∞‡¶æ‡¶® (‡¶Ø‡ßã‡¶ó/‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ/‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®)',
                undo: '‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶´‡ßá‡¶∞‡¶æ‡¶®',
                keyboard_shortcuts: '‡¶ï‡ßÄ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶∂‡¶∞‡ßç‡¶ü‡¶ï‡¶æ‡¶ü',
                navigation: '‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶®',
                show_shortcuts: '‡¶∂‡¶∞‡ßç‡¶ü‡¶ï‡¶æ‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®',
                quick_access: '‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏',
                overview: '‡¶ì‡¶≠‡¶æ‡¶∞‡¶≠‡¶ø‡¶â',
                person: '‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø',
                people: '‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑',
                net_contribution: '‡¶®‡ßá‡¶ü ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®',
                contributor: '‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ',
                owed: '‡¶ã‡¶£‡ßÄ',
                net_contributor: '‡¶®‡ßá‡¶ü ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ',
                net_owed: '‡¶®‡ßá‡¶ü ‡¶ã‡¶£‡ßÄ',
                member_information: '‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø',
                all_status: '‡¶∏‡¶¨ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ',
                color: '‡¶∞‡¶Ç',
                manage_categories: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®',
                recurring_transactions_manager: '‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶æ‡¶∞',
                auto_generate_info: '‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                auto_generate_desc: '‡¶è‡¶ü‡¶ø ‡¶´‡ßç‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶¨‡ßá‡•§',
                generate_recurring: '‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶¨‡ßÉ‡¶§‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®',
                select_category_placeholder: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®',
                add_new_item: '‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®',
                new: '‡¶®‡¶§‡ßÅ‡¶®',
                is_required: '‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®!',
                must_be_greater_than_zero: '0 ‡¶è‡¶∞ ‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá!',
                category_already_exists: '‡¶è‡¶á ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®!',
                category_name_required: '‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®!',
                are_you_sure_disconnect: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®? ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∏‡¶Ç‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§',
                failed_to_save: '‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                are_you_sure_delete: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®',
                action_cannot_undo: '‡¶è‡¶á ‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ü‡¶ø ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶´‡ßá‡¶∞‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§',
                are_you_sure_delete_template: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶ü‡ßá‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                are_you_sure_delete_account: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®? ‡¶è‡¶ü‡¶ø ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶¨‡ßá ‡¶®‡¶æ‡•§',
                are_you_sure_delete_debt: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶ã‡¶£‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                are_you_sure_delete_goal: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                are_you_sure_delete_investment: '‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?',
                category_used_in_transactions: '‡¶è‡¶á ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá',
                deleting_will_set_to_other: '‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶≤‡ßá ‡¶∏‡ßá‡¶á ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡¶ó‡ßÅ‡¶≤‡¶ø "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø" ‡¶è ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§ ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡¶®?',
                cash_flow_analysis: '‡¶®‡¶ó‡¶¶ ‡¶™‡ßç‡¶∞‡¶¨‡¶æ‡¶π ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£',
                investment_portfolio: '‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶´‡ßã‡¶≤‡¶ø‡¶ì',
                add_investment: '‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó ‡¶Ø‡ßã‡¶ó',
                edit_investment: '‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ',
                all_methods: '‡¶∏‡¶¨ ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø',
                placeholder_salary_freelance: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡ßá‡¶§‡¶®, ‡¶´‡ßç‡¶∞‡¶ø‡¶≤‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏',
                placeholder_groceries: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Æ‡ßÅ‡¶¶‡¶ø‡¶ñ‡¶æ‡¶®‡¶æ',
                placeholder_new_laptop: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶™',
                placeholder_groceries_salary: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Æ‡ßÅ‡¶¶‡¶ø‡¶ñ‡¶æ‡¶®‡¶æ, ‡¶¨‡ßá‡¶§‡¶®',
                placeholder_monthly_salary: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶®',
                placeholder_main_bank: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Æ‡ßÇ‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü',
                placeholder_home_loan: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡¶æ‡¶°‡¶º‡¶ø‡¶∞ ‡¶ã‡¶£',
                placeholder_bank_name: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ',
                placeholder_emergency_fund: '‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶§‡¶π‡¶¨‡¶ø‡¶≤',
                placeholder_apple_inc: '‡¶Ø‡ßá‡¶Æ‡¶®: Apple Inc.',
                placeholder_aapl: '‡¶Ø‡ßá‡¶Æ‡¶®: AAPL',
                total_cost_basis: '‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø',
                total_gain_loss: '‡¶Æ‡ßã‡¶ü ‡¶≤‡¶æ‡¶≠/‡¶ï‡ßç‡¶∑‡¶§‡¶ø',
                total_return: '‡¶Æ‡ßã‡¶ü ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶®',
                placeholder_example_3: '‡¶Ø‡ßá‡¶Æ‡¶®: 3',
                placeholder_example_7: '‡¶Ø‡ßá‡¶Æ‡¶®: 7',
                optional_notes: '‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï ‡¶®‡ßã‡¶ü',
                investment_name: '‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ',
                symbol_ticker: '‡¶™‡ßç‡¶∞‡¶§‡ßÄ‡¶ï/‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞',
                cost_basis: '‡¶ñ‡¶∞‡¶ö ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø',
                current_value: '‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Æ‡¶æ‡¶®',
                purchase_date: '‡¶ï‡ßç‡¶∞‡¶Ø‡¶º‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ',
                stock: '‡¶∏‡ßç‡¶ü‡¶ï',
                bond: '‡¶¨‡¶®‡ßç‡¶°',
                mutual_fund: '‡¶Æ‡¶ø‡¶â‡¶ö‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶´‡¶æ‡¶®‡ßç‡¶°',
                etf: 'ETF',
                cryptocurrency: '‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡ßã‡¶ï‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏‡¶ø',
                update_investment: '‡¶¨‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó ‡¶Ü‡¶™‡¶°‡ßá‡¶ü',
                delete_multiple_items: '‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®',
                delete_all: '‡¶∏‡¶¨ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®',
                confirm: '‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®'
            },
            es: {
                notifications: 'Notificaciones',
                clear_all: 'Limpiar Todo',
                no_notifications: 'Sin notificaciones',
                view: 'Ver',
                edit: 'Editar',
                delete: 'Eliminar',
                dashboard: 'Panel',
                income: 'Ingresos',
                expenses: 'Gastos',
                receivables: 'Por Cobrar',
                payables: 'Por Pagar',
                plans: 'Planes Futuros',
                budgets: 'Presupuestos',
                categories: 'Categor√≠as',
                category: 'Categor√≠a',
                reports: 'Informes',
                analytics: 'An√°lisis',
                templates: 'Plantillas',
                accounts: 'Cuentas',
                debts: 'Deudas',
                goals: 'Objetivos',
                recurring: 'Recurrente',
                calendar: 'Calendario',
                cashflow: 'Flujo de Caja',
                investments: 'Inversiones',
                settings: 'Configuraci√≥n',
                bill_details: 'Detalles de Factura',
                amount: 'Cantidad',
                due_date: 'Fecha de Vencimiento',
                status: 'Estado',
                description: 'Descripci√≥n',
                priority: 'Prioridad',
                type: 'Tipo',
                paid: 'Pagado',
                unpaid: 'No Pagado',
                high: 'Alto',
                medium: 'Medio',
                low: 'Bajo',
                today: 'Hoy',
                tomorrow: 'Ma√±ana',
                days: 'd√≠as',
                close: 'Cerrar',
                refresh: 'Actualizar',
                export: 'Exportar',
                disconnect: 'Desconectar',
                dark_mode: 'Modo Oscuro',
                income_sources: 'Fuentes de Ingresos',
                date: 'Fecha',
                source: 'Fuente',
                actions: 'Acciones',
                details: 'Detalles',
                from: 'De',
                to: 'A',
                no_upcoming_bills: 'No hay facturas pr√≥ximas en los pr√≥ximos 7 d√≠as.',
                positive_monthly_savings: 'Ahorros mensuales positivos',
                negative_monthly_savings: 'Ahorros mensuales negativos',
                income_comma_expenses: 'ingresos',
                expenses_word: 'gastos',
                item: 'elemento',
                items: 'elementos',
                showing: 'Mostrando',
                of: 'de',
                all_categories: 'Todas las Categor√≠as',
                all_family_members: 'Todos los Miembros de la Familia',
                no_data_found: 'No se encontraron datos.',
                no_future_plans: 'No se encontraron planes futuros.',
                no_budgets_set: 'No se han establecido presupuestos. Agregue un presupuesto para rastrear los l√≠mites de gasto.',
                excellent_health: '¬°Excelente - Gran salud financiera!',
                good_health: 'Bueno - En el camino correcto',
                fair_health: 'Regular - Hay margen de mejora',
                needs_attention: 'Necesita Atenci√≥n - Revise los h√°bitos de gasto',
                search: 'Buscar...',
                from_date: 'Fecha Desde',
                to_date: 'Fecha Hasta',
                sort_by: 'Ordenar por...',
                total_income: 'Ingresos Totales',
                total_expenses: 'Gastos Totales',
                net_balance: 'Balance Neto',
                this_month_income: 'Ingresos del Mes',
                this_month_expenses: 'Gastos del Mes',
                this_month_balance: 'Balance del Mes',
                total_savings: 'Ahorros Totales',
                due_receivables: 'Por Cobrar',
                due_payables: 'Por Pagar',
                loading_reminders: 'Cargando recordatorios...',
                no_items: 'Sin elementos',
                saved_successfully: '¬°Guardado exitosamente!',
                connected_to: 'Conectado a',
                disconnected: 'Desconectado',
                please_connect: 'Por favor conecte el archivo Excel.',
                upcoming_bills: 'Pr√≥ximas Facturas y Recordatorios',
                monthly_comparison: 'Comparaci√≥n Mensual',
                financial_health_score: 'Puntuaci√≥n de Salud Financiera',
                savings_rate: 'Tasa de Ahorro',
                expense_ratio: 'Relaci√≥n de Gastos',
                average_monthly_expense: 'Gasto Mensual Promedio',
                average_monthly_income: 'Ingreso Mensual Promedio',
                top_spending_category: 'Categor√≠a de Mayor Gasto',
                average_transaction_size: 'Tama√±o Promedio de Transacci√≥n',
                monthly_savings: 'Ahorros Mensuales',
                transaction_count: 'Cantidad de Transacciones',
                income_vs_expenses_trend: 'Tendencia de Ingresos vs Gastos',
                cash_flow: 'Flujo de Caja',
                expense_categories: 'Categor√≠as de Gastos',
                income_categories: 'Categor√≠as de Ingresos',
                all_transactions: 'Todas las transacciones',
                not_enough_data: 'No hay suficientes datos para comparar. Se necesitan al menos 2 meses de datos.',
                no_upcoming_bills: 'No hay facturas pr√≥ximas en los pr√≥ximos 7 d√≠as.',
                positive_monthly_savings: 'Ahorros mensuales positivos',
                negative_monthly_savings: 'Ahorros mensuales negativos',
                income_comma_expenses: 'ingresos',
                expenses_word: 'gastos',
                item: 'elemento',
                items: 'elementos',
                showing: 'Mostrando',
                of: 'de',
                all_categories: 'Todas las Categor√≠as',
                all_family_members: 'Todos los Miembros de la Familia',
                no_data_found: 'No se encontraron datos.',
                no_future_plans: 'No se encontraron planes futuros.',
                no_budgets_set: 'No se han establecido presupuestos. Agregue un presupuesto para rastrear los l√≠mites de gasto.',
                excellent_health: '¬°Excelente - Gran salud financiera!',
                good_health: 'Bueno - En el camino correcto',
                fair_health: 'Regular - Hay margen de mejora',
                needs_attention: 'Necesita Atenci√≥n - Revise los h√°bitos de gasto',
                save: 'Guardar',
                update: 'Actualizar',
                cancel: 'Cancelar',
                add: 'Agregar',
                save_item: 'Guardar Elemento',
                update_item: 'Actualizar Elemento',
                add_income: 'Agregar Ingreso',
                edit_income: 'Editar Ingreso',
                add_expense: 'Agregar Gasto',
                edit_expense: 'Editar Gasto',
                add_receivable: 'Agregar Por Cobrar',
                edit_receivable: 'Editar Por Cobrar',
                add_payable: 'Agregar Por Pagar',
                edit_payable: 'Editar Por Pagar',
                add_plan: 'Agregar Plan',
                edit_plan: 'Editar Plan',
                add_budget: 'Agregar Presupuesto',
                edit_budget: 'Editar Presupuesto',
                create_template: 'Crear Plantilla',
                edit_template: 'Editar Plantilla',
                add_account: 'Agregar Cuenta',
                update_account: 'Actualizar Cuenta',
                add_debt: 'Agregar Deuda',
                update_debt: 'Actualizar Deuda',
                add_goal: 'Agregar Objetivo',
                update_goal: 'Actualizar Objetivo',
                period: 'Per√≠odo',
                daily: 'Diario',
                weekly: 'Semanal',
                monthly: 'Mensual',
                per_3_month: 'Cada 3 Meses',
                per_6_month: 'Cada 6 Meses',
                yearly: 'Anual',
                active: 'Activo',
                paused: 'Pausado',
                completed: 'Completado',
                in_progress: 'En Progreso',
                cancelled: 'Cancelado',
                budget_tracks_info: 'El presupuesto rastrea el gasto real contra este l√≠mite para la categor√≠a seleccionada dentro del per√≠odo seleccionado.',
                notes_optional: 'Notas (Opcional)',
                recurring_transaction: 'Transacci√≥n Recurrente',
                frequency: 'Frecuencia',
                next_occurrence_date: 'Fecha de Pr√≥xima Ocurrencia',
                payment_method: 'M√©todo de Pago',
                select_method: 'Seleccionar M√©todo',
                cash: 'Efectivo',
                bank_transfer: 'Transferencia Bancaria',
                card: 'Tarjeta',
                mobile_payment: 'Pago M√≥vil',
                other: 'Otro',
                select_category: 'Seleccionar Categor√≠a',
                from_client: 'De (Cliente/Persona)',
                to_vendor: 'A (Proveedor/Persona)',
                name_placeholder: 'Nombre',
                reason: 'Raz√≥n',
                reminder_days_before: 'Recordatorio (D√≠as Antes del Vencimiento)',
                reminder_days_before_deadline: 'Recordatorio (D√≠as Antes de la Fecha L√≠mite)',
                plan_title: 'T√≠tulo del Plan',
                target_amount: 'Monto Objetivo',
                start_date: 'Fecha de Inicio',
                target_deadline: 'Fecha L√≠mite Objetivo',
                notes: 'Notas',
                additional_notes: 'Notas adicionales...',
                optional_description: 'Descripci√≥n opcional',
                progress_note: 'Nota: El progreso se calcular√° basado en el Ahorro Total (Ingresos - Gastos + Por Cobrar).',
                reminder_help_text: 'Recibir recordatorio esta cantidad de d√≠as antes de la fecha de vencimiento (0 = en la fecha de vencimiento)',
                reminder_deadline_help: 'Recibir recordatorio esta cantidad de d√≠as antes de la fecha l√≠mite (0 = en la fecha l√≠mite)',
                type_cannot_change: 'El tipo no puede cambiarse despu√©s de la creaci√≥n',
                account_management: 'Gesti√≥n de Cuentas',
                debt_tracker: 'Seguimiento de Deudas',
                financial_goals: 'Objetivos Financieros',
                account: 'Cuenta',
                account_name: 'Nombre de la Cuenta',
                account_type: 'Tipo de Cuenta',
                select_account: 'Seleccionar Cuenta',
                initial_balance: 'Saldo Inicial',
                transfers: 'Transferencias',
                transfer: 'Transferencia',
                add_transfer: 'Agregar Transferencia',
                account_transfers: 'Transferencias de Cuenta',
                from_account: 'Desde Cuenta',
                to_account: 'A Cuenta',
                transfer_description_placeholder: 'ej. Retiro de efectivo, Transferencia de cuenta',
                debt_name: 'Nombre de la Deuda',
                debt_type: 'Tipo de Deuda',
                principal_amount: 'Monto Principal',
                amount_paid: 'Monto Pagado',
                creditor_lender: 'Acreedor/Prestamista',
                goal_name: 'Nombre del Objetivo',
                current_amount: 'Monto Actual',
                deadline: 'Fecha L√≠mite',
                template_name: 'Nombre de la Plantilla',
                transaction_type: 'Tipo de Transacci√≥n',
                recurring_only: 'Solo Recurrentes',
                non_recurring: 'No Recurrentes',
                clear_filters: 'Limpiar Filtros',
                all_types: 'Todos los Tipos',
                all_accounts: 'Todas las Cuentas',
                print: 'Imprimir',
                no_accounts_found: 'No se encontraron cuentas. Por favor agregue una cuenta primero.',
                no_accounts_added: 'No se agregaron cuentas. Agregue una cuenta para rastrear saldos en diferentes fuentes.',
                no_transfers_recorded: 'No se registraron transferencias. Agregue una transferencia para rastrear el movimiento de dinero entre cuentas.',
                no_debts_tracked: 'No se rastrean deudas. Agregue una deuda para comenzar el seguimiento.',
                family_members: 'Miembros de la Familia',
                family_member: 'Miembro de la Familia',
                add_family_member: 'Agregar Miembro de la Familia',
                edit_family_member: 'Editar Miembro de la Familia',
                delete_family_member: 'Eliminar Miembro de la Familia',
                family_member_name: 'Nombre del Miembro de la Familia',
                select_family_member: 'Seleccionar Miembro de la Familia',
                select_family_members: 'Seleccionar Miembros de la Familia',
                divide_equally: 'Dividir Equitativamente',
                expense_per_person: 'Por Persona',
                no_family_members: 'No se agregaron miembros de la familia. Agregue un miembro de la familia para rastrear gastos compartidos.',
                are_you_sure_delete_family_member: '¬øEst√° seguro de que desea eliminar este miembro de la familia?',
                settings_preferences: 'Configuraci√≥n y Preferencias',
                general_settings: 'Configuraci√≥n General',
                currency_symbol: 'S√≠mbolo de Moneda',
                currency_symbol_description: 'S√≠mbolo de moneda predeterminado para todos los montos',
                date_format: 'Formato de Fecha',
                date_format_description: 'Formato de visualizaci√≥n de fecha preferido',
                auto_save: 'Guardado Autom√°tico',
                auto_save_description: 'Guardar autom√°ticamente los cambios en el archivo Excel',
                enable: 'Habilitar',
                data_management: 'Gesti√≥n de Datos',
                export_data: 'Exportar Datos',
                export_data_description: 'Descargar todos los datos como archivo Excel',
                export_to_excel: 'Exportar a Excel',
                export_to_csv: 'Exportar a CSV',
                import_data: 'Importar Datos',
                import_data_description: 'Importar datos desde un archivo Excel (se fusionar√° con los datos existentes)',
                import_from_excel: 'Importar desde Excel',
                backup_data: 'Respaldar Datos',
                backup_data_description: 'Crear una copia de seguridad de todos sus datos',
                create_backup: 'Crear Copia de Seguridad',
                restore_data: 'Restaurar Datos',
                restore_data_description: 'Restaurar datos desde un archivo de copia de seguridad',
                restore_backup: 'Restaurar Copia de Seguridad',
                undo_last_action: 'Deshacer √öltima Acci√≥n',
                undo_last_action_description: 'Deshacer la √∫ltima transacci√≥n (agregar/editar/eliminar)',
                undo: 'Deshacer',
                keyboard_shortcuts: 'Atajos de Teclado',
                navigation: 'Navegaci√≥n',
                show_shortcuts: 'Mostrar Atajos',
                quick_access: 'Acceso R√°pido',
                overview: 'Resumen',
                person: 'Persona',
                people: 'Personas',
                net_contribution: 'Contribuci√≥n Neta',
                contributor: 'Contribuidor',
                owed: 'Debe',
                net_contributor: 'Contribuidor Neto',
                net_owed: 'Debe Neto',
                member_information: 'Informaci√≥n del Miembro',
                all_status: 'Todos los Estados',
                color: 'Color',
                manage_categories: 'Gestionar Categor√≠as',
                recurring_transactions_manager: 'Gestor de Transacciones Recurrentes',
                auto_generate_info: 'Generar Autom√°ticamente Transacciones Recurrentes',
                auto_generate_desc: 'Esto crear√° autom√°ticamente transacciones para todos los elementos recurrentes basados en su frecuencia y fechas.',
                generate_recurring: 'Generar Transacciones Recurrentes',
                select_category_placeholder: 'Seleccionar Categor√≠a',
                add_new_item: 'Agregar Nuevo Elemento',
                new: 'Nuevo',
                loan: 'Pr√©stamo',
                mortgage: 'Hipoteca',
                personal_loan: 'Pr√©stamo Personal',
                savings: 'Ahorros',
                bank: 'Banco',
                is_required: 'es requerido!',
                must_be_greater_than_zero: 'debe ser mayor que 0!',
                category_already_exists: '¬°Esta categor√≠a ya existe!',
                category_name_required: '¬°El nombre de la categor√≠a es requerido!',
                are_you_sure_disconnect: '¬øEst√° seguro de que desea desconectarse del archivo Excel? Necesitar√° volver a conectarse para guardar cambios.',
                failed_to_save: 'Error al guardar en el archivo Excel. Verifique los permisos.',
                are_you_sure_delete: '¬øEst√° seguro de que desea eliminar',
                action_cannot_undo: 'Esta acci√≥n no se puede deshacer.',
                are_you_sure_delete_template: '¬øEst√° seguro de que desea eliminar esta plantilla?',
                are_you_sure_delete_account: '¬øEst√° seguro de que desea eliminar esta cuenta? Esto no eliminar√° las transacciones asociadas.',
                are_you_sure_delete_debt: '¬øEst√° seguro de que desea eliminar esta deuda?',
                are_you_sure_delete_goal: '¬øEst√° seguro de que desea eliminar este objetivo?',
                are_you_sure_delete_investment: '¬øEst√° seguro de que desea eliminar esta inversi√≥n?',
                category_used_in_transactions: 'Esta categor√≠a se usa en',
                deleting_will_set_to_other: 'transacci√≥n(es). Eliminarla establecer√° esas transacciones a "Otro". ¬øContinuar?',
                cash_flow_analysis: 'An√°lisis de Flujo de Caja',
                investment_portfolio: 'Portafolio de Inversiones',
                add_investment: 'Agregar Inversi√≥n',
                edit_investment: 'Editar Inversi√≥n',
                all_methods: 'Todos los M√©todos',
                placeholder_salary_freelance: 'ej. Salario, Freelance',
                placeholder_groceries: 'ej. Comestibles',
                placeholder_new_laptop: 'ej. Nueva Laptop',
                placeholder_groceries_salary: 'ej. Comestibles, Salario',
                placeholder_monthly_salary: 'ej. Salario Mensual',
                placeholder_main_bank: 'ej. Cuenta Bancaria Principal',
                placeholder_home_loan: 'ej. Pr√©stamo Hipotecario',
                placeholder_bank_name: 'ej. Nombre del Banco',
                placeholder_emergency_fund: 'ej. Fondo de Emergencia',
                placeholder_apple_inc: 'ej. Apple Inc.',
                placeholder_aapl: 'ej. AAPL',
                total_cost_basis: 'Base de Costo Total',
                total_gain_loss: 'Ganancia/P√©rdida Total',
                total_return: 'Retorno Total',
                placeholder_example_3: 'ej. 3',
                placeholder_example_7: 'ej. 7',
                optional_notes: 'Notas opcionales',
                investment_name: 'Nombre de la Inversi√≥n',
                symbol_ticker: 'S√≠mbolo/Ticker',
                cost_basis: 'Base de Costo',
                current_value: 'Valor Actual',
                purchase_date: 'Fecha de Compra',
                stock: 'Acci√≥n',
                bond: 'Bono',
                mutual_fund: 'Fondo Mutuo',
                etf: 'ETF',
                cryptocurrency: 'Criptomoneda',
                update_investment: 'Actualizar Inversi√≥n',
                delete_multiple_items: 'Eliminar M√∫ltiples Elementos',
                delete_all: 'Eliminar Todo',
                confirm: 'Confirmar'
            },
            fr: {
                notifications: 'Notifications',
                clear_all: 'Tout Effacer',
                no_notifications: 'Aucune notification',
                view: 'Voir',
                edit: 'Modifier',
                delete: 'Supprimer',
                dashboard: 'Tableau de Bord',
                income: 'Revenus',
                expenses: 'D√©penses',
                receivables: '√Ä Recevoir',
                payables: '√Ä Payer',
                plans: 'Plans Futurs',
                budgets: 'Budgets',
                categories: 'Cat√©gories',
                category: 'Cat√©gorie',
                reports: 'Rapports',
                analytics: 'Analyses',
                templates: 'Mod√®les',
                accounts: 'Comptes',
                debts: 'Dettes',
                goals: 'Objectifs',
                recurring: 'R√©current',
                calendar: 'Calendrier',
                cashflow: 'Flux de Tr√©sorerie',
                investments: 'Investissements',
                settings: 'Param√®tres',
                bill_details: 'D√©tails de la Facture',
                amount: 'Montant',
                due_date: 'Date d\'√âch√©ance',
                status: 'Statut',
                description: 'Description',
                priority: 'Priorit√©',
                type: 'Type',
                paid: 'Pay√©',
                unpaid: 'Non Pay√©',
                high: '√âlev√©',
                medium: 'Moyen',
                low: 'Faible',
                today: 'Aujourd\'hui',
                tomorrow: 'Demain',
                days: 'jours',
                close: 'Fermer',
                refresh: 'Actualiser',
                export: 'Exporter',
                disconnect: 'D√©connecter',
                dark_mode: 'Mode Sombre',
                income_sources: 'Sources de Revenus',
                date: 'Date',
                source: 'Source',
                actions: 'Actions',
                details: 'D√©tails',
                from: 'De',
                to: '√Ä',
                search: 'Rechercher...',
                from_date: 'Date de d√©but',
                to_date: 'Date de fin',
                sort_by: 'Trier par...',
                total_income: 'Revenus Totaux',
                total_expenses: 'D√©penses Totales',
                net_balance: 'Solde Net',
                this_month_income: 'Revenus du Mois',
                this_month_expenses: 'D√©penses du Mois',
                this_month_balance: 'Solde du Mois',
                total_savings: '√âpargne Totale',
                due_receivables: '√Ä Recevoir',
                due_payables: '√Ä Payer',
                loading_reminders: 'Chargement des rappels...',
                no_items: 'Aucun √©l√©ment',
                saved_successfully: 'Enregistr√© avec succ√®s!',
                connected_to: 'Connect√© √†',
                disconnected: 'D√©connect√©',
                please_connect: 'Veuillez connecter le fichier Excel.',
                upcoming_bills: 'Factures et Rappels √† Venir',
                monthly_comparison: 'Comparaison Mensuelle',
                financial_health_score: 'Score de Sant√© Financi√®re',
                savings_rate: 'Taux d\'√âpargne',
                expense_ratio: 'Ratio de D√©penses',
                average_monthly_expense: 'D√©pense Mensuelle Moyenne',
                average_monthly_income: 'Revenu Mensuel Moyen',
                top_spending_category: 'Cat√©gorie de D√©pense Principale',
                average_transaction_size: 'Taille Moyenne de Transaction',
                monthly_savings: '√âpargne Mensuelle',
                transaction_count: 'Nombre de Transactions',
                income_vs_expenses_trend: 'Tendance Revenus vs D√©penses',
                cash_flow: 'Flux de Tr√©sorerie',
                expense_categories: 'Cat√©gories de D√©penses',
                income_categories: 'Cat√©gories de Revenus',
                all_transactions: 'Toutes les transactions',
                not_enough_data: 'Pas assez de donn√©es pour comparer. Au moins 2 mois de donn√©es sont n√©cessaires.',
                no_upcoming_bills: 'Aucune facture √† venir dans les 7 prochains jours.',
                positive_monthly_savings: '√âpargne mensuelle positive',
                negative_monthly_savings: '√âpargne mensuelle n√©gative',
                income_comma_expenses: 'revenus',
                expenses_word: 'd√©penses',
                item: '√©l√©ment',
                items: '√©l√©ments',
                showing: 'Affichage',
                of: 'de',
                all_categories: 'Toutes les Cat√©gories',
                all_family_members: 'Tous les Membres de la Famille',
                no_data_found: 'Aucune donn√©e trouv√©e.',
                no_future_plans: 'Aucun plan futur trouv√©.',
                no_budgets_set: 'Aucun budget d√©fini. Ajoutez un budget pour suivre les limites de d√©penses.',
                excellent_health: 'Excellent - Excellente sant√© financi√®re!',
                good_health: 'Bien - Sur la bonne voie',
                fair_health: 'Moyen - Marge d\'am√©lioration',
                needs_attention: 'N√©cessite de l\'Attention - Examinez les habitudes de d√©penses',
                save: 'Enregistrer',
                update: 'Mettre √† jour',
                cancel: 'Annuler',
                add: 'Ajouter',
                save_item: 'Enregistrer l\'√âl√©ment',
                update_item: 'Mettre √† jour l\'√âl√©ment',
                add_income: 'Ajouter un Revenu',
                edit_income: 'Modifier le Revenu',
                add_expense: 'Ajouter une D√©pense',
                edit_expense: 'Modifier la D√©pense',
                add_receivable: 'Ajouter √† Recevoir',
                edit_receivable: 'Modifier √† Recevoir',
                add_payable: 'Ajouter √† Payer',
                edit_payable: 'Modifier √† Payer',
                add_plan: 'Ajouter un Plan',
                edit_plan: 'Modifier le Plan',
                add_budget: 'Ajouter un Budget',
                edit_budget: 'Modifier le Budget',
                create_template: 'Cr√©er un Mod√®le',
                edit_template: 'Modifier le Mod√®le',
                add_account: 'Ajouter un Compte',
                update_account: 'Mettre √† jour le Compte',
                add_debt: 'Ajouter une Dette',
                update_debt: 'Mettre √† jour la Dette',
                add_goal: 'Ajouter un Objectif',
                update_goal: 'Mettre √† jour l\'Objectif',
                period: 'P√©riode',
                daily: 'Quotidien',
                weekly: 'Hebdomadaire',
                monthly: 'Mensuel',
                per_3_month: 'Tous les 3 Mois',
                per_6_month: 'Tous les 6 Mois',
                yearly: 'Annuel',
                active: 'Actif',
                paused: 'En Pause',
                completed: 'Termin√©',
                in_progress: 'En Cours',
                cancelled: 'Annul√©',
                budget_tracks_info: 'Le budget suit les d√©penses r√©elles par rapport √† cette limite pour la cat√©gorie s√©lectionn√©e dans la p√©riode s√©lectionn√©e.',
                source: 'Source',
                notes_optional: 'Notes (Optionnel)',
                recurring_transaction: 'Transaction R√©currente',
                frequency: 'Fr√©quence',
                next_occurrence_date: 'Date de Prochaine Occurrence',
                payment_method: 'M√©thode de Paiement',
                select_method: 'S√©lectionner la M√©thode',
                cash: 'Esp√®ces',
                bank_transfer: 'Virement Bancaire',
                card: 'Carte',
                mobile_payment: 'Paiement Mobile',
                other: 'Autre',
                select_category: 'S√©lectionner la Cat√©gorie',
                from_client: 'De (Client/Personne)',
                to_vendor: '√Ä (Fournisseur/Personne)',
                name_placeholder: 'Nom',
                reason: 'Raison',
                reminder_days_before: 'Rappel (Jours Avant l\'√âch√©ance)',
                reminder_days_before_deadline: 'Rappel (Jours Avant la Date Limite)',
                plan_title: 'Titre du Plan',
                target_amount: 'Montant Cible',
                start_date: 'Date de D√©but',
                target_deadline: 'Date Limite Cible',
                notes: 'Notes',
                additional_notes: 'Notes suppl√©mentaires...',
                optional_description: 'Description optionnelle',
                progress_note: 'Note: Le progr√®s sera calcul√© bas√© sur l\'√âpargne Totale (Revenus - D√©penses + √Ä Recevoir).',
                reminder_help_text: 'Recevoir un rappel ce nombre de jours avant la date d\'√©ch√©ance (0 = √† la date d\'√©ch√©ance)',
                reminder_deadline_help: 'Recevoir un rappel ce nombre de jours avant la date limite (0 = √† la date limite)',
                type_cannot_change: 'Le type ne peut pas √™tre modifi√© apr√®s la cr√©ation',
                account_management: 'Gestion des Comptes',
                debt_tracker: 'Suivi des Dettes',
                financial_goals: 'Objectifs Financiers',
                account_name: 'Nom du Compte',
                account_type: 'Type de Compte',
                initial_balance: 'Solde Initial',
                debt_name: 'Nom de la Dette',
                debt_type: 'Type de Dette',
                principal_amount: 'Montant Principal',
                amount_paid: 'Montant Pay√©',
                creditor_lender: 'Cr√©ancier/Pr√™teur',
                goal_name: 'Nom de l\'Objectif',
                current_amount: 'Montant Actuel',
                deadline: 'Date Limite',
                template_name: 'Nom du Mod√®le',
                transaction_type: 'Type de Transaction',
                recurring_only: 'R√©currentes Uniquement',
                non_recurring: 'Non R√©currentes',
                all_status: 'Tous les Statuts',
                color: 'Couleur',
                manage_categories: 'G√©rer les Cat√©gories',
                recurring_transactions_manager: 'Gestionnaire de Transactions R√©currentes',
                auto_generate_info: 'G√©n√©rer Automatiquement les Transactions R√©currentes',
                auto_generate_desc: 'Cela cr√©era automatiquement des transactions pour tous les √©l√©ments r√©currents bas√©s sur leur fr√©quence et leurs dates.',
                generate_recurring: 'G√©n√©rer les Transactions R√©currentes',
                low: 'Faible',
                medium: 'Moyen',
                high: '√âlev√©',
                select_category_placeholder: 'S√©lectionner la Cat√©gorie',
                add_new_item: 'Ajouter un Nouvel √âl√©ment',
                new: 'Nouveau',
                loan: 'Pr√™t',
                mortgage: 'Hypoth√®que',
                personal_loan: 'Pr√™t Personnel',
                savings: '√âpargne',
                bank: 'Banque',
                is_required: 'est requis!',
                must_be_greater_than_zero: 'doit √™tre sup√©rieur √† 0!',
                category_already_exists: 'Cette cat√©gorie existe d√©j√†!',
                category_name_required: 'Le nom de la cat√©gorie est requis!',
                are_you_sure_disconnect: '√ätes-vous s√ªr de vouloir vous d√©connecter du fichier Excel? Vous devrez vous reconnecter pour enregistrer les modifications.',
                failed_to_save: '√âchec de l\'enregistrement dans le fichier Excel. V√©rifiez les permissions.',
                are_you_sure_delete: '√ätes-vous s√ªr de vouloir supprimer',
                action_cannot_undo: 'Cette action ne peut pas √™tre annul√©e.',
                are_you_sure_delete_template: '√ätes-vous s√ªr de vouloir supprimer ce mod√®le?',
                are_you_sure_delete_account: '√ätes-vous s√ªr de vouloir supprimer ce compte? Cela ne supprimera pas les transactions associ√©es.',
                are_you_sure_delete_debt: '√ätes-vous s√ªr de vouloir supprimer cette dette?',
                are_you_sure_delete_goal: '√ätes-vous s√ªr de vouloir supprimer cet objectif?',
                are_you_sure_delete_investment: '√ätes-vous s√ªr de vouloir supprimer cet investissement?',
                category_used_in_transactions: 'Cette cat√©gorie est utilis√©e dans',
                deleting_will_set_to_other: 'transaction(s). La supprimer d√©finira ces transactions √† "Autre". Continuer?',
                cash_flow_analysis: 'Analyse du Flux de Tr√©sorerie',
                investment_portfolio: 'Portefeuille d\'Investissements',
                add_investment: 'Ajouter un Investissement',
                edit_investment: 'Modifier l\'Investissement',
                all_methods: 'Toutes les M√©thodes',
                placeholder_salary_freelance: 'ex. Salaire, Freelance',
                placeholder_groceries: 'ex. √âpicerie',
                placeholder_new_laptop: 'ex. Nouvel Ordinateur Portable',
                placeholder_groceries_salary: 'ex. √âpicerie, Salaire',
                placeholder_monthly_salary: 'ex. Salaire Mensuel',
                placeholder_main_bank: 'ex. Compte Bancaire Principal',
                placeholder_home_loan: 'ex. Pr√™t Immobilier',
                placeholder_bank_name: 'ex. Nom de la Banque',
                placeholder_emergency_fund: 'ex. Fonds d\'Urgence',
                placeholder_apple_inc: 'ex. Apple Inc.',
                placeholder_aapl: 'ex. AAPL',
                total_cost_basis: 'Base de Co√ªt Totale',
                total_gain_loss: 'Gain/Perte Total',
                total_return: 'Rendement Total',
                placeholder_example_3: 'ex. 3',
                placeholder_example_7: 'ex. 7',
                optional_notes: 'Notes optionnelles',
                investment_name: 'Nom de l\'Investissement',
                symbol_ticker: 'Symbole/Ticker',
                cost_basis: 'Base de Co√ªt',
                current_value: 'Valeur Actuelle',
                purchase_date: 'Date d\'Achat',
                stock: 'Action',
                bond: 'Obligation',
                mutual_fund: 'Fonds Mutuel',
                etf: 'ETF',
                cryptocurrency: 'Cryptomonnaie',
                update_investment: 'Mettre √† jour l\'Investissement',
                delete_multiple_items: 'Supprimer Plusieurs √âl√©ments',
                delete_all: 'Tout Supprimer',
                confirm: 'Confirmer',
                print: 'Imprimer',
                no_accounts_found: 'Aucun compte trouv√©. Veuillez ajouter un compte d\'abord.',
                no_accounts_added: 'Aucun compte ajout√©. Ajoutez un compte pour suivre les soldes dans diff√©rentes sources.',
                no_transfers_recorded: 'Aucun transfert enregistr√©. Ajoutez un transfert pour suivre le mouvement d\'argent entre les comptes.',
                no_debts_tracked: 'Aucune dette suivie. Ajoutez une dette pour commencer le suivi.',
                family_members: 'Membres de la Famille',
                family_member: 'Membre de la Famille',
                add_family_member: 'Ajouter un Membre de la Famille',
                edit_family_member: 'Modifier le Membre de la Famille',
                delete_family_member: 'Supprimer le Membre de la Famille',
                family_member_name: 'Nom du Membre de la Famille',
                select_family_member: 'S√©lectionner un Membre de la Famille',
                select_family_members: 'S√©lectionner les Membres de la Famille',
                divide_equally: 'Diviser √âquitablement',
                expense_per_person: 'Par Personne',
                no_family_members: 'Aucun membre de la famille ajout√©. Ajoutez un membre de la famille pour suivre les d√©penses partag√©es.',
                are_you_sure_delete_family_member: '√ätes-vous s√ªr de vouloir supprimer ce membre de la famille?',
                settings_preferences: 'Param√®tres et Pr√©f√©rences',
                general_settings: 'Param√®tres G√©n√©raux',
                currency_symbol: 'Symbole de la Devise',
                currency_symbol_description: 'Symbole de devise par d√©faut pour tous les montants',
                date_format: 'Format de Date',
                date_format_description: 'Format d\'affichage de date pr√©f√©r√©',
                auto_save: 'Enregistrement Automatique',
                auto_save_description: 'Enregistrer automatiquement les modifications dans le fichier Excel',
                enable: 'Activer',
                data_management: 'Gestion des Donn√©es',
                export_data: 'Exporter les Donn√©es',
                export_data_description: 'T√©l√©charger toutes les donn√©es en tant que fichier Excel',
                export_to_excel: 'Exporter vers Excel',
                export_to_csv: 'Exporter vers CSV',
                import_data: 'Importer les Donn√©es',
                import_data_description: 'Importer des donn√©es depuis un fichier Excel (fusionnera avec les donn√©es existantes)',
                import_from_excel: 'Importer depuis Excel',
                backup_data: 'Sauvegarder les Donn√©es',
                backup_data_description: 'Cr√©er une sauvegarde de toutes vos donn√©es',
                create_backup: 'Cr√©er une Sauvegarde',
                restore_data: 'Restaurer les Donn√©es',
                restore_data_description: 'Restaurer les donn√©es depuis un fichier de sauvegarde',
                restore_backup: 'Restaurer la Sauvegarde',
                undo_last_action: 'Annuler la Derni√®re Action',
                undo_last_action_description: 'Annuler la derni√®re transaction (ajouter/modifier/supprimer)',
                undo: 'Annuler',
                keyboard_shortcuts: 'Raccourcis Clavier',
                navigation: 'Navigation',
                show_shortcuts: 'Afficher les Raccourcis',
                quick_access: 'Acc√®s Rapide',
                overview: 'Aper√ßu',
                person: 'Personne',
                people: 'Personnes',
                net_contribution: 'Contribution Nette',
                contributor: 'Contributeur',
                owed: 'D√ª',
                net_contributor: 'Contributeur Net',
                net_owed: 'D√ª Net',
                member_information: 'Informations du Membre',
                all_status: 'Tous les Statuts',
                color: 'Couleur',
                manage_categories: 'G√©rer les Cat√©gories',
                recurring_transactions_manager: 'Gestionnaire de Transactions R√©currentes',
                auto_generate_info: 'G√©n√©rer Automatiquement les Transactions R√©currentes',
                auto_generate_desc: 'Cela cr√©era automatiquement des transactions pour tous les √©l√©ments r√©currents bas√©s sur leur fr√©quence et leurs dates.',
                generate_recurring: 'G√©n√©rer les Transactions R√©currentes',
                select_category_placeholder: 'S√©lectionner la Cat√©gorie',
                add_new_item: 'Ajouter un Nouvel √âl√©ment',
                new: 'Nouveau',
                loan: 'Pr√™t',
                mortgage: 'Hypoth√®que',
                personal_loan: 'Pr√™t Personnel',
                transfers: 'Transferts',
                transfer: 'Transfert',
                add_transfer: 'Ajouter un Transfert',
                account_transfers: 'Transferts de Compte',
                from_account: 'Du Compte',
                to_account: 'Au Compte',
                transfer_description_placeholder: 'ex. Retrait d\'esp√®ces, Transfert de compte'
            },
            de: {
                notifications: 'Benachrichtigungen',
                clear_all: 'Alle L√∂schen',
                no_notifications: 'Keine Benachrichtigungen',
                view: 'Anzeigen',
                edit: 'Bearbeiten',
                delete: 'L√∂schen',
                dashboard: 'Dashboard',
                income: 'Einkommen',
                expenses: 'Ausgaben',
                receivables: 'Forderungen',
                payables: 'Verbindlichkeiten',
                plans: 'Zukunftspl√§ne',
                budgets: 'Budgets',
                categories: 'Kategorien',
                category: 'Kategorie',
                reports: 'Berichte',
                analytics: 'Analysen',
                templates: 'Vorlagen',
                accounts: 'Konten',
                debts: 'Schulden',
                goals: 'Ziele',
                recurring: 'Wiederkehrend',
                calendar: 'Kalender',
                cashflow: 'Cashflow',
                investments: 'Investitionen',
                settings: 'Einstellungen',
                bill_details: 'Rechnungsdetails',
                amount: 'Betrag',
                due_date: 'F√§lligkeitsdatum',
                status: 'Status',
                description: 'Beschreibung',
                priority: 'Priorit√§t',
                type: 'Typ',
                paid: 'Bezahlt',
                unpaid: 'Unbezahlt',
                high: 'Hoch',
                medium: 'Mittel',
                low: 'Niedrig',
                today: 'Heute',
                tomorrow: 'Morgen',
                days: 'Tage',
                close: 'Schlie√üen',
                refresh: 'Aktualisieren',
                export: 'Exportieren',
                disconnect: 'Trennen',
                dark_mode: 'Dunkler Modus',
                income_sources: 'Einkommensquellen',
                date: 'Datum',
                source: 'Quelle',
                actions: 'Aktionen',
                details: 'Details',
                from: 'Von',
                to: 'An',
                search: 'Suchen...',
                from_date: 'Von Datum',
                to_date: 'Bis Datum',
                sort_by: 'Sortieren nach...',
                total_income: 'Gesamteinkommen',
                total_expenses: 'Gesamtausgaben',
                net_balance: 'Netto-Guthaben',
                this_month_income: 'Einkommen diesen Monat',
                this_month_expenses: 'Ausgaben diesen Monat',
                this_month_balance: 'Guthaben diesen Monat',
                total_savings: 'Gesamtersparnisse',
                due_receivables: 'Offene Forderungen',
                due_payables: 'Offene Verbindlichkeiten',
                loading_reminders: 'Erinnerungen werden geladen...',
                no_items: 'Keine Eintr√§ge',
                saved_successfully: 'Erfolgreich gespeichert!',
                connected_to: 'Verbunden mit',
                disconnected: 'Getrennt',
                please_connect: 'Bitte Excel-Datei verbinden.',
                upcoming_bills: 'Bevorstehende Rechnungen & Erinnerungen',
                monthly_comparison: 'Monatlicher Vergleich',
                financial_health_score: 'Finanzgesundheitswert',
                savings_rate: 'Sparquote',
                expense_ratio: 'Ausgabenverh√§ltnis',
                average_monthly_expense: 'Durchschnittliche Monatsausgaben',
                average_monthly_income: 'Durchschnittliches Monatseinkommen',
                top_spending_category: 'Top Ausgabenkategorie',
                average_transaction_size: 'Durchschnittliche Transaktionsgr√∂√üe',
                monthly_savings: 'Monatliche Ersparnisse',
                transaction_count: 'Anzahl der Transaktionen',
                income_vs_expenses_trend: 'Einnahmen vs Ausgaben Trend',
                cash_flow: 'Cashflow',
                expense_categories: 'Ausgabenkategorien',
                income_categories: 'Einkommenskategorien',
                all_transactions: 'Alle Transaktionen',
                not_enough_data: 'Nicht genug Daten zum Vergleichen. Mindestens 2 Monate Daten erforderlich.',
                no_upcoming_bills: 'Keine bevorstehenden Rechnungen in den n√§chsten 7 Tagen.',
                positive_monthly_savings: 'Positive monatliche Ersparnisse',
                negative_monthly_savings: 'Negative monatliche Ersparnisse',
                income_comma_expenses: 'Einkommen',
                expenses_word: 'Ausgaben',
                item: 'Eintrag',
                items: 'Eintr√§ge',
                showing: 'Zeige',
                of: 'von',
                all_categories: 'Alle Kategorien',
                all_family_members: 'Alle Familienmitglieder',
                no_data_found: 'Keine Daten gefunden.',
                no_future_plans: 'Keine zuk√ºnftigen Pl√§ne gefunden.',
                no_budgets_set: 'Keine Budgets festgelegt. F√ºgen Sie ein Budget hinzu, um Ausgabengrenzen zu verfolgen.',
                excellent_health: 'Ausgezeichnet - Gro√üe finanzielle Gesundheit!',
                good_health: 'Gut - Auf dem richtigen Weg',
                fair_health: 'Ausreichend - Verbesserungspotenzial',
                needs_attention: 'Ben√∂tigt Aufmerksamkeit - √úberpr√ºfen Sie die Ausgabengewohnheiten',
                save: 'Speichern',
                update: 'Aktualisieren',
                cancel: 'Abbrechen',
                add: 'Hinzuf√ºgen',
                save_item: 'Element Speichern',
                update_item: 'Element Aktualisieren',
                add_income: 'Einkommen Hinzuf√ºgen',
                edit_income: 'Einkommen Bearbeiten',
                add_expense: 'Ausgabe Hinzuf√ºgen',
                edit_expense: 'Ausgabe Bearbeiten',
                add_receivable: 'Forderung Hinzuf√ºgen',
                edit_receivable: 'Forderung Bearbeiten',
                add_payable: 'Verbindlichkeit Hinzuf√ºgen',
                edit_payable: 'Verbindlichkeit Bearbeiten',
                add_plan: 'Plan Hinzuf√ºgen',
                edit_plan: 'Plan Bearbeiten',
                add_budget: 'Budget Hinzuf√ºgen',
                edit_budget: 'Budget Bearbeiten',
                create_template: 'Vorlage Erstellen',
                edit_template: 'Vorlage Bearbeiten',
                add_account: 'Konto Hinzuf√ºgen',
                update_account: 'Konto Aktualisieren',
                add_debt: 'Schuld Hinzuf√ºgen',
                update_debt: 'Schuld Aktualisieren',
                add_goal: 'Ziel Hinzuf√ºgen',
                update_goal: 'Ziel Aktualisieren',
                period: 'Zeitraum',
                daily: 'T√§glich',
                weekly: 'W√∂chentlich',
                monthly: 'Monatlich',
                per_3_month: 'Alle 3 Monate',
                per_6_month: 'Alle 6 Monate',
                yearly: 'J√§hrlich',
                active: 'Aktiv',
                paused: 'Pausiert',
                completed: 'Abgeschlossen',
                in_progress: 'In Bearbeitung',
                cancelled: 'Abgebrochen',
                budget_tracks_info: 'Das Budget verfolgt die tats√§chlichen Ausgaben gegen diese Grenze f√ºr die ausgew√§hlte Kategorie innerhalb des ausgew√§hlten Zeitraums.',
                notes_optional: 'Notizen (Optional)',
                recurring_transaction: 'Wiederkehrende Transaktion',
                frequency: 'H√§ufigkeit',
                next_occurrence_date: 'N√§chstes Vorkommen Datum',
                payment_method: 'Zahlungsmethode',
                select_method: 'Methode Ausw√§hlen',
                cash: 'Bargeld',
                bank_transfer: 'Bank√ºberweisung',
                card: 'Karte',
                mobile_payment: 'Mobile Zahlung',
                other: 'Andere',
                select_category: 'Kategorie Ausw√§hlen',
                from_client: 'Von (Kunde/Person)',
                to_vendor: 'An (Anbieter/Person)',
                name_placeholder: 'Name',
                reason: 'Grund',
                reminder_days_before: 'Erinnerung (Tage Vor F√§lligkeit)',
                reminder_days_before_deadline: 'Erinnerung (Tage Vor Frist)',
                plan_title: 'Plan Titel',
                target_amount: 'Zielbetrag',
                start_date: 'Startdatum',
                target_deadline: 'Ziel Frist',
                notes: 'Notizen',
                additional_notes: 'Zus√§tzliche Notizen...',
                optional_description: 'Optionale Beschreibung',
                progress_note: 'Hinweis: Der Fortschritt wird basierend auf Gesamtersparnissen (Einkommen - Ausgaben + Forderungen) berechnet.',
                reminder_help_text: 'Erinnerung erhalten diese Anzahl von Tagen vor F√§lligkeitsdatum (0 = am F√§lligkeitsdatum)',
                reminder_deadline_help: 'Erinnerung erhalten diese Anzahl von Tagen vor Frist (0 = an der Frist)',
                type_cannot_change: 'Typ kann nach der Erstellung nicht ge√§ndert werden',
                account_management: 'Kontoverwaltung',
                debt_tracker: 'Schuldenverfolgung',
                financial_goals: 'Finanzielle Ziele',
                account: 'Konto',
                account_name: 'Kontoname',
                account_type: 'Kontotyp',
                select_account: 'Konto Ausw√§hlen',
                initial_balance: 'Anfangsguthaben',
                transfers: '√úberweisungen',
                transfer: '√úberweisung',
                add_transfer: '√úberweisung Hinzuf√ºgen',
                account_transfers: 'Konto√ºberweisungen',
                from_account: 'Von Konto',
                to_account: 'An Konto',
                transfer_description_placeholder: 'z.B. Bargeldabhebung, Kontotransfer',
                debt_name: 'Schuldenname',
                debt_type: 'Schuldentyp',
                principal_amount: 'Hauptbetrag',
                amount_paid: 'Gezahlter Betrag',
                creditor_lender: 'Gl√§ubiger/Kreditgeber',
                goal_name: 'Zielname',
                current_amount: 'Aktueller Betrag',
                deadline: 'Frist',
                template_name: 'Vorlagenname',
                transaction_type: 'Transaktionstyp',
                recurring_only: 'Nur Wiederkehrend',
                non_recurring: 'Nicht Wiederkehrend',
                clear_filters: 'Filter L√∂schen',
                all_types: 'Alle Typen',
                all_accounts: 'Alle Konten',
                print: 'Drucken',
                no_accounts_found: 'Keine Konten gefunden. Bitte f√ºgen Sie zuerst ein Konto hinzu.',
                no_accounts_added: 'Keine Konten hinzugef√ºgt. F√ºgen Sie ein Konto hinzu, um Guthaben √ºber verschiedene Quellen zu verfolgen.',
                no_transfers_recorded: 'Keine √úberweisungen aufgezeichnet. F√ºgen Sie eine √úberweisung hinzu, um Geldbewegungen zwischen Konten zu verfolgen.',
                no_debts_tracked: 'Keine Schulden verfolgt. F√ºgen Sie eine Schuld hinzu, um mit der Verfolgung zu beginnen.',
                family_members: 'Familienmitglieder',
                family_member: 'Familienmitglied',
                add_family_member: 'Familienmitglied Hinzuf√ºgen',
                edit_family_member: 'Familienmitglied Bearbeiten',
                delete_family_member: 'Familienmitglied L√∂schen',
                family_member_name: 'Name des Familienmitglieds',
                select_family_member: 'Familienmitglied Ausw√§hlen',
                select_family_members: 'Familienmitglieder Ausw√§hlen',
                divide_equally: 'Gleichm√§√üig Aufteilen',
                expense_per_person: 'Pro Person',
                no_family_members: 'Keine Familienmitglieder hinzugef√ºgt. F√ºgen Sie ein Familienmitglied hinzu, um gemeinsame Ausgaben zu verfolgen.',
                are_you_sure_delete_family_member: 'Sind Sie sicher, dass Sie dieses Familienmitglied l√∂schen m√∂chten?',
                settings_preferences: 'Einstellungen & Pr√§ferenzen',
                general_settings: 'Allgemeine Einstellungen',
                currency_symbol: 'W√§hrungssymbol',
                currency_symbol_description: 'Standard-W√§hrungssymbol f√ºr alle Betr√§ge',
                date_format: 'Datumsformat',
                date_format_description: 'Bevorzugtes Datumsanzeigeformat',
                auto_save: 'Automatisches Speichern',
                auto_save_description: '√Ñnderungen automatisch in Excel-Datei speichern',
                enable: 'Aktivieren',
                data_management: 'Datenverwaltung',
                export_data: 'Daten Exportieren',
                export_data_description: 'Alle Daten als Excel-Datei herunterladen',
                export_to_excel: 'Nach Excel Exportieren',
                export_to_csv: 'Nach CSV Exportieren',
                import_data: 'Daten Importieren',
                import_data_description: 'Daten aus Excel-Datei importieren (wird mit vorhandenen Daten zusammengef√ºhrt)',
                import_from_excel: 'Von Excel Importieren',
                backup_data: 'Daten Sichern',
                backup_data_description: 'Sicherungskopie aller Daten erstellen',
                create_backup: 'Sicherung Erstellen',
                restore_data: 'Daten Wiederherstellen',
                restore_data_description: 'Daten aus einer Sicherungsdatei wiederherstellen',
                restore_backup: 'Sicherung Wiederherstellen',
                undo_last_action: 'Letzte Aktion R√ºckg√§ngig',
                undo_last_action_description: 'Letzte Transaktion r√ºckg√§ngig machen (hinzuf√ºgen/bearbeiten/l√∂schen)',
                undo: 'R√ºckg√§ngig',
                keyboard_shortcuts: 'Tastenk√ºrzel',
                navigation: 'Navigation',
                show_shortcuts: 'Tastenk√ºrzel Anzeigen',
                quick_access: 'Schnellzugriff',
                overview: '√úbersicht',
                person: 'Person',
                people: 'Personen',
                net_contribution: 'Netto-Beitrag',
                contributor: 'Beitragender',
                owed: 'Geschuldet',
                net_contributor: 'Netto-Beitragender',
                net_owed: 'Netto-Geschuldet',
                member_information: 'Mitgliedsinformationen',
                all_status: 'Alle Status',
                color: 'Farbe',
                manage_categories: 'Kategorien Verwalten',
                recurring_transactions_manager: 'Wiederkehrende Transaktionen Manager',
                auto_generate_info: 'Wiederkehrende Transaktionen Automatisch Generieren',
                auto_generate_desc: 'Dies erstellt automatisch Transaktionen f√ºr alle wiederkehrenden Elemente basierend auf ihrer H√§ufigkeit und Daten.',
                generate_recurring: 'Wiederkehrende Transaktionen Generieren',
                select_category_placeholder: 'Kategorie Ausw√§hlen',
                add_new_item: 'Neues Element Hinzuf√ºgen',
                new: 'Neu',
                loan: 'Darlehen',
                mortgage: 'Hypothek',
                personal_loan: 'Pers√∂nliches Darlehen',
                savings: 'Ersparnisse',
                bank: 'Bank',
                is_required: 'ist erforderlich!',
                must_be_greater_than_zero: 'muss gr√∂√üer als 0 sein!',
                category_already_exists: 'Diese Kategorie existiert bereits!',
                category_name_required: 'Kategoriename ist erforderlich!',
                are_you_sure_disconnect: 'Sind Sie sicher, dass Sie sich von der Excel-Datei trennen m√∂chten? Sie m√ºssen sich erneut verbinden, um √Ñnderungen zu speichern.',
                failed_to_save: 'Fehler beim Speichern in Excel-Datei. Berechtigungen √ºberpr√ºfen.',
                are_you_sure_delete: 'Sind Sie sicher, dass Sie l√∂schen m√∂chten',
                action_cannot_undo: 'Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.',
                are_you_sure_delete_template: 'Sind Sie sicher, dass Sie diese Vorlage l√∂schen m√∂chten?',
                are_you_sure_delete_account: 'Sind Sie sicher, dass Sie dieses Konto l√∂schen m√∂chten? Dies l√∂scht keine zugeh√∂rigen Transaktionen.',
                are_you_sure_delete_debt: 'Sind Sie sicher, dass Sie diese Schuld l√∂schen m√∂chten?',
                are_you_sure_delete_goal: 'Sind Sie sicher, dass Sie dieses Ziel l√∂schen m√∂chten?',
                are_you_sure_delete_investment: 'Sind Sie sicher, dass Sie diese Investition l√∂schen m√∂chten?',
                category_used_in_transactions: 'Diese Kategorie wird in',
                deleting_will_set_to_other: 'Transaktion(en) verwendet. Das L√∂schen setzt diese Transaktionen auf "Andere". Fortfahren?',
                cash_flow_analysis: 'Cashflow-Analyse',
                investment_portfolio: 'Anlageportfolio',
                add_investment: 'Investition Hinzuf√ºgen',
                edit_investment: 'Investition Bearbeiten',
                all_methods: 'Alle Methoden',
                placeholder_salary_freelance: 'z.B. Gehalt, Freelance',
                placeholder_groceries: 'z.B. Lebensmittel',
                placeholder_new_laptop: 'z.B. Neuer Laptop',
                placeholder_groceries_salary: 'z.B. Lebensmittel, Gehalt',
                placeholder_monthly_salary: 'z.B. Monatsgehalt',
                placeholder_main_bank: 'z.B. Hauptbankkonto',
                placeholder_home_loan: 'z.B. Wohnungsbaudarlehen',
                placeholder_bank_name: 'z.B. Bankname',
                placeholder_emergency_fund: 'z.B. Notfallfonds',
                placeholder_apple_inc: 'z.B. Apple Inc.',
                placeholder_aapl: 'z.B. AAPL',
                total_cost_basis: 'Gesamtkostenbasis',
                total_gain_loss: 'Gesamtgewinn/Verlust',
                total_return: 'Gesamtrendite',
                placeholder_example_3: 'z.B. 3',
                placeholder_example_7: 'z.B. 7',
                optional_notes: 'Optionale Notizen',
                investment_name: 'Investitionsname',
                symbol_ticker: 'Symbol/Ticker',
                cost_basis: 'Kostenbasis',
                current_value: 'Aktueller Wert',
                purchase_date: 'Kaufdatum',
                stock: 'Aktie',
                bond: 'Anleihe',
                mutual_fund: 'Investmentfonds',
                etf: 'ETF',
                cryptocurrency: 'Kryptow√§hrung',
                update_investment: 'Investition Aktualisieren',
                delete_multiple_items: 'Mehrere Elemente L√∂schen',
                delete_all: 'Alle L√∂schen',
                confirm: 'Best√§tigen'
            },
            hi: {
                notifications: '‡§∏‡•Ç‡§ö‡§®‡§æ‡§è‡§Ç',
                clear_all: '‡§∏‡§≠‡•Ä ‡§∏‡§æ‡§´ ‡§ï‡§∞‡•á‡§Ç',
                no_notifications: '‡§ï‡•ã‡§à ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§®‡§π‡•Ä‡§Ç',
                view: '‡§¶‡•á‡§ñ‡•á‡§Ç',
                edit: '‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                delete: '‡§π‡§ü‡§æ‡§è‡§Ç',
                dashboard: '‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°',
                income: '‡§Ü‡§Ø',
                expenses: '‡§µ‡•ç‡§Ø‡§Ø',
                receivables: '‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§Ø',
                payables: '‡§¶‡•á‡§Ø',
                plans: '‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç',
                budgets: '‡§¨‡§ú‡§ü',
                categories: '‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç',
                category: '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä',
                reports: '‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü',
                analytics: '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
                templates: '‡§ü‡•á‡§Æ‡•ç‡§™‡•ç‡§≤‡•á‡§ü',
                accounts: '‡§ñ‡§æ‡§§‡•á',
                debts: '‡§ã‡§£',
                goals: '‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø',
                recurring: '‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä',
                calendar: '‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞',
                cashflow: '‡§®‡§ï‡§¶‡•Ä ‡§™‡•ç‡§∞‡§µ‡§æ‡§π',
                investments: '‡§®‡§ø‡§µ‡•á‡§∂',
                settings: '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏',
                bill_details: '‡§¨‡§ø‡§≤ ‡§µ‡§ø‡§µ‡§∞‡§£',
                amount: '‡§∞‡§æ‡§∂‡§ø',
                due_date: '‡§®‡§ø‡§Ø‡§§ ‡§§‡§æ‡§∞‡•Ä‡§ñ',
                status: '‡§∏‡•ç‡§•‡§ø‡§§‡§ø',
                description: '‡§µ‡§ø‡§µ‡§∞‡§£',
                priority: '‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ',
                type: '‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                paid: '‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡§ø‡§Ø‡§æ',
                unpaid: '‡§Ö‡§µ‡•à‡§§‡§®‡§ø‡§ï',
                high: '‡§â‡§ö‡•ç‡§ö',
                medium: '‡§Æ‡§ß‡•ç‡§Ø‡§Æ',
                low: '‡§®‡§ø‡§Æ‡•ç‡§®',
                today: '‡§Ü‡§ú',
                tomorrow: '‡§ï‡§≤',
                days: '‡§¶‡§ø‡§®',
                close: '‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
                refresh: '‡§§‡§æ‡§ú‡§º‡§æ ‡§ï‡§∞‡•á‡§Ç',
                export: '‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§',
                disconnect: '‡§°‡§ø‡§∏‡•ç‡§ï‡§®‡•á‡§ï‡•ç‡§ü',
                dark_mode: '‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°',
                income_sources: '‡§Ü‡§Ø ‡§ï‡•á ‡§∏‡•ç‡§∞‡•ã‡§§',
                date: '‡§§‡§æ‡§∞‡•Ä‡§ñ',
                source: '‡§∏‡•ç‡§∞‡•ã‡§§',
                actions: '‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à',
                details: '‡§µ‡§ø‡§µ‡§∞‡§£',
                from: '‡§∏‡•á',
                to: '‡§ï‡•ã',
                search: '‡§ñ‡•ã‡§ú‡•á‡§Ç...',
                from_date: '‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ',
                to_date: '‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§ñ',
                sort_by: '‡§ï‡•ç‡§∞‡§Æ‡§¨‡§¶‡•ç‡§ß ‡§ï‡§∞‡•á‡§Ç...',
                total_income: '‡§ï‡•Å‡§≤ ‡§Ü‡§Ø',
                total_expenses: '‡§ï‡•Å‡§≤ ‡§µ‡•ç‡§Ø‡§Ø',
                net_balance: '‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∂‡•á‡§∑',
                this_month_income: '‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§Ø',
                this_month_expenses: '‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§µ‡•ç‡§Ø‡§Ø',
                this_month_balance: '‡§á‡§∏ ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§∂‡•á‡§∑',
                total_savings: '‡§ï‡•Å‡§≤ ‡§¨‡§ö‡§§',
                due_receivables: '‡§¶‡•á‡§Ø ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§Ø',
                due_payables: '‡§¶‡•á‡§Ø ‡§¶‡•á‡§Ø‡§§‡§æ‡§è‡§Ç',
                loading_reminders: '‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...',
                no_items: '‡§ï‡•ã‡§à ‡§Ü‡§á‡§ü‡§Æ ‡§®‡§π‡•Ä‡§Ç',
                saved_successfully: '‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§π‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ!',
                connected_to: '‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡§æ ‡§π‡•Å‡§Ü',
                disconnected: '‡§°‡§ø‡§∏‡•ç‡§ï‡§®‡•á‡§ï‡•ç‡§ü',
                please_connect: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§´‡§º‡§æ‡§á‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§',
                upcoming_bills: '‡§Ü‡§ó‡§æ‡§Æ‡•Ä ‡§¨‡§ø‡§≤ ‡§î‡§∞ ‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞',
                monthly_comparison: '‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§§‡•Å‡§≤‡§®‡§æ',
                financial_health_score: '‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•ç‡§ï‡•ã‡§∞',
                savings_rate: '‡§¨‡§ö‡§§ ‡§¶‡§∞',
                expense_ratio: '‡§µ‡•ç‡§Ø‡§Ø ‡§Ö‡§®‡•Å‡§™‡§æ‡§§',
                average_monthly_expense: '‡§î‡§∏‡§§ ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§µ‡•ç‡§Ø‡§Ø',
                average_monthly_income: '‡§î‡§∏‡§§ ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§Ü‡§Ø',
                top_spending_category: '‡§∂‡•Ä‡§∞‡•ç‡§∑ ‡§µ‡•ç‡§Ø‡§Ø ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä',
                average_transaction_size: '‡§î‡§∏‡§§ ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§Ü‡§ï‡§æ‡§∞',
                monthly_savings: '‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ö‡§§',
                transaction_count: '‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ',
                income_vs_expenses_trend: '‡§Ü‡§Ø ‡§¨‡§®‡§æ‡§Æ ‡§µ‡•ç‡§Ø‡§Ø ‡§™‡•ç‡§∞‡§µ‡•É‡§§‡•ç‡§§‡§ø',
                cash_flow: '‡§®‡§ï‡§¶‡•Ä ‡§™‡•ç‡§∞‡§µ‡§æ‡§π',
                expense_categories: '‡§µ‡•ç‡§Ø‡§Ø ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç',
                income_categories: '‡§Ü‡§Ø ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç',
                all_transactions: '‡§∏‡§≠‡•Ä ‡§≤‡•á‡§®‡§¶‡•á‡§®',
                not_enough_data: '‡§§‡•Å‡§≤‡§®‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§°‡•á‡§ü‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 2 ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡•§',
                no_upcoming_bills: '‡§Ö‡§ó‡§≤‡•á 7 ‡§¶‡§ø‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§Ü‡§ó‡§æ‡§Æ‡•Ä ‡§¨‡§ø‡§≤ ‡§®‡§π‡•Ä‡§Ç‡•§',
                positive_monthly_savings: '‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ö‡§§',
                negative_monthly_savings: '‡§®‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ö‡§§',
                income_comma_expenses: '‡§Ü‡§Ø',
                expenses_word: '‡§µ‡•ç‡§Ø‡§Ø',
                item: '‡§Ü‡§á‡§ü‡§Æ',
                items: '‡§Ü‡§á‡§ü‡§Æ',
                showing: '‡§¶‡§ø‡§ñ‡§æ ‡§∞‡§π‡§æ ‡§π‡•à',
                of: '‡§ï‡§æ',
                all_categories: '‡§∏‡§≠‡•Ä ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç',
                all_family_members: '‡§∏‡§≠‡•Ä ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§¶‡§∏‡•ç‡§Ø',
                no_data_found: '‡§ï‡•ã‡§à ‡§°‡•á‡§ü‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§',
                no_future_plans: '‡§ï‡•ã‡§à ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡§Ç‡•§',
                no_budgets_set: '‡§ï‡•ã‡§à ‡§¨‡§ú‡§ü ‡§∏‡•á‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§ñ‡§∞‡•ç‡§ö ‡§∏‡•Ä‡§Æ‡§æ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§¨‡§ú‡§ü ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§',
                excellent_health: '‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü - ‡§Æ‡§π‡§æ‡§® ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø!',
                good_health: '‡§Ö‡§ö‡•ç‡§õ‡§æ - ‡§∏‡§π‡•Ä ‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§™‡§∞',
                fair_health: '‡§®‡§ø‡§∑‡•ç‡§™‡§ï‡•ç‡§∑ - ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§ó‡§π',
                needs_attention: '‡§ß‡•ç‡§Ø‡§æ‡§® ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ - ‡§ñ‡§∞‡•ç‡§ö ‡§ï‡•Ä ‡§Ü‡§¶‡§§‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç',
                save: '‡§∏‡§π‡•á‡§ú‡•á‡§Ç',
                update: '‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                cancel: '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
                add: '‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                save_item: '‡§Ü‡§á‡§ü‡§Æ ‡§∏‡§π‡•á‡§ú‡•á‡§Ç',
                update_item: '‡§Ü‡§á‡§ü‡§Æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                add_income: '‡§Ü‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_income: '‡§Ü‡§Ø ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                add_expense: '‡§µ‡•ç‡§Ø‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_expense: '‡§µ‡•ç‡§Ø‡§Ø ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                add_receivable: '‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_receivable: '‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§Ø ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                add_payable: '‡§¶‡•á‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_payable: '‡§¶‡•á‡§Ø ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                add_plan: '‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_plan: '‡§Ø‡•ã‡§ú‡§®‡§æ ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                add_budget: '‡§¨‡§ú‡§ü ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_budget: '‡§¨‡§ú‡§ü ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                create_template: '‡§ü‡•á‡§Æ‡•ç‡§™‡•ç‡§≤‡•á‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç',
                edit_template: '‡§ü‡•á‡§Æ‡•ç‡§™‡•ç‡§≤‡•á‡§ü ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                add_account: '‡§ñ‡§æ‡§§‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                update_account: '‡§ñ‡§æ‡§§‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                add_debt: '‡§ã‡§£ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                update_debt: '‡§ã‡§£ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                add_goal: '‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                update_goal: '‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                period: '‡§Ö‡§µ‡§ß‡§ø',
                daily: '‡§¶‡•à‡§®‡§ø‡§ï',
                weekly: '‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï',
                monthly: '‡§Æ‡§æ‡§∏‡§ø‡§ï',
                per_3_month: '‡§™‡•ç‡§∞‡§§‡§ø 3 ‡§Æ‡§π‡•Ä‡§®‡•á',
                per_6_month: '‡§™‡•ç‡§∞‡§§‡§ø 6 ‡§Æ‡§π‡•Ä‡§®‡•á',
                yearly: '‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï',
                active: '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø',
                paused: '‡§∞‡•ã‡§ï‡§æ ‡§ó‡§Ø‡§æ',
                completed: '‡§™‡•Ç‡§∞‡•ç‡§£',
                in_progress: '‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§Æ‡•á‡§Ç',
                cancelled: '‡§∞‡§¶‡•ç‡§¶',
                budget_tracks_info: '‡§¨‡§ú‡§ü ‡§ö‡§Ø‡§®‡§ø‡§§ ‡§Ö‡§µ‡§ß‡§ø ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ ‡§ö‡§Ø‡§®‡§ø‡§§ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§∏ ‡§∏‡•Ä‡§Æ‡§æ ‡§ï‡•á ‡§ñ‡§ø‡§≤‡§æ‡§´ ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§ñ‡§∞‡•ç‡§ö ‡§ï‡•ã ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§',
                notes_optional: '‡§®‡•ã‡§ü‡•ç‡§∏ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)',
                recurring_transaction: '‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä ‡§≤‡•á‡§®‡§¶‡•á‡§®',
                frequency: '‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø',
                next_occurrence_date: '‡§Ö‡§ó‡§≤‡•Ä ‡§ò‡§ü‡§®‡§æ ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ',
                payment_method: '‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§µ‡§ø‡§ß‡§ø',
                select_method: '‡§µ‡§ø‡§ß‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç',
                cash: '‡§®‡§ï‡§¶',
                bank_transfer: '‡§¨‡•à‡§Ç‡§ï ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞',
                card: '‡§ï‡§æ‡§∞‡•ç‡§°',
                mobile_payment: '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®',
                other: '‡§Ö‡§®‡•ç‡§Ø',
                select_category: '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç',
                from_client: '‡§∏‡•á (‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü/‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø)',
                to_vendor: '‡§ï‡•ã (‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ/‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø)',
                name_placeholder: '‡§®‡§æ‡§Æ',
                reason: '‡§ï‡§æ‡§∞‡§£',
                reminder_days_before: '‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ (‡§®‡§ø‡§Ø‡§§ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§∏‡•á ‡§ï‡§ø‡§§‡§®‡•á ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á)',
                reminder_days_before_deadline: '‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ (‡§∏‡§Æ‡§Ø‡§∏‡•Ä‡§Æ‡§æ ‡§∏‡•á ‡§ï‡§ø‡§§‡§®‡•á ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á)',
                plan_title: '‡§Ø‡•ã‡§ú‡§®‡§æ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï',
                target_amount: '‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§∞‡§æ‡§∂‡§ø',
                start_date: '‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ',
                target_deadline: '‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§∏‡§Æ‡§Ø‡§∏‡•Ä‡§Æ‡§æ',
                notes: '‡§®‡•ã‡§ü‡•ç‡§∏',
                additional_notes: '‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§®‡•ã‡§ü‡•ç‡§∏...',
                optional_description: '‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï ‡§µ‡§ø‡§µ‡§∞‡§£',
                progress_note: '‡§®‡•ã‡§ü: ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ï‡•Å‡§≤ ‡§¨‡§ö‡§§ (‡§Ü‡§Ø - ‡§µ‡•ç‡§Ø‡§Ø + ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§Ø) ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§ó‡§£‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§',
                reminder_help_text: '‡§®‡§ø‡§Ø‡§§ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§∏‡•á ‡§á‡§§‡§®‡•á ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á ‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç (0 = ‡§®‡§ø‡§Ø‡§§ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§™‡§∞)',
                reminder_deadline_help: '‡§∏‡§Æ‡§Ø‡§∏‡•Ä‡§Æ‡§æ ‡§∏‡•á ‡§á‡§§‡§®‡•á ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á ‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç (0 = ‡§∏‡§Æ‡§Ø‡§∏‡•Ä‡§Æ‡§æ ‡§™‡§∞)',
                type_cannot_change: '‡§∏‡•É‡§ú‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§¨‡§¶‡§≤‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ',
                account_management: '‡§ñ‡§æ‡§§‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®',
                debt_tracker: '‡§ã‡§£ ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞',
                financial_goals: '‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø',
                account: '‡§ñ‡§æ‡§§‡§æ',
                account_name: '‡§ñ‡§æ‡§§‡§æ ‡§®‡§æ‡§Æ',
                account_type: '‡§ñ‡§æ‡§§‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                select_account: '‡§ñ‡§æ‡§§‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç',
                initial_balance: '‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠‡§ø‡§ï ‡§∂‡•á‡§∑',
                transfers: '‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞',
                transfer: '‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞',
                add_transfer: '‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                account_transfers: '‡§ñ‡§æ‡§§‡§æ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞',
                from_account: '‡§∏‡•á ‡§ñ‡§æ‡§§‡§æ',
                to_account: '‡§ï‡•ã ‡§ñ‡§æ‡§§‡§æ',
                transfer_description_placeholder: '‡§ú‡•à‡§∏‡•á ‡§®‡§ï‡§¶ ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä, ‡§ñ‡§æ‡§§‡§æ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞',
                debt_name: '‡§ã‡§£ ‡§®‡§æ‡§Æ',
                debt_type: '‡§ã‡§£ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                principal_amount: '‡§Æ‡•Ç‡§≤ ‡§∞‡§æ‡§∂‡§ø',
                amount_paid: '‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡•Ä ‡§ó‡§à ‡§∞‡§æ‡§∂‡§ø',
                creditor_lender: '‡§ã‡§£‡§¶‡§æ‡§§‡§æ/‡§â‡§ß‡§æ‡§∞‡§¶‡§æ‡§§‡§æ',
                goal_name: '‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§®‡§æ‡§Æ',
                current_amount: '‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∞‡§æ‡§∂‡§ø',
                deadline: '‡§∏‡§Æ‡§Ø‡§∏‡•Ä‡§Æ‡§æ',
                template_name: '‡§ü‡•á‡§Æ‡•ç‡§™‡•ç‡§≤‡•á‡§ü ‡§®‡§æ‡§Æ',
                transaction_type: '‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                recurring_only: '‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä',
                non_recurring: '‡§ó‡•à‡§∞-‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä',
                clear_filters: '‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§∏‡§æ‡§´ ‡§ï‡§∞‡•á‡§Ç',
                all_types: '‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞',
                all_accounts: '‡§∏‡§≠‡•Ä ‡§ñ‡§æ‡§§‡•á',
                print: '‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü',
                no_accounts_found: '‡§ï‡•ã‡§à ‡§ñ‡§æ‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§è‡§ï ‡§ñ‡§æ‡§§‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§',
                no_accounts_added: '‡§ï‡•ã‡§à ‡§ñ‡§æ‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§∏‡•ç‡§∞‡•ã‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∂‡•á‡§∑ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§ñ‡§æ‡§§‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§',
                no_transfers_recorded: '‡§ï‡•ã‡§à ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§ñ‡§æ‡§§‡•ã‡§Ç ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ß‡§® ‡§Ü‡§µ‡§æ‡§ú‡§æ‡§π‡•Ä ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§',
                no_debts_tracked: '‡§ï‡•ã‡§à ‡§ã‡§£ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§ã‡§£ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§',
                family_members: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§¶‡§∏‡•ç‡§Ø',
                family_member: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø',
                add_family_member: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_family_member: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                delete_family_member: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§π‡§ü‡§æ‡§è‡§Ç',
                family_member_name: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ï‡§æ ‡§®‡§æ‡§Æ',
                select_family_member: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç',
                select_family_members: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç',
                divide_equally: '‡§∏‡§Æ‡§æ‡§® ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§µ‡§ø‡§≠‡§æ‡§ú‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                expense_per_person: '‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø',
                no_family_members: '‡§ï‡•ã‡§à ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§®‡§π‡•Ä‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§∏‡§æ‡§ù‡§æ ‡§ñ‡§∞‡•ç‡§ö ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§',
                are_you_sure_delete_family_member: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
                settings_preferences: '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§î‡§∞ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ‡§è‡§Ç',
                general_settings: '‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏',
                currency_symbol: '‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï',
                currency_symbol_description: '‡§∏‡§≠‡•Ä ‡§∞‡§æ‡§∂‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï',
                date_format: '‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™',
                date_format_description: '‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™',
                auto_save: '‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∏‡§π‡•á‡§ú‡•á‡§Ç',
                auto_save_description: '‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§´‡§º‡§æ‡§á‡§≤ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§∏‡§π‡•á‡§ú‡•á‡§Ç',
                enable: '‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§ï‡§∞‡•á‡§Ç',
                data_management: '‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®',
                export_data: '‡§°‡•á‡§ü‡§æ ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç',
                export_data_description: '‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã ‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§´‡§º‡§æ‡§á‡§≤ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
                export_to_excel: '‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç',
                export_to_csv: 'CSV ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç',
                import_data: '‡§°‡•á‡§ü‡§æ ‡§Ü‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç',
                import_data_description: '‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§Ü‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç (‡§Æ‡•å‡§ú‡•Ç‡§¶‡§æ ‡§°‡•á‡§ü‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Æ‡§∞‡•ç‡§ú ‡§π‡•ã‡§ó‡§æ)',
                import_from_excel: '‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§∏‡•á ‡§Ü‡§Ø‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç',
                backup_data: '‡§°‡•á‡§ü‡§æ ‡§¨‡•à‡§ï‡§Ö‡§™',
                backup_data_description: '‡§Ö‡§™‡§®‡•á ‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§ï‡§æ ‡§¨‡•à‡§ï‡§Ö‡§™ ‡§¨‡§®‡§æ‡§è‡§Ç',
                create_backup: '‡§¨‡•à‡§ï‡§Ö‡§™ ‡§¨‡§®‡§æ‡§è‡§Ç',
                restore_data: '‡§°‡•á‡§ü‡§æ ‡§™‡•Å‡§®‡§∞‡•ç‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                restore_data_description: '‡§¨‡•à‡§ï‡§Ö‡§™ ‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§™‡•Å‡§®‡§∞‡•ç‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                restore_backup: '‡§¨‡•à‡§ï‡§Ö‡§™ ‡§™‡•Å‡§®‡§∞‡•ç‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                undo_last_action: '‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§™‡•Ç‡§∞‡•ç‡§µ‡§µ‡§§ ‡§ï‡§∞‡•á‡§Ç',
                undo_last_action_description: '‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§™‡•Ç‡§∞‡•ç‡§µ‡§µ‡§§ ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•ã‡§°‡§º‡•á‡§Ç/‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç/‡§π‡§ü‡§æ‡§è‡§Ç)',
                undo: '‡§™‡•Ç‡§∞‡•ç‡§µ‡§µ‡§§',
                keyboard_shortcuts: '‡§ï‡•Ä‡§¨‡•ã‡§∞‡•ç‡§° ‡§∂‡•â‡§∞‡•ç‡§ü‡§ï‡§ü',
                navigation: '‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§∂‡§®',
                show_shortcuts: '‡§∂‡•â‡§∞‡•ç‡§ü‡§ï‡§ü ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç',
                quick_access: '‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§™‡§π‡•Å‡§Ç‡§ö',
                overview: '‡§Ö‡§µ‡§≤‡•ã‡§ï‡§®',
                person: '‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø',
                people: '‡§≤‡•ã‡§ó',
                net_contribution: '‡§∂‡•Å‡§¶‡•ç‡§ß ‡§Ø‡•ã‡§ó‡§¶‡§æ‡§®',
                contributor: '‡§Ø‡•ã‡§ó‡§¶‡§æ‡§®‡§ï‡§∞‡•ç‡§§‡§æ',
                owed: '‡§¶‡•á‡§Ø',
                net_contributor: '‡§∂‡•Å‡§¶‡•ç‡§ß ‡§Ø‡•ã‡§ó‡§¶‡§æ‡§®‡§ï‡§∞‡•ç‡§§‡§æ',
                net_owed: '‡§∂‡•Å‡§¶‡•ç‡§ß ‡§¶‡•á‡§Ø',
                member_information: '‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',
                all_status: '‡§∏‡§≠‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø',
                color: '‡§∞‡§Ç‡§ó',
                manage_categories: '‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                recurring_transactions_manager: '‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ï',
                auto_generate_info: '‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡•á‡§Ç',
                auto_generate_desc: '‡§Ø‡§π ‡§â‡§®‡§ï‡•Ä ‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø ‡§î‡§∞ ‡§§‡§æ‡§∞‡•Ä‡§ñ‡•ã‡§Ç ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§∏‡§≠‡•Ä ‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä ‡§Ü‡§á‡§ü‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§¨‡§®‡§æ‡§è‡§ó‡§æ‡•§',
                generate_recurring: '‡§Ü‡§µ‡§∞‡•ç‡§§‡•Ä ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡•á‡§Ç',
                select_category_placeholder: '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç',
                add_new_item: '‡§®‡§Ø‡§æ ‡§Ü‡§á‡§ü‡§Æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                new: '‡§®‡§Ø‡§æ',
                loan: '‡§ã‡§£',
                mortgage: '‡§¨‡§Ç‡§ß‡§ï',
                personal_loan: '‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ã‡§£',
                savings: '‡§¨‡§ö‡§§',
                bank: '‡§¨‡•à‡§Ç‡§ï',
                is_required: '‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à!',
                must_be_greater_than_zero: '0 ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è!',
                category_already_exists: '‡§Ø‡§π ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à!',
                category_name_required: '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§®‡§æ‡§Æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à!',
                are_you_sure_disconnect: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§´‡§º‡§æ‡§á‡§≤ ‡§∏‡•á ‡§°‡§ø‡§∏‡•ç‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç? ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§∏‡§π‡•á‡§ú‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•ã ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§',
                failed_to_save: '‡§è‡§ï‡•ç‡§∏‡•á‡§≤ ‡§´‡§º‡§æ‡§á‡§≤ ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡•§ ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡§æ‡§Ç ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§',
                are_you_sure_delete: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç',
                action_cannot_undo: '‡§á‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§ï‡•ã ‡§™‡•Ç‡§∞‡•ç‡§µ‡§µ‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ‡•§',
                are_you_sure_delete_template: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§ü‡•á‡§Æ‡•ç‡§™‡•ç‡§≤‡•á‡§ü ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
                are_you_sure_delete_account: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§ñ‡§æ‡§§‡•á ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç? ‡§Ø‡§π ‡§á‡§∏‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ï‡•ã ‡§π‡§ü‡§æ‡§è‡§ó‡§æ ‡§®‡§π‡•Ä‡§Ç‡•§',
                are_you_sure_delete_debt: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§ã‡§£ ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
                are_you_sure_delete_goal: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
                are_you_sure_delete_investment: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§á‡§∏ ‡§®‡§ø‡§µ‡•á‡§∂ ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?',
                category_used_in_transactions: '‡§Ø‡§π ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§Æ‡•á‡§Ç ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à',
                deleting_will_set_to_other: '‡§≤‡•á‡§®‡§¶‡•á‡§®‡•§ ‡§á‡§∏‡•á ‡§π‡§ü‡§æ‡§®‡•á ‡§∏‡•á ‡§â‡§® ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ï‡•ã "‡§Ö‡§®‡•ç‡§Ø" ‡§™‡§∞ ‡§∏‡•á‡§ü ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç?',
                cash_flow_analysis: '‡§®‡§ï‡§¶‡•Ä ‡§™‡•ç‡§∞‡§µ‡§æ‡§π ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
                investment_portfolio: '‡§®‡§ø‡§µ‡•á‡§∂ ‡§™‡•ã‡§∞‡•ç‡§ü‡§´‡•ã‡§≤‡§ø‡§Ø‡•ã',
                add_investment: '‡§®‡§ø‡§µ‡•á‡§∂ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
                edit_investment: '‡§®‡§ø‡§µ‡•á‡§∂ ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                all_methods: '‡§∏‡§≠‡•Ä ‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç',
                placeholder_salary_freelance: '‡§ú‡•à‡§∏‡•á ‡§µ‡•á‡§§‡§®, ‡§´‡•ç‡§∞‡•Ä‡§≤‡§æ‡§Ç‡§∏',
                placeholder_groceries: '‡§ú‡•à‡§∏‡•á ‡§ï‡§ø‡§∞‡§æ‡§®‡§æ',
                placeholder_new_laptop: '‡§ú‡•à‡§∏‡•á ‡§®‡§Ø‡§æ ‡§≤‡•à‡§™‡§ü‡•â‡§™',
                placeholder_groceries_salary: '‡§ú‡•à‡§∏‡•á ‡§ï‡§ø‡§∞‡§æ‡§®‡§æ, ‡§µ‡•á‡§§‡§®',
                placeholder_monthly_salary: '‡§ú‡•à‡§∏‡•á ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§µ‡•á‡§§‡§®',
                placeholder_main_bank: '‡§ú‡•à‡§∏‡•á ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§¨‡•à‡§Ç‡§ï ‡§ñ‡§æ‡§§‡§æ',
                placeholder_home_loan: '‡§ú‡•à‡§∏‡•á ‡§π‡•ã‡§Æ ‡§≤‡•ã‡§®',
                placeholder_bank_name: '‡§ú‡•à‡§∏‡•á ‡§¨‡•à‡§Ç‡§ï ‡§ï‡§æ ‡§®‡§æ‡§Æ',
                placeholder_emergency_fund: '‡§ú‡•à‡§∏‡•á ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§®‡§ø‡§ß‡§ø',
                placeholder_apple_inc: '‡§ú‡•à‡§∏‡•á Apple Inc.',
                placeholder_aapl: '‡§ú‡•à‡§∏‡•á AAPL',
                total_cost_basis: '‡§ï‡•Å‡§≤ ‡§≤‡§æ‡§ó‡§§ ‡§Ü‡§ß‡§æ‡§∞',
                total_gain_loss: '‡§ï‡•Å‡§≤ ‡§≤‡§æ‡§≠/‡§π‡§æ‡§®‡§ø',
                total_return: '‡§ï‡•Å‡§≤ ‡§∞‡§ø‡§ü‡§∞‡•ç‡§®',
                placeholder_example_3: '‡§ú‡•à‡§∏‡•á 3',
                placeholder_example_7: '‡§ú‡•à‡§∏‡•á 7',
                optional_notes: '‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï ‡§®‡•ã‡§ü‡•ç‡§∏',
                investment_name: '‡§®‡§ø‡§µ‡•á‡§∂ ‡§®‡§æ‡§Æ',
                symbol_ticker: '‡§™‡•ç‡§∞‡§§‡•Ä‡§ï/‡§ü‡§ø‡§ï‡§∞',
                cost_basis: '‡§≤‡§æ‡§ó‡§§ ‡§Ü‡§ß‡§æ‡§∞',
                current_value: '‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•Ç‡§≤‡•ç‡§Ø',
                purchase_date: '‡§ñ‡§∞‡•Ä‡§¶ ‡§§‡§æ‡§∞‡•Ä‡§ñ',
                stock: '‡§∏‡•ç‡§ü‡•â‡§ï',
                bond: '‡§¨‡•â‡§®‡•ç‡§°',
                mutual_fund: '‡§Æ‡•ç‡§Ø‡•Ç‡§ö‡•Å‡§Ö‡§≤ ‡§´‡§Ç‡§°',
                etf: 'ETF',
                cryptocurrency: '‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü‡•ã‡§ï‡§∞‡•á‡§Ç‡§∏‡•Ä',
                update_investment: '‡§®‡§ø‡§µ‡•á‡§∂ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
                delete_multiple_items: '‡§ï‡§à ‡§Ü‡§á‡§ü‡§Æ ‡§π‡§ü‡§æ‡§è‡§Ç',
                delete_all: '‡§∏‡§≠‡•Ä ‡§π‡§ü‡§æ‡§è‡§Ç',
                confirm: '‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç'
            },
            ar: {
                notifications: 'ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™',
                clear_all: 'ŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸÑ',
                no_notifications: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™',
                view: 'ÿπÿ±ÿ∂',
                edit: 'ÿ™ÿπÿØŸäŸÑ',
                delete: 'ÿ≠ÿ∞ŸÅ',
                dashboard: 'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ',
                income: 'ÿßŸÑÿØÿÆŸÑ',
                expenses: 'ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™',
                receivables: 'ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿßÿ™',
                payables: 'ÿßŸÑÿ∞ŸÖŸÖ ÿßŸÑÿØÿßÿ¶ŸÜÿ©',
                plans: 'ÿßŸÑÿÆÿ∑ÿ∑ ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ©',
                budgets: 'ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿßÿ™',
                categories: 'ÿßŸÑŸÅÿ¶ÿßÿ™',
                category: 'ÿßŸÑŸÅÿ¶ÿ©',
                reports: 'ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±',
                analytics: 'ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™',
                templates: 'ÿßŸÑŸÇŸàÿßŸÑÿ®',
                accounts: 'ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™',
                debts: 'ÿßŸÑÿØŸäŸàŸÜ',
                goals: 'ÿßŸÑÿ£ŸáÿØÿßŸÅ',
                recurring: 'ÿßŸÑŸÖÿ™ŸÉÿ±ÿ±ÿ©',
                calendar: 'ÿßŸÑÿ™ŸÇŸàŸäŸÖ',
                cashflow: 'ÿßŸÑÿ™ÿØŸÅŸÇ ÿßŸÑŸÜŸÇÿØŸä',
                investments: 'ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿßÿ™',
                settings: 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™',
                bill_details: 'ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑŸÅÿßÿ™Ÿàÿ±ÿ©',
                amount: 'ÿßŸÑŸÖÿ®ŸÑÿ∫',
                due_date: 'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÇÿßŸÇ',
                status: 'ÿßŸÑÿ≠ÿßŸÑÿ©',
                description: 'ÿßŸÑŸàÿµŸÅ',
                priority: 'ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©',
                type: 'ÿßŸÑŸÜŸàÿπ',
                paid: 'ŸÖÿØŸÅŸàÿπ',
                unpaid: 'ÿ∫Ÿäÿ± ŸÖÿØŸÅŸàÿπ',
                high: 'ÿπÿßŸÑŸä',
                medium: 'ŸÖÿ™Ÿàÿ≥ÿ∑',
                low: 'ŸÖŸÜÿÆŸÅÿ∂',
                today: 'ÿßŸÑŸäŸàŸÖ',
                tomorrow: 'ÿ∫ÿØÿßŸã',
                days: 'ÿ£ŸäÿßŸÖ',
                close: 'ÿ•ÿ∫ŸÑÿßŸÇ',
                refresh: 'ÿ™ÿ≠ÿØŸäÿ´',
                export: 'ÿ™ÿµÿØŸäÿ±',
                disconnect: 'ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ',
                dark_mode: 'ÿßŸÑŸàÿ∂ÿπ ÿßŸÑÿØÿßŸÉŸÜ',
                income_sources: 'ŸÖÿµÿßÿØÿ± ÿßŸÑÿØÿÆŸÑ',
                date: 'ÿßŸÑÿ™ÿßÿ±ŸäÿÆ',
                source: 'ÿßŸÑŸÖÿµÿØÿ±',
                actions: 'ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™',
                details: 'ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ',
                from: 'ŸÖŸÜ',
                to: 'ÿ•ŸÑŸâ',
                search: 'ÿ®ÿ≠ÿ´...',
                from_date: 'ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ',
                to_date: 'ÿ•ŸÑŸâ ÿ™ÿßÿ±ŸäÿÆ',
                sort_by: 'ÿ™ÿ±ÿ™Ÿäÿ® ÿ≠ÿ≥ÿ®...',
                total_income: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿØÿÆŸÑ',
                total_expenses: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™',
                net_balance: 'ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿµÿßŸÅŸä',
                this_month_income: 'ÿØÿÆŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±',
                this_month_expenses: 'ŸÖÿµÿ±ŸàŸÅÿßÿ™ Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±',
                this_month_balance: 'ÿ±ÿµŸäÿØ Ÿáÿ∞ÿß ÿßŸÑÿ¥Ÿáÿ±',
                total_savings: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿØÿÆÿ±ÿßÿ™',
                due_receivables: 'ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿßÿ™',
                due_payables: 'ÿßŸÑÿ∞ŸÖŸÖ ÿßŸÑÿØÿßÿ¶ŸÜÿ©',
                loading_reminders: 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™...',
                no_items: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿπŸÜÿßÿµÿ±',
                saved_successfully: 'ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ÿ®ŸÜÿ¨ÿßÿ≠!',
                connected_to: 'ŸÖÿ™ÿµŸÑ ÿ®ŸÄ',
                disconnected: 'ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ',
                please_connect: 'Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÖŸÑŸÅ Excel.',
                upcoming_bills: 'ÿßŸÑŸÅŸàÿßÿ™Ÿäÿ± ŸàÿßŸÑÿ™ÿ∞ŸÉŸäÿ±ÿßÿ™ ÿßŸÑŸÇÿßÿØŸÖÿ©',
                monthly_comparison: 'ÿßŸÑŸÖŸÇÿßÿ±ŸÜÿ© ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',
                financial_health_score: 'ŸÜŸÇÿßÿ∑ ÿßŸÑÿµÿ≠ÿ© ÿßŸÑŸÖÿßŸÑŸäÿ©',
                savings_rate: 'ŸÖÿπÿØŸÑ ÿßŸÑÿßÿØÿÆÿßÿ±',
                expense_ratio: 'ŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™',
                average_monthly_expense: 'ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',
                average_monthly_income: 'ŸÖÿ™Ÿàÿ≥ÿ∑ ÿßŸÑÿØÿÆŸÑ ÿßŸÑÿ¥Ÿáÿ±Ÿä',
                top_spending_category: 'ÿ£ŸÅÿ∂ŸÑ ŸÅÿ¶ÿ© ÿ•ŸÜŸÅÿßŸÇ',
                average_transaction_size: 'ŸÖÿ™Ÿàÿ≥ÿ∑ ÿ≠ÿ¨ŸÖ ÿßŸÑŸÖÿπÿßŸÖŸÑÿ©',
                monthly_savings: 'ÿßŸÑŸÖÿØÿÆÿ±ÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',
                transaction_count: 'ÿπÿØÿØ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™',
                income_vs_expenses_trend: 'ÿßÿ™ÿ¨ÿßŸá ÿßŸÑÿØÿÆŸÑ ŸÖŸÇÿßÿ®ŸÑ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™',
                cash_flow: 'ÿßŸÑÿ™ÿØŸÅŸÇ ÿßŸÑŸÜŸÇÿØŸä',
                expense_categories: 'ŸÅÿ¶ÿßÿ™ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™',
                income_categories: 'ŸÅÿ¶ÿßÿ™ ÿßŸÑÿØÿÆŸÑ',
                all_transactions: 'ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™',
                not_enough_data: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÉÿßŸÅŸäÿ© ŸÑŸÑŸÖŸÇÿßÿ±ŸÜÿ©. ŸáŸÜÿßŸÉ ÿ≠ÿßÿ¨ÿ© ÿ•ŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿ¥Ÿáÿ±ŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ.',
                no_upcoming_bills: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÅŸàÿßÿ™Ÿäÿ± ŸÇÿßÿØŸÖÿ© ŸÅŸä ÿßŸÑÿ£ŸäÿßŸÖ ÿßŸÑÿ≥ÿ®ÿπÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©.',
                positive_monthly_savings: 'ŸÖÿØÿÆÿ±ÿßÿ™ ÿ¥Ÿáÿ±Ÿäÿ© ÿ•Ÿäÿ¨ÿßÿ®Ÿäÿ©',
                negative_monthly_savings: 'ŸÖÿØÿÆÿ±ÿßÿ™ ÿ¥Ÿáÿ±Ÿäÿ© ÿ≥ŸÑÿ®Ÿäÿ©',
                income_comma_expenses: 'ÿØÿÆŸÑ',
                expenses_word: 'ŸÖÿµÿ±ŸàŸÅÿßÿ™',
                item: 'ÿπŸÜÿµÿ±',
                items: 'ÿπŸÜÿßÿµÿ±',
                showing: 'ÿπÿ±ÿ∂',
                of: 'ŸÖŸÜ',
                all_categories: 'ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ¶ÿßÿ™',
                all_family_members: 'ÿ¨ŸÖŸäÿπ ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿ£ÿ≥ÿ±ÿ©',
                no_data_found: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™.',
                no_future_plans: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿÆÿ∑ÿ∑ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ©.',
                no_budgets_set: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿπŸäŸäŸÜ ŸÖŸäÿ≤ÿßŸÜŸäÿßÿ™. ÿ£ÿ∂ŸÅ ŸÖŸäÿ≤ÿßŸÜŸäÿ© ŸÑÿ™ÿ™ÿ®ÿπ ÿ≠ÿØŸàÿØ ÿßŸÑÿ•ŸÜŸÅÿßŸÇ.',
                excellent_health: 'ŸÖŸÖÿ™ÿßÿ≤ - ÿµÿ≠ÿ© ŸÖÿßŸÑŸäÿ© ÿ±ÿßÿ¶ÿπÿ©!',
                good_health: 'ÿ¨ŸäÿØ - ÿπŸÑŸâ ÿßŸÑÿ∑ÿ±ŸäŸÇ ÿßŸÑÿµÿ≠Ÿäÿ≠',
                fair_health: 'ÿπÿßÿØŸÑ - ŸÖÿ¨ÿßŸÑ ŸÑŸÑÿ™ÿ≠ÿ≥ŸäŸÜ',
                needs_attention: 'Ÿäÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ÿßŸÑÿßŸáÿ™ŸÖÿßŸÖ - ÿ±ÿßÿ¨ÿπ ÿπÿßÿØÿßÿ™ ÿßŸÑÿ•ŸÜŸÅÿßŸÇ',
                save: 'ÿ≠ŸÅÿ∏',
                update: 'ÿ™ÿ≠ÿØŸäÿ´',
                cancel: 'ÿ•ŸÑÿ∫ÿßÿ°',
                add: 'ÿ•ÿ∂ÿßŸÅÿ©',
                save_item: 'ÿ≠ŸÅÿ∏ ÿßŸÑÿπŸÜÿµÿ±',
                update_item: 'ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπŸÜÿµÿ±',
                add_income: 'ÿ•ÿ∂ÿßŸÅÿ© ÿØÿÆŸÑ',
                edit_income: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿØÿÆŸÑ',
                add_expense: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿµÿ±ŸàŸÅ',
                edit_expense: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿµÿ±ŸàŸÅ',
                add_receivable: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ÿ≠ŸÇÿßÿ™',
                edit_receivable: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿßÿ™',
                add_payable: 'ÿ•ÿ∂ÿßŸÅÿ© ÿ∞ŸÖŸÖ ÿØÿßÿ¶ŸÜÿ©',
                edit_payable: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ∞ŸÖŸÖ ÿßŸÑÿØÿßÿ¶ŸÜÿ©',
                add_plan: 'ÿ•ÿ∂ÿßŸÅÿ© ÿÆÿ∑ÿ©',
                edit_plan: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿÆÿ∑ÿ©',
                add_budget: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸäÿ≤ÿßŸÜŸäÿ©',
                edit_budget: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ©',
                create_template: 'ÿ•ŸÜÿ¥ÿßÿ° ŸÇÿßŸÑÿ®',
                edit_template: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÇÿßŸÑÿ®',
                add_account: 'ÿ•ÿ∂ÿßŸÅÿ© ÿ≠ÿ≥ÿßÿ®',
                update_account: 'ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿ≥ÿßÿ®',
                add_debt: 'ÿ•ÿ∂ÿßŸÅÿ© ÿØŸäŸÜ',
                update_debt: 'ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿØŸäŸÜ',
                add_goal: 'ÿ•ÿ∂ÿßŸÅÿ© ŸáÿØŸÅ',
                update_goal: 'ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸáÿØŸÅ',
                period: 'ÿßŸÑŸÅÿ™ÿ±ÿ©',
                daily: 'ŸäŸàŸÖŸä',
                weekly: 'ÿ£ÿ≥ÿ®ŸàÿπŸä',
                monthly: 'ÿ¥Ÿáÿ±Ÿä',
                per_3_month: 'ŸÉŸÑ 3 ÿ£ÿ¥Ÿáÿ±',
                per_6_month: 'ŸÉŸÑ 6 ÿ£ÿ¥Ÿáÿ±',
                yearly: 'ÿ≥ŸÜŸàŸä',
                active: 'ŸÜÿ¥ÿ∑',
                paused: 'ŸÖÿ™ŸàŸÇŸÅ',
                completed: 'ŸÖŸÉÿ™ŸÖŸÑ',
                in_progress: 'ŸÇŸäÿØ ÿßŸÑÿ™ŸÜŸÅŸäÿ∞',
                cancelled: 'ŸÖŸÑÿ∫Ÿâ',
                budget_tracks_info: 'ÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖŸäÿ≤ÿßŸÜŸäÿ© ÿßŸÑÿ•ŸÜŸÅÿßŸÇ ÿßŸÑŸÅÿπŸÑŸä ŸÖŸÇÿßÿ®ŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿØ ŸÑŸÑŸÅÿ¶ÿ© ÿßŸÑŸÖÿ≠ÿØÿØÿ© ÿ∂ŸÖŸÜ ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑŸÖÿ≠ÿØÿØÿ©.',
                notes_optional: 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)',
                recurring_transaction: 'ŸÖÿπÿßŸÖŸÑÿ© ŸÖÿ™ŸÉÿ±ÿ±ÿ©',
                frequency: 'ÿßŸÑÿ™ŸÉÿ±ÿßÿ±',
                next_occurrence_date: 'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ≠ÿØÿ´ ÿßŸÑÿ™ÿßŸÑŸä',
                payment_method: 'ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ',
                select_method: 'ÿßÿÆÿ™ÿ± ÿßŸÑÿ∑ÿ±ŸäŸÇÿ©',
                cash: 'ŸÜŸÇÿØ',
                bank_transfer: 'ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜŸÉŸä',
                card: 'ÿ®ÿ∑ÿßŸÇÿ©',
                mobile_payment: 'ÿØŸÅÿπ ŸÖÿ≠ŸÖŸàŸÑ',
                other: 'ÿ£ÿÆÿ±Ÿâ',
                select_category: 'ÿßÿÆÿ™ÿ± ÿßŸÑŸÅÿ¶ÿ©',
                from_client: 'ŸÖŸÜ (ÿπŸÖŸäŸÑ/ÿ¥ÿÆÿµ)',
                to_vendor: 'ÿ•ŸÑŸâ (ÿ®ÿßÿ¶ÿπ/ÿ¥ÿÆÿµ)',
                name_placeholder: 'ÿßŸÑÿßÿ≥ŸÖ',
                reason: 'ÿßŸÑÿ≥ÿ®ÿ®',
                reminder_days_before: 'ÿ™ÿ∞ŸÉŸäÿ± (ÿ£ŸäÿßŸÖ ŸÇÿ®ŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÇÿßŸÇ)',
                reminder_days_before_deadline: 'ÿ™ÿ∞ŸÉŸäÿ± (ÿ£ŸäÿßŸÖ ŸÇÿ®ŸÑ ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä)',
                plan_title: 'ÿπŸÜŸàÿßŸÜ ÿßŸÑÿÆÿ∑ÿ©',
                target_amount: 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ',
                start_date: 'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿ°',
                target_deadline: 'ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ',
                notes: 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™',
                additional_notes: 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©...',
                optional_description: 'ŸàÿµŸÅ ÿßÿÆÿ™Ÿäÿßÿ±Ÿä',
                progress_note: 'ŸÖŸÑÿßÿ≠ÿ∏ÿ©: ÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ŸÇÿØŸÖ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿØÿÆÿ±ÿßÿ™ (ÿßŸÑÿØÿÆŸÑ - ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™ + ÿßŸÑŸÖÿ≥ÿ™ÿ≠ŸÇÿßÿ™).',
                reminder_help_text: 'ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ™ÿ∞ŸÉŸäÿ± ŸÇÿ®ŸÑ Ÿáÿ∞ÿß ÿßŸÑÿπÿØÿØ ŸÖŸÜ ÿßŸÑÿ£ŸäÿßŸÖ ŸÖŸÜ ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÇÿßŸÇ (0 = ŸÅŸä ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿßÿ≥ÿ™ÿ≠ŸÇÿßŸÇ)',
                reminder_deadline_help: 'ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ™ÿ∞ŸÉŸäÿ± ŸÇÿ®ŸÑ Ÿáÿ∞ÿß ÿßŸÑÿπÿØÿØ ŸÖŸÜ ÿßŸÑÿ£ŸäÿßŸÖ ŸÖŸÜ ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä (0 = ŸÅŸä ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä)',
                type_cannot_change: 'ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÜŸàÿπ ÿ®ÿπÿØ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°',
                account_management: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™',
                debt_tracker: 'ŸÖÿ™ÿ™ÿ®ÿπ ÿßŸÑÿØŸäŸàŸÜ',
                financial_goals: 'ÿßŸÑÿ£ŸáÿØÿßŸÅ ÿßŸÑŸÖÿßŸÑŸäÿ©',
                account: 'ÿ≠ÿ≥ÿßÿ®',
                account_name: 'ÿßÿ≥ŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®',
                account_type: 'ŸÜŸàÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ®',
                select_account: 'ÿßÿÆÿ™ÿ± ÿßŸÑÿ≠ÿ≥ÿßÿ®',
                initial_balance: 'ÿßŸÑÿ±ÿµŸäÿØ ÿßŸÑÿ£ŸàŸÑŸä',
                transfers: 'ÿßŸÑÿ™ÿ≠ŸàŸäŸÑÿßÿ™',
                transfer: 'ÿ™ÿ≠ŸàŸäŸÑ',
                add_transfer: 'ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ≠ŸàŸäŸÑ',
                account_transfers: 'ÿ™ÿ≠ŸàŸäŸÑÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ®',
                from_account: 'ŸÖŸÜ ÿßŸÑÿ≠ÿ≥ÿßÿ®',
                to_account: 'ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿ≥ÿßÿ®',
                transfer_description_placeholder: 'ŸÖÿ´ÿßŸÑ: ÿ≥ÿ≠ÿ® ŸÜŸÇÿØŸäÿå ÿ™ÿ≠ŸàŸäŸÑ ÿ≠ÿ≥ÿßÿ®',
                debt_name: 'ÿßÿ≥ŸÖ ÿßŸÑÿØŸäŸÜ',
                debt_type: 'ŸÜŸàÿπ ÿßŸÑÿØŸäŸÜ',
                principal_amount: 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ£ÿµŸÑŸä',
                amount_paid: 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿØŸÅŸàÿπ',
                creditor_lender: 'ÿßŸÑÿØÿßÿ¶ŸÜ/ÿßŸÑŸÖŸÇÿ±ÿ∂',
                goal_name: 'ÿßÿ≥ŸÖ ÿßŸÑŸáÿØŸÅ',
                current_amount: 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑÿ≠ÿßŸÑŸä',
                deadline: 'ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä',
                template_name: 'ÿßÿ≥ŸÖ ÿßŸÑŸÇÿßŸÑÿ®',
                transaction_type: 'ŸÜŸàÿπ ÿßŸÑŸÖÿπÿßŸÖŸÑÿ©',
                recurring_only: 'ŸÖÿ™ŸÉÿ±ÿ±ÿ© ŸÅŸÇÿ∑',
                non_recurring: 'ÿ∫Ÿäÿ± ŸÖÿ™ŸÉÿ±ÿ±ÿ©',
                clear_filters: 'ŸÖÿ≥ÿ≠ ÿßŸÑŸÖÿ±ÿ¥ÿ≠ÿßÿ™',
                all_types: 'ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜŸàÿßÿπ',
                all_accounts: 'ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™',
                print: 'ÿ∑ÿ®ÿßÿπÿ©',
                no_accounts_found: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ≠ÿ≥ÿßÿ®ÿßÿ™. Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ∂ÿßŸÅÿ© ÿ≠ÿ≥ÿßÿ® ÿ£ŸàŸÑÿßŸã.',
                no_accounts_added: 'ŸÑŸÖ ÿ™ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ≠ÿ≥ÿßÿ®ÿßÿ™. ÿ£ÿ∂ŸÅ ÿ≠ÿ≥ÿßÿ®ÿßŸã ŸÑÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ£ÿ±ÿµÿØÿ© ÿπÿ®ÿ± ŸÖÿµÿßÿØÿ± ŸÖÿÆÿ™ŸÑŸÅÿ©.',
                no_transfers_recorded: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ™ÿ≠ŸàŸäŸÑÿßÿ™. ÿ£ÿ∂ŸÅ ÿ™ÿ≠ŸàŸäŸÑÿßŸã ŸÑÿ™ÿ™ÿ®ÿπ ÿ≠ÿ±ŸÉÿ© ÿßŸÑÿ£ŸÖŸàÿßŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™.',
                no_debts_tracked: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿØŸäŸàŸÜ. ÿ£ÿ∂ŸÅ ÿØŸäŸÜÿßŸã ŸÑÿ®ÿØÿ° ÿßŸÑÿ™ÿ™ÿ®ÿπ.',
                family_members: 'ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                family_member: 'ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                add_family_member: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                edit_family_member: 'ÿ™ÿπÿØŸäŸÑ ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                delete_family_member: 'ÿ≠ÿ∞ŸÅ ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                family_member_name: 'ÿßÿ≥ŸÖ ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                select_family_member: 'ÿßÿÆÿ™ÿ± ŸÅÿ±ÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                select_family_members: 'ÿßÿÆÿ™ÿ± ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©',
                divide_equally: 'ŸÇÿ≥ŸÖ ÿ®ÿßŸÑÿ™ÿ≥ÿßŸàŸä',
                expense_per_person: 'ŸÑŸÉŸÑ ÿ¥ÿÆÿµ',
                no_family_members: 'ŸÑŸÖ ÿ™ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ£ŸÅÿ±ÿßÿØ ÿßŸÑÿπÿßÿ¶ŸÑÿ©. ÿ£ÿ∂ŸÅ ŸÅÿ±ÿØÿßŸã ŸÖŸÜ ÿßŸÑÿπÿßÿ¶ŸÑÿ© ŸÑÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™ ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸÉÿ©.',
                are_you_sure_delete_family_member: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÅÿ±ÿØ ŸÖŸÜ ÿßŸÑÿπÿßÿ¶ŸÑÿ©ÿü',
                settings_preferences: 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ŸàÿßŸÑÿ™ŸÅÿ∂ŸäŸÑÿßÿ™',
                general_settings: 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©',
                currency_symbol: 'ÿ±ŸÖÿ≤ ÿßŸÑÿπŸÖŸÑÿ©',
                currency_symbol_description: 'ÿ±ŸÖÿ≤ ÿßŸÑÿπŸÖŸÑÿ© ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ®ÿßŸÑÿ∫',
                date_format: 'ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ',
                date_format_description: 'ÿ™ŸÜÿ≥ŸäŸÇ ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖŸÅÿ∂ŸÑ',
                auto_save: 'ÿ≠ŸÅÿ∏ ÿ™ŸÑŸÇÿßÿ¶Ÿä',
                auto_save_description: 'ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÅŸä ŸÖŸÑŸÅ Excel',
                enable: 'ÿ™ŸÅÿπŸäŸÑ',
                data_management: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',
                export_data: 'ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',
                export_data_description: 'ÿ™ŸÜÿ≤ŸäŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÉŸÖŸÑŸÅ Excel',
                export_to_excel: 'ÿ™ÿµÿØŸäÿ± ÿ•ŸÑŸâ Excel',
                export_to_csv: 'ÿ™ÿµÿØŸäÿ± ÿ•ŸÑŸâ CSV',
                import_data: 'ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',
                import_data_description: 'ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ŸÖŸÑŸÅ Excel (ÿ≥Ÿäÿ™ŸÖ ÿØŸÖÿ¨Ÿáÿß ŸÖÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸàÿ¨ŸàÿØÿ©)',
                import_from_excel: 'ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ŸÖŸÜ Excel',
                backup_data: 'ŸÜÿ≥ÿÆ ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä ŸÑŸÑÿ®ŸäÿßŸÜÿßÿ™',
                backup_data_description: 'ÿ•ŸÜÿ¥ÿßÿ° ŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ© ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ',
                create_backup: 'ÿ•ŸÜÿ¥ÿßÿ° ŸÜÿ≥ÿÆÿ© ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©',
                restore_data: 'ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',
                restore_data_description: 'ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ŸÖŸÑŸÅ ÿßŸÑŸÜÿ≥ÿÆ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä',
                restore_backup: 'ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©',
                undo_last_action: 'ÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜ ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ÿßŸÑÿ£ÿÆŸäÿ±',
                undo_last_action_description: 'ÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜ ÿ¢ÿÆÿ± ŸÖÿπÿßŸÖŸÑÿ© (ÿ•ÿ∂ÿßŸÅÿ©/ÿ™ÿπÿØŸäŸÑ/ÿ≠ÿ∞ŸÅ)',
                undo: 'ÿ™ÿ±ÿßÿ¨ÿπ',
                keyboard_shortcuts: 'ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠',
                navigation: 'ÿßŸÑÿ™ŸÜŸÇŸÑ',
                show_shortcuts: 'ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™',
                quick_access: 'ÿßŸÑŸàÿµŸàŸÑ ÿßŸÑÿ≥ÿ±Ÿäÿπ',
                overview: 'ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©',
                person: 'ÿ¥ÿÆÿµ',
                people: 'ÿ£ÿ¥ÿÆÿßÿµ',
                net_contribution: 'ÿßŸÑŸÖÿ≥ÿßŸáŸÖÿ© ÿßŸÑÿµÿßŸÅŸäÿ©',
                contributor: 'ŸÖÿ≥ÿßŸáŸÖ',
                owed: 'ŸÖÿØŸäŸÜ',
                net_contributor: 'ÿßŸÑŸÖÿ≥ÿßŸáŸÖ ÿßŸÑÿµÿßŸÅŸä',
                net_owed: 'ÿßŸÑŸÖÿØŸäŸÜ ÿßŸÑÿµÿßŸÅŸä',
                member_information: 'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿπÿ∂Ÿà',
                all_status: 'ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿßÿ™',
                color: 'ÿßŸÑŸÑŸàŸÜ',
                manage_categories: 'ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÅÿ¶ÿßÿ™',
                recurring_transactions_manager: 'ŸÖÿØŸäÿ± ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ™ŸÉÿ±ÿ±ÿ©',
                auto_generate_info: 'ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ™ŸÉÿ±ÿ±ÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã',
                auto_generate_desc: 'ÿ≥Ÿäÿ§ÿØŸä Ÿáÿ∞ÿß ÿ•ŸÑŸâ ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿπÿßŸÖŸÑÿßÿ™ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑŸÖÿ™ŸÉÿ±ÿ±ÿ© ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿ™ŸÉÿ±ÿßÿ±Ÿáÿß Ÿàÿ™Ÿàÿßÿ±ŸäÿÆŸáÿß.',
                generate_recurring: 'ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ™ŸÉÿ±ÿ±ÿ©',
                select_category_placeholder: 'ÿßÿÆÿ™ÿ± ÿßŸÑŸÅÿ¶ÿ©',
                add_new_item: 'ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÜÿµÿ± ÿ¨ÿØŸäÿØ',
                new: 'ÿ¨ÿØŸäÿØ',
                loan: 'ŸÇÿ±ÿ∂',
                mortgage: 'ÿ±ŸáŸÜ ÿπŸÇÿßÿ±Ÿä',
                personal_loan: 'ŸÇÿ±ÿ∂ ÿ¥ÿÆÿµŸä',
                savings: 'ŸÖÿØÿÆÿ±ÿßÿ™',
                bank: 'ÿ®ŸÜŸÉ',
                is_required: 'ŸÖÿ∑ŸÑŸàÿ®!',
                must_be_greater_than_zero: 'Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÉÿ®ÿ± ŸÖŸÜ 0!',
                category_already_exists: 'Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ¶ÿ© ŸÖŸàÿ¨ŸàÿØÿ© ÿ®ÿßŸÑŸÅÿπŸÑ!',
                category_name_required: 'ÿßÿ≥ŸÖ ÿßŸÑŸÅÿ¶ÿ© ŸÖÿ∑ŸÑŸàÿ®!',
                are_you_sure_disconnect: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÖŸÑŸÅ Excelÿü ÿ≥ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ÿ•ÿπÿßÿØÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ŸÑÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™.',
                failed_to_save: 'ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑÿ≠ŸÅÿ∏ ŸÅŸä ŸÖŸÑŸÅ Excel. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ£ÿ∞ŸàŸÜÿßÿ™.',
                are_you_sure_delete: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ',
                action_cannot_undo: 'ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°.',
                are_you_sure_delete_template: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÇÿßŸÑÿ®ÿü',
                are_you_sure_delete_account: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿü ŸÑŸÜ Ÿäÿ§ÿØŸä Ÿáÿ∞ÿß ÿ•ŸÑŸâ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑ÿ© ÿ®Ÿá.',
                are_you_sure_delete_debt: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿØŸäŸÜÿü',
                are_you_sure_delete_goal: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸáÿØŸÅÿü',
                are_you_sure_delete_investment: 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿü',
                category_used_in_transactions: 'Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ¶ÿ© ŸÖÿ≥ÿ™ÿÆÿØŸÖÿ© ŸÅŸä',
                deleting_will_set_to_other: 'ŸÖÿπÿßŸÖŸÑÿ©(ÿßÿ™). ÿ≠ÿ∞ŸÅŸáÿß ÿ≥Ÿäÿ∂ÿπ ÿ™ŸÑŸÉ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿπŸÑŸâ "ÿ£ÿÆÿ±Ÿâ". ŸÖÿ™ÿßÿ®ÿπÿ©ÿü',
                cash_flow_analysis: 'ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ™ÿØŸÅŸÇ ÿßŸÑŸÜŸÇÿØŸä',
                investment_portfolio: 'ŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±ÿßÿ™',
                add_investment: 'ÿ•ÿ∂ÿßŸÅÿ© ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±',
                edit_investment: 'ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±',
                all_methods: 'ÿ¨ŸÖŸäÿπ ÿßŸÑÿ∑ÿ±ŸÇ',
                placeholder_salary_freelance: 'ŸÖÿ´ÿßŸÑ: ÿ±ÿßÿ™ÿ®ÿå ÿπŸÖŸÑ ÿ≠ÿ±',
                placeholder_groceries: 'ŸÖÿ´ÿßŸÑ: ÿ®ŸÇÿßŸÑÿ©',
                placeholder_new_laptop: 'ŸÖÿ´ÿßŸÑ: ŸÉŸÖÿ®ŸäŸàÿ™ÿ± ŸÖÿ≠ŸÖŸàŸÑ ÿ¨ÿØŸäÿØ',
                placeholder_groceries_salary: 'ŸÖÿ´ÿßŸÑ: ÿ®ŸÇÿßŸÑÿ©ÿå ÿ±ÿßÿ™ÿ®',
                placeholder_monthly_salary: 'ŸÖÿ´ÿßŸÑ: ÿ±ÿßÿ™ÿ® ÿ¥Ÿáÿ±Ÿä',
                placeholder_main_bank: 'ŸÖÿ´ÿßŸÑ: ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä',
                placeholder_home_loan: 'ŸÖÿ´ÿßŸÑ: ŸÇÿ±ÿ∂ ŸÖŸÜÿ≤ŸÑ',
                placeholder_bank_name: 'ŸÖÿ´ÿßŸÑ: ÿßÿ≥ŸÖ ÿßŸÑÿ®ŸÜŸÉ',
                placeholder_emergency_fund: 'ŸÖÿ´ÿßŸÑ: ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶',
                placeholder_apple_inc: 'ŸÖÿ´ÿßŸÑ: Apple Inc.',
                placeholder_aapl: 'ŸÖÿ´ÿßŸÑ: AAPL',
                total_cost_basis: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿ£ÿ≥ÿßÿ≥ ÿßŸÑÿ™ŸÉŸÑŸÅÿ©',
                total_gain_loss: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ±ÿ®ÿ≠/ÿßŸÑÿÆÿ≥ÿßÿ±ÿ©',
                total_return: 'ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿπÿßÿ¶ÿØ',
                placeholder_example_3: 'ŸÖÿ´ÿßŸÑ: 3',
                placeholder_example_7: 'ŸÖÿ´ÿßŸÑ: 7',
                optional_notes: 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ©',
                investment_name: 'ÿßÿ≥ŸÖ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±',
                symbol_ticker: 'ÿßŸÑÿ±ŸÖÿ≤/ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑŸÖŸÖŸäÿ≤',
                cost_basis: 'ÿ£ÿ≥ÿßÿ≥ ÿßŸÑÿ™ŸÉŸÑŸÅÿ©',
                current_value: 'ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©',
                purchase_date: 'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ¥ÿ±ÿßÿ°',
                stock: 'ÿ≥ŸáŸÖ',
                bond: 'ÿ≥ŸÜÿØ',
                mutual_fund: 'ÿµŸÜÿØŸàŸÇ ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±Ÿä',
                etf: 'ETF',
                cryptocurrency: 'ÿπŸÖŸÑÿ© ŸÖÿ¥ŸÅÿ±ÿ©',
                update_investment: 'ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±',
                delete_multiple_items: 'ÿ≠ÿ∞ŸÅ ÿπŸÜÿßÿµÿ± ŸÖÿ™ÿπÿØÿØÿ©',
                delete_all: 'ÿ≠ÿ∞ŸÅ ÿßŸÑŸÉŸÑ',
                confirm: 'ÿ™ÿ£ŸÉŸäÿØ'
            },
            zh: {
                notifications: 'ÈÄöÁü•',
                clear_all: 'Ê∏ÖÈô§ÂÖ®ÈÉ®',
                no_notifications: 'Êó†ÈÄöÁü•',
                view: 'Êü•Áúã',
                edit: 'ÁºñËæë',
                delete: 'Âà†Èô§',
                dashboard: '‰ª™Ë°®Êùø',
                income: 'Êî∂ÂÖ•',
                expenses: 'ÊîØÂá∫',
                receivables: 'Â∫îÊî∂',
                payables: 'Â∫î‰ªò',
                plans: 'Êú™Êù•ËÆ°Âàí',
                budgets: 'È¢ÑÁÆó',
                categories: 'Á±ªÂà´',
                category: 'Á±ªÂà´',
                reports: 'Êä•Âëä',
                analytics: 'ÂàÜÊûê',
                templates: 'Ê®°Êùø',
                accounts: 'Ë¥¶Êà∑',
                debts: 'ÂÄ∫Âä°',
                goals: 'ÁõÆÊ†á',
                recurring: 'ÂÆöÊúü',
                calendar: 'Êó•ÂéÜ',
                cashflow: 'Áé∞ÈáëÊµÅ',
                investments: 'ÊäïËµÑ',
                settings: 'ËÆæÁΩÆ',
                bill_details: 'Ë¥¶ÂçïËØ¶ÊÉÖ',
                amount: 'ÈáëÈ¢ù',
                due_date: 'Âà∞ÊúüÊó•',
                status: 'Áä∂ÊÄÅ',
                description: 'ÊèèËø∞',
                priority: '‰ºòÂÖàÁ∫ß',
                type: 'Á±ªÂûã',
                paid: 'Â∑≤‰ªò',
                unpaid: 'Êú™‰ªò',
                high: 'È´ò',
                medium: '‰∏≠',
                low: '‰Ωé',
                today: '‰ªäÂ§©',
                tomorrow: 'ÊòéÂ§©',
                days: 'Â§©',
                close: 'ÂÖ≥Èó≠',
                refresh: 'Âà∑Êñ∞',
                export: 'ÂØºÂá∫',
                disconnect: 'Êñ≠ÂºÄËøûÊé•',
                dark_mode: 'Ê∑±Ëâ≤Ê®°Âºè',
                income_sources: 'Êî∂ÂÖ•Êù•Ê∫ê',
                date: 'Êó•Êúü',
                source: 'Êù•Ê∫ê',
                actions: 'Êìç‰Ωú',
                details: 'ËØ¶ÊÉÖ',
                from: '‰ªé',
                to: 'Âà∞',
                search: 'ÊêúÁ¥¢...',
                from_date: 'ÂºÄÂßãÊó•Êúü',
                to_date: 'ÁªìÊùüÊó•Êúü',
                sort_by: 'ÊéíÂ∫è...',
                total_income: 'ÊÄªÊî∂ÂÖ•',
                total_expenses: 'ÊÄªÊîØÂá∫',
                net_balance: 'ÂáÄ‰ΩôÈ¢ù',
                this_month_income: 'Êú¨ÊúàÊî∂ÂÖ•',
                this_month_expenses: 'Êú¨ÊúàÊîØÂá∫',
                this_month_balance: 'Êú¨Êúà‰ΩôÈ¢ù',
                total_savings: 'ÊÄªÂÇ®ËìÑ',
                due_receivables: 'Â∫îÊî∂Ê¨æÈ°π',
                due_payables: 'Â∫î‰ªòÊ¨æÈ°π',
                loading_reminders: 'Ê≠£Âú®Âä†ËΩΩÊèêÈÜí...',
                no_items: 'Êó†È°πÁõÆ',
                saved_successfully: '‰øùÂ≠òÊàêÂäüÔºÅ',
                connected_to: 'Â∑≤ËøûÊé•Âà∞',
                disconnected: 'Â∑≤Êñ≠ÂºÄ',
                please_connect: 'ËØ∑ËøûÊé•ExcelÊñá‰ª∂„ÄÇ',
                upcoming_bills: 'Âç≥Â∞ÜÂà∞Êù•ÁöÑË¥¶ÂçïÂíåÊèêÈÜí',
                monthly_comparison: 'ÊúàÂ∫¶ÊØîËæÉ',
                financial_health_score: 'Ë¥¢Âä°ÂÅ•Â∫∑ËØÑÂàÜ',
                savings_rate: 'ÂÇ®ËìÑÁéá',
                expense_ratio: 'ÊîØÂá∫ÊØîÁéá',
                average_monthly_expense: 'Âπ≥ÂùáÊúàÊîØÂá∫',
                average_monthly_income: 'Âπ≥ÂùáÊúàÊî∂ÂÖ•',
                top_spending_category: 'ÊúÄÈ´òÊîØÂá∫Á±ªÂà´',
                average_transaction_size: 'Âπ≥Âùá‰∫§ÊòìËßÑÊ®°',
                monthly_savings: 'ÊúàÂ∫¶ÂÇ®ËìÑ',
                transaction_count: '‰∫§ÊòìÊï∞Èáè',
                income_vs_expenses_trend: 'Êî∂ÂÖ•‰∏éÊîØÂá∫Ë∂ãÂäø',
                cash_flow: 'Áé∞ÈáëÊµÅ',
                expense_categories: 'ÊîØÂá∫Á±ªÂà´',
                income_categories: 'Êî∂ÂÖ•Á±ªÂà´',
                all_transactions: 'ÊâÄÊúâ‰∫§Êòì',
                not_enough_data: 'Êï∞ÊçÆ‰∏çË∂≥ÔºåÊó†Ê≥ïÊØîËæÉ„ÄÇËá≥Â∞ëÈúÄË¶Å2‰∏™ÊúàÁöÑÊï∞ÊçÆ„ÄÇ',
                no_upcoming_bills: 'Êú™Êù•7Â§©ÂÜÖÊ≤°ÊúâÂç≥Â∞ÜÂà∞Êù•ÁöÑË¥¶Âçï„ÄÇ',
                positive_monthly_savings: 'Ê≠£ÊúàÂ∫¶ÂÇ®ËìÑ',
                negative_monthly_savings: 'Ë¥üÊúàÂ∫¶ÂÇ®ËìÑ',
                income_comma_expenses: 'Êî∂ÂÖ•',
                expenses_word: 'ÊîØÂá∫',
                item: 'È°πÁõÆ',
                items: 'È°πÁõÆ',
                showing: 'ÊòæÁ§∫',
                of: 'ÂÖ±',
                all_categories: 'ÊâÄÊúâÁ±ªÂà´',
                all_family_members: 'ÊâÄÊúâÂÆ∂Â∫≠ÊàêÂëò',
                no_data_found: 'Êú™ÊâæÂà∞Êï∞ÊçÆ„ÄÇ',
                no_future_plans: 'Êú™ÊâæÂà∞Êú™Êù•ËÆ°Âàí„ÄÇ',
                no_budgets_set: 'Êú™ËÆæÁΩÆÈ¢ÑÁÆó„ÄÇÊ∑ªÂä†È¢ÑÁÆó‰ª•Ë∑üË∏™ÊîØÂá∫ÈôêÈ¢ù„ÄÇ',
                excellent_health: '‰ºòÁßÄ - Ë¥¢Âä°Áä∂ÂÜµËâØÂ•ΩÔºÅ',
                good_health: 'ËâØÂ•Ω - Ê≠•ÂÖ•Ê≠£ËΩ®',
                fair_health: '‰∏ÄËà¨ - ÊúâÊîπËøõÁ©∫Èó¥',
                needs_attention: 'ÈúÄË¶ÅÊ≥®ÊÑè - ÂÆ°Êü•ÊîØÂá∫‰π†ÊÉØ',
                save: '‰øùÂ≠ò',
                update: 'Êõ¥Êñ∞',
                cancel: 'ÂèñÊ∂à',
                add: 'Ê∑ªÂä†',
                save_item: '‰øùÂ≠òÈ°πÁõÆ',
                update_item: 'Êõ¥Êñ∞È°πÁõÆ',
                add_income: 'Ê∑ªÂä†Êî∂ÂÖ•',
                edit_income: 'ÁºñËæëÊî∂ÂÖ•',
                add_expense: 'Ê∑ªÂä†ÊîØÂá∫',
                edit_expense: 'ÁºñËæëÊîØÂá∫',
                add_receivable: 'Ê∑ªÂä†Â∫îÊî∂',
                edit_receivable: 'ÁºñËæëÂ∫îÊî∂',
                add_payable: 'Ê∑ªÂä†Â∫î‰ªò',
                edit_payable: 'ÁºñËæëÂ∫î‰ªò',
                add_plan: 'Ê∑ªÂä†ËÆ°Âàí',
                edit_plan: 'ÁºñËæëËÆ°Âàí',
                add_budget: 'Ê∑ªÂä†È¢ÑÁÆó',
                edit_budget: 'ÁºñËæëÈ¢ÑÁÆó',
                create_template: 'ÂàõÂª∫Ê®°Êùø',
                edit_template: 'ÁºñËæëÊ®°Êùø',
                add_account: 'Ê∑ªÂä†Ë¥¶Êà∑',
                update_account: 'Êõ¥Êñ∞Ë¥¶Êà∑',
                add_debt: 'Ê∑ªÂä†ÂÄ∫Âä°',
                update_debt: 'Êõ¥Êñ∞ÂÄ∫Âä°',
                add_goal: 'Ê∑ªÂä†ÁõÆÊ†á',
                update_goal: 'Êõ¥Êñ∞ÁõÆÊ†á',
                period: 'ÊúüÈó¥',
                daily: 'ÊØèÊó•',
                weekly: 'ÊØèÂë®',
                monthly: 'ÊØèÊúà',
                per_3_month: 'ÊØè3‰∏™Êúà',
                per_6_month: 'ÊØè6‰∏™Êúà',
                yearly: 'ÊØèÂπ¥',
                active: 'Ê¥ªË∑É',
                paused: 'Â∑≤ÊöÇÂÅú',
                completed: 'Â∑≤ÂÆåÊàê',
                in_progress: 'ËøõË°å‰∏≠',
                cancelled: 'Â∑≤ÂèñÊ∂à',
                budget_tracks_info: 'È¢ÑÁÆóË∑üË∏™ÊâÄÈÄâÊúüÈó¥ÂÜÖÊâÄÈÄâÁ±ªÂà´ÁöÑÂÆûÈôÖÊîØÂá∫‰∏éÊ≠§ÈôêÂà∂ÁöÑÂØπÊØî„ÄÇ',
                notes_optional: 'Â§áÊ≥®ÔºàÂèØÈÄâÔºâ',
                recurring_transaction: 'ÂÆöÊúü‰∫§Êòì',
                frequency: 'È¢ëÁéá',
                next_occurrence_date: '‰∏ãÊ¨°ÂèëÁîüÊó•Êúü',
                payment_method: '‰ªòÊ¨æÊñπÂºè',
                select_method: 'ÈÄâÊã©ÊñπÂºè',
                cash: 'Áé∞Èáë',
                bank_transfer: 'Èì∂Ë°åËΩ¨Ë¥¶',
                card: 'Âç°',
                mobile_payment: 'ÁßªÂä®ÊîØ‰ªò',
                other: 'ÂÖ∂‰ªñ',
                select_category: 'ÈÄâÊã©Á±ªÂà´',
                from_client: 'Êù•Ëá™ÔºàÂÆ¢Êà∑/‰∫∫ÂëòÔºâ',
                to_vendor: 'Ëá≥Ôºà‰æõÂ∫îÂïÜ/‰∫∫ÂëòÔºâ',
                name_placeholder: 'ÂêçÁß∞',
                reason: 'ÂéüÂõ†',
                reminder_days_before: 'ÊèêÈÜíÔºàÂà∞ÊúüÂâçÂ§©Êï∞Ôºâ',
                reminder_days_before_deadline: 'ÊèêÈÜíÔºàÊà™Ê≠¢Êó•ÊúüÂâçÂ§©Êï∞Ôºâ',
                plan_title: 'ËÆ°ÂàíÊ†áÈ¢ò',
                target_amount: 'ÁõÆÊ†áÈáëÈ¢ù',
                start_date: 'ÂºÄÂßãÊó•Êúü',
                target_deadline: 'ÁõÆÊ†áÊà™Ê≠¢Êó•Êúü',
                notes: 'Â§áÊ≥®',
                additional_notes: 'ÈôÑÂä†Â§áÊ≥®...',
                optional_description: 'ÂèØÈÄâÊèèËø∞',
                progress_note: 'Ê≥®ÊÑèÔºöËøõÂ∫¶Â∞ÜÂü∫‰∫éÊÄªÂÇ®ËìÑÔºàÊî∂ÂÖ• - ÊîØÂá∫ + Â∫îÊî∂ÔºâËÆ°ÁÆó„ÄÇ',
                reminder_help_text: 'Âú®Âà∞ÊúüÊó•ÊúüÂâçËøô‰πàÂ§öÂ§©Êî∂Âà∞ÊèêÈÜíÔºà0 = Âú®Âà∞ÊúüÊó•ÊúüÔºâ',
                reminder_deadline_help: 'Âú®Êà™Ê≠¢Êó•ÊúüÂâçËøô‰πàÂ§öÂ§©Êî∂Âà∞ÊèêÈÜíÔºà0 = Âú®Êà™Ê≠¢Êó•ÊúüÔºâ',
                type_cannot_change: 'ÂàõÂª∫ÂêéÊó†Ê≥ïÊõ¥ÊîπÁ±ªÂûã',
                account_management: 'Ë¥¶Êà∑ÁÆ°ÁêÜ',
                debt_tracker: 'ÂÄ∫Âä°Ë∑üË∏™',
                financial_goals: 'Ë¥¢Âä°ÁõÆÊ†á',
                account: 'Ë¥¶Êà∑',
                account_name: 'Ë¥¶Êà∑ÂêçÁß∞',
                account_type: 'Ë¥¶Êà∑Á±ªÂûã',
                select_account: 'ÈÄâÊã©Ë¥¶Êà∑',
                initial_balance: 'ÂàùÂßã‰ΩôÈ¢ù',
                transfers: 'ËΩ¨Ë¥¶',
                transfer: 'ËΩ¨Ë¥¶',
                add_transfer: 'Ê∑ªÂä†ËΩ¨Ë¥¶',
                account_transfers: 'Ë¥¶Êà∑ËΩ¨Ë¥¶',
                from_account: '‰ªéË¥¶Êà∑',
                to_account: 'Âà∞Ë¥¶Êà∑',
                transfer_description_placeholder: '‰æãÂ¶ÇÔºöÁé∞ÈáëÊèêÂèñÔºåË¥¶Êà∑ËΩ¨Ë¥¶',
                debt_name: 'ÂÄ∫Âä°ÂêçÁß∞',
                debt_type: 'ÂÄ∫Âä°Á±ªÂûã',
                principal_amount: 'Êú¨ÈáëÈáëÈ¢ù',
                amount_paid: 'Â∑≤‰ªòÈáëÈ¢ù',
                creditor_lender: 'ÂÄ∫ÊùÉ‰∫∫/Ë¥∑Ê¨æ‰∫∫',
                goal_name: 'ÁõÆÊ†áÂêçÁß∞',
                current_amount: 'ÂΩìÂâçÈáëÈ¢ù',
                deadline: 'Êà™Ê≠¢Êó•Êúü',
                template_name: 'Ê®°ÊùøÂêçÁß∞',
                transaction_type: '‰∫§ÊòìÁ±ªÂûã',
                recurring_only: '‰ªÖÂÆöÊúü',
                non_recurring: 'ÈùûÂÆöÊúü',
                clear_filters: 'Ê∏ÖÈô§Á≠õÈÄâ',
                all_types: 'ÊâÄÊúâÁ±ªÂûã',
                all_accounts: 'ÊâÄÊúâË¥¶Êà∑',
                print: 'ÊâìÂç∞',
                no_accounts_found: 'Êú™ÊâæÂà∞Ë¥¶Êà∑„ÄÇËØ∑ÂÖàÊ∑ªÂä†Ë¥¶Êà∑„ÄÇ',
                no_accounts_added: 'Êú™Ê∑ªÂä†Ë¥¶Êà∑„ÄÇÊ∑ªÂä†Ë¥¶Êà∑‰ª•Ë∑üË∏™‰∏çÂêåÊù•Ê∫êÁöÑ‰ΩôÈ¢ù„ÄÇ',
                no_transfers_recorded: 'Êú™ËÆ∞ÂΩïËΩ¨Ë¥¶„ÄÇÊ∑ªÂä†ËΩ¨Ë¥¶‰ª•Ë∑üË∏™Ë¥¶Êà∑‰πãÈó¥ÁöÑËµÑÈáëÊµÅÂä®„ÄÇ',
                no_debts_tracked: 'Êú™Ë∑üË∏™ÂÄ∫Âä°„ÄÇÊ∑ªÂä†ÂÄ∫Âä°‰ª•ÂºÄÂßãË∑üË∏™„ÄÇ',
                family_members: 'ÂÆ∂Â∫≠ÊàêÂëò',
                family_member: 'ÂÆ∂Â∫≠ÊàêÂëò',
                add_family_member: 'Ê∑ªÂä†ÂÆ∂Â∫≠ÊàêÂëò',
                edit_family_member: 'ÁºñËæëÂÆ∂Â∫≠ÊàêÂëò',
                delete_family_member: 'Âà†Èô§ÂÆ∂Â∫≠ÊàêÂëò',
                family_member_name: 'ÂÆ∂Â∫≠ÊàêÂëòÂßìÂêç',
                select_family_member: 'ÈÄâÊã©ÂÆ∂Â∫≠ÊàêÂëò',
                select_family_members: 'ÈÄâÊã©ÂÆ∂Â∫≠ÊàêÂëò',
                divide_equally: 'Âπ≥ÂùáÂàÜÈÖç',
                expense_per_person: 'ÊØè‰∫∫',
                no_family_members: 'Êú™Ê∑ªÂä†ÂÆ∂Â∫≠ÊàêÂëò„ÄÇÊ∑ªÂä†ÂÆ∂Â∫≠ÊàêÂëò‰ª•Ë∑üË∏™ÂÖ±‰∫´ÊîØÂá∫„ÄÇ',
                are_you_sure_delete_family_member: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§ÂÆ∂Â∫≠ÊàêÂëòÂêóÔºü',
                settings_preferences: 'ËÆæÁΩÆÂíåÂÅèÂ•Ω',
                general_settings: 'Â∏∏ËßÑËÆæÁΩÆ',
                currency_symbol: 'Ë¥ßÂ∏ÅÁ¨¶Âè∑',
                currency_symbol_description: 'ÊâÄÊúâÈáëÈ¢ùÁöÑÈªòËÆ§Ë¥ßÂ∏ÅÁ¨¶Âè∑',
                date_format: 'Êó•ÊúüÊ†ºÂºè',
                date_format_description: 'È¶ñÈÄâÁöÑÊó•ÊúüÊòæÁ§∫Ê†ºÂºè',
                auto_save: 'Ëá™Âä®‰øùÂ≠ò',
                auto_save_description: 'Ëá™Âä®Â∞ÜÊõ¥Êîπ‰øùÂ≠òÂà∞ExcelÊñá‰ª∂',
                enable: 'ÂêØÁî®',
                data_management: 'Êï∞ÊçÆÁÆ°ÁêÜ',
                export_data: 'ÂØºÂá∫Êï∞ÊçÆ',
                export_data_description: 'Â∞ÜÊâÄÊúâÊï∞ÊçÆ‰∏ãËΩΩ‰∏∫ExcelÊñá‰ª∂',
                export_to_excel: 'ÂØºÂá∫Âà∞Excel',
                export_to_csv: 'ÂØºÂá∫Âà∞CSV',
                import_data: 'ÂØºÂÖ•Êï∞ÊçÆ',
                import_data_description: '‰ªéExcelÊñá‰ª∂ÂØºÂÖ•Êï∞ÊçÆÔºàÂ∞Ü‰∏éÁé∞ÊúâÊï∞ÊçÆÂêàÂπ∂Ôºâ',
                import_from_excel: '‰ªéExcelÂØºÂÖ•',
                backup_data: 'Â§á‰ªΩÊï∞ÊçÆ',
                backup_data_description: 'ÂàõÂª∫ÊâÄÊúâÊï∞ÊçÆÁöÑÂ§á‰ªΩ',
                create_backup: 'ÂàõÂª∫Â§á‰ªΩ',
                restore_data: 'ÊÅ¢Â§çÊï∞ÊçÆ',
                restore_data_description: '‰ªéÂ§á‰ªΩÊñá‰ª∂ÊÅ¢Â§çÊï∞ÊçÆ',
                restore_backup: 'ÊÅ¢Â§çÂ§á‰ªΩ',
                undo_last_action: 'Êí§ÈîÄ‰∏äÊ¨°Êìç‰Ωú',
                undo_last_action_description: 'Êí§ÈîÄ‰∏äÊ¨°‰∫§ÊòìÔºàÊ∑ªÂä†/ÁºñËæë/Âà†Èô§Ôºâ',
                undo: 'Êí§ÈîÄ',
                keyboard_shortcuts: 'ÈîÆÁõòÂø´Êç∑ÈîÆ',
                navigation: 'ÂØºËà™',
                show_shortcuts: 'ÊòæÁ§∫Âø´Êç∑ÈîÆ',
                quick_access: 'Âø´ÈÄüËÆøÈóÆ',
                overview: 'Ê¶ÇËßà',
                person: '‰∫∫',
                people: '‰∫∫',
                net_contribution: 'ÂáÄË¥°ÁåÆ',
                contributor: 'Ë¥°ÁåÆËÄÖ',
                owed: 'Ê¨†Ê¨æ',
                net_contributor: 'ÂáÄË¥°ÁåÆËÄÖ',
                net_owed: 'ÂáÄÊ¨†Ê¨æ',
                member_information: 'ÊàêÂëò‰ø°ÊÅØ',
                all_status: 'ÊâÄÊúâÁä∂ÊÄÅ',
                color: 'È¢úËâ≤',
                manage_categories: 'ÁÆ°ÁêÜÁ±ªÂà´',
                recurring_transactions_manager: 'ÂÆöÊúü‰∫§ÊòìÁÆ°ÁêÜÂô®',
                auto_generate_info: 'Ëá™Âä®ÁîüÊàêÂÆöÊúü‰∫§Êòì',
                auto_generate_desc: 'ËøôÂ∞ÜÊ†πÊçÆÈ¢ëÁéáÂíåÊó•ÊúüËá™Âä®‰∏∫ÊâÄÊúâÂÆöÊúüÈ°πÁõÆÂàõÂª∫‰∫§Êòì„ÄÇ',
                generate_recurring: 'ÁîüÊàêÂÆöÊúü‰∫§Êòì',
                select_category_placeholder: 'ÈÄâÊã©Á±ªÂà´',
                add_new_item: 'Ê∑ªÂä†Êñ∞È°πÁõÆ',
                new: 'Êñ∞Âª∫',
                loan: 'Ë¥∑Ê¨æ',
                mortgage: 'ÊäµÊäºË¥∑Ê¨æ',
                personal_loan: '‰∏™‰∫∫Ë¥∑Ê¨æ',
                savings: 'ÂÇ®ËìÑ',
                bank: 'Èì∂Ë°å',
                is_required: 'ÊòØÂøÖÈúÄÁöÑÔºÅ',
                must_be_greater_than_zero: 'ÂøÖÈ°ªÂ§ß‰∫é0ÔºÅ',
                category_already_exists: 'Ê≠§Á±ªÂà´Â∑≤Â≠òÂú®ÔºÅ',
                category_name_required: 'Á±ªÂà´ÂêçÁß∞ÊòØÂøÖÈúÄÁöÑÔºÅ',
                are_you_sure_disconnect: 'ÊÇ®Á°ÆÂÆöË¶ÅÊñ≠ÂºÄExcelÊñá‰ª∂ÁöÑËøûÊé•ÂêóÔºüÊÇ®ÈúÄË¶ÅÈáçÊñ∞ËøûÊé•‰ª•‰øùÂ≠òÊõ¥Êîπ„ÄÇ',
                failed_to_save: '‰øùÂ≠òÂà∞ExcelÊñá‰ª∂Â§±Ë¥•„ÄÇÊ£ÄÊü•ÊùÉÈôê„ÄÇ',
                are_you_sure_delete: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§',
                action_cannot_undo: 'Ê≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ',
                are_you_sure_delete_template: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§Ê®°ÊùøÂêóÔºü',
                are_you_sure_delete_account: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§Ë¥¶Êà∑ÂêóÔºüËøô‰∏ç‰ºöÂà†Èô§‰∏éÂÖ∂ÂÖ≥ËÅîÁöÑ‰∫§Êòì„ÄÇ',
                are_you_sure_delete_debt: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§ÂÄ∫Âä°ÂêóÔºü',
                are_you_sure_delete_goal: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§ÁõÆÊ†áÂêóÔºü',
                are_you_sure_delete_investment: 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§ÊäïËµÑÂêóÔºü',
                category_used_in_transactions: 'Ê≠§Á±ªÂà´Âú®',
                deleting_will_set_to_other: 'Á¨î‰∫§Êòì‰∏≠‰ΩøÁî®„ÄÇÂà†Èô§ÂÆÉÂ∞ÜÊääËøô‰∫õ‰∫§ÊòìËÆæÁΩÆ‰∏∫"ÂÖ∂‰ªñ"„ÄÇÁªßÁª≠Ôºü',
                cash_flow_analysis: 'Áé∞ÈáëÊµÅÂàÜÊûê',
                investment_portfolio: 'ÊäïËµÑÁªÑÂêà',
                add_investment: 'Ê∑ªÂä†ÊäïËµÑ',
                edit_investment: 'ÁºñËæëÊäïËµÑ',
                all_methods: 'ÊâÄÊúâÊñπÂºè',
                placeholder_salary_freelance: '‰æãÂ¶ÇÔºöÂ∑•ËµÑÔºåËá™Áî±ËÅå‰∏ö',
                placeholder_groceries: '‰æãÂ¶ÇÔºöÊùÇË¥ß',
                placeholder_new_laptop: '‰æãÂ¶ÇÔºöÊñ∞Á¨îËÆ∞Êú¨ÁîµËÑë',
                placeholder_groceries_salary: '‰æãÂ¶ÇÔºöÊùÇË¥ßÔºåÂ∑•ËµÑ',
                placeholder_monthly_salary: '‰æãÂ¶ÇÔºöÊúàËñ™',
                placeholder_main_bank: '‰æãÂ¶ÇÔºö‰∏ªË¶ÅÈì∂Ë°åË¥¶Êà∑',
                placeholder_home_loan: '‰æãÂ¶ÇÔºöÊàøÂ±ãË¥∑Ê¨æ',
                placeholder_bank_name: '‰æãÂ¶ÇÔºöÈì∂Ë°åÂêçÁß∞',
                placeholder_emergency_fund: '‰æãÂ¶ÇÔºöÂ∫îÊÄ•Âü∫Èáë',
                placeholder_apple_inc: '‰æãÂ¶ÇÔºöApple Inc.',
                placeholder_aapl: '‰æãÂ¶ÇÔºöAAPL',
                total_cost_basis: 'ÊÄªÊàêÊú¨Âü∫Á°Ä',
                total_gain_loss: 'ÊÄªÊî∂Áõä/ÊçüÂ§±',
                total_return: 'ÊÄªÂõûÊä•',
                placeholder_example_3: '‰æãÂ¶ÇÔºö3',
                placeholder_example_7: '‰æãÂ¶ÇÔºö7',
                optional_notes: 'ÂèØÈÄâÂ§áÊ≥®',
                investment_name: 'ÊäïËµÑÂêçÁß∞',
                symbol_ticker: 'Á¨¶Âè∑/‰ª£Á†Å',
                cost_basis: 'ÊàêÊú¨Âü∫Á°Ä',
                current_value: 'ÂΩìÂâç‰ª∑ÂÄº',
                purchase_date: 'Ë¥≠‰π∞Êó•Êúü',
                stock: 'ËÇ°Á•®',
                bond: 'ÂÄ∫Âà∏',
                mutual_fund: 'ÂÖ±ÂêåÂü∫Èáë',
                etf: 'ETF',
                cryptocurrency: 'Âä†ÂØÜË¥ßÂ∏Å',
                update_investment: 'Êõ¥Êñ∞ÊäïËµÑ',
                delete_multiple_items: 'Âà†Èô§Â§ö‰∏™È°πÁõÆ',
                delete_all: 'Âà†Èô§ÂÖ®ÈÉ®',
                confirm: 'Á°ÆËÆ§'
            }
        };

        let currentLanguage = localStorage.getItem('finance-manager-language') || 'en';

        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('finance-manager-language', lang);
            const langSelector = document.getElementById('language-selector');
            const langSelectorMobile = document.getElementById('language-selector-mobile');
            if (langSelector) langSelector.value = lang;
            if (langSelectorMobile) langSelectorMobile.value = lang;

            // Re-render current view to regenerate all dynamic content with new language
            const activeTab = document.querySelector('.nav-tab.active');
            if (activeTab && activeTab.getAttribute('onclick')) {
                const onclickAttr = activeTab.getAttribute('onclick');
                const match = onclickAttr.match(/switchTab\('([^']+)'\)/);
                if (match && match[1]) {
                    // Re-render the current tab to regenerate all content with new language
                    switchTab(match[1]);
                } else {
                    translatePage();
                    // Also trigger a delayed translation in case some content loads later
                    setTimeout(() => translatePage(), 200);
                }
            } else {
                // No active tab found, just translate current content and render dashboard
                translatePage();
                switchTab('dashboard');
            }

            // Final translation pass after everything is rendered
            setTimeout(() => translatePage(), 300);
        }

        function translatePage() {
            // Translate elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    const translation = translations[currentLanguage][key];
                    // For nav tabs, preserve emoji if present
                    if (el.classList.contains('nav-tab')) {
                        const emoji = el.textContent.match(/^[\u{1F300}-\u{1F9FF}]/u)?.[0] || '';
                        el.textContent = emoji + translation;
                    } else {
                        el.textContent = translation;
                    }
                }
            });

            // Translate common text patterns
            const textMappings = {
                'Dashboard': 'dashboard',
                'Income': 'income',
                'Expenses': 'expenses',
                'Due (Receivables)': 'receivables',
                'Receivables (Due)': 'receivables',
                'Payables': 'payables',
                'Future Plans': 'plans',
                'Budgets': 'budgets',
                'Categories': 'categories',
                'Reports': 'reports',
                'Analytics': 'analytics',
                'Templates': 'templates',
                'Accounts': 'accounts',
                'Debts': 'debts',
                'Recurring': 'recurring',
                'Calendar': 'calendar',
                'Cash Flow': 'cashflow',
                'Investments': 'investments',
                'Settings': 'settings',
                'View': 'view',
                'Edit': 'edit',
                'Delete': 'delete',
                'Close': 'close',
                'Refresh': 'refresh',
                'Export': 'export',
                'Disconnect': 'disconnect',
                'Dark Mode': 'dark_mode',
                'Notifications': 'notifications',
                'Clear All': 'clear_all',
                'No notifications': 'no_notifications',
                'Bill Details': 'bill_details',
                'Amount': 'amount',
                'Due Date': 'due_date',
                'Status': 'status',
                'Description': 'description',
                'Priority': 'priority',
                'Type': 'type',
                'Paid': 'paid',
                'Unpaid': 'unpaid',
                'High': 'high',
                'Medium': 'medium',
                'Low': 'low',
                'Today': 'today',
                'Tomorrow': 'tomorrow',
                'Income Sources': 'income_sources',
                'Date': 'date',
                'Source': 'source',
                'Actions': 'actions',
                'Details': 'details',
                'From': 'from',
                'To': 'to',
                'Search...': 'search',
                'From Date': 'from_date',
                'To Date': 'to_date',
                'Sort by...': 'sort_by',
                'Total Income': 'total_income',
                'Total Expenses': 'total_expenses',
                'Net Balance': 'net_balance',
                'This Month Income': 'this_month_income',
                'This Month Expenses': 'this_month_expenses',
                'This Month Balance': 'this_month_balance',
                'Total Savings': 'total_savings',
                'Due Receivables': 'due_receivables',
                'Due Payables': 'due_payables',
                'Loading reminders...': 'loading_reminders',
                'No items': 'no_items',
                'Saved successfully!': 'saved_successfully',
                'Connected to': 'connected_to',
                'Disconnected': 'disconnected',
                'Please connect Excel file.': 'please_connect',
                'Upcoming Bills & Reminders': 'upcoming_bills',
                'Monthly Comparison': 'monthly_comparison',
                'Financial Health Score': 'financial_health_score',
                'Savings Rate': 'savings_rate',
                'Expense Ratio': 'expense_ratio',
                'Average Monthly Expense': 'average_monthly_expense',
                'Average Monthly Income': 'average_monthly_income',
                'Top Spending Category': 'top_spending_category',
                'Average Transaction Size': 'average_transaction_size',
                'Monthly Savings': 'monthly_savings',
                'Transaction Count': 'transaction_count',
                'Income vs Expenses Trend': 'income_vs_expenses_trend',
                'Cash Flow': 'cash_flow',
                'Expense Categories': 'expense_categories',
                'Income Categories': 'income_categories',
                'All transactions': 'all_transactions',
                'Not enough data for comparison. Need at least 2 months of data.': 'not_enough_data',
                'No upcoming bills in the next 7 days.': 'no_upcoming_bills',
                'Positive monthly savings': 'positive_monthly_savings',
                'Negative monthly savings': 'negative_monthly_savings',
                'All Categories': 'all_categories',
                'No data found.': 'no_data_found',
                'No future plans found.': 'no_future_plans',
                'No budgets set. Add a budget to track spending limits.': 'no_budgets_set',
                'Excellent - Great financial health!': 'excellent_health',
                'Good - On the right track': 'good_health',
                'Fair - Room for improvement': 'fair_health',
                'Needs Attention - Review spending habits': 'needs_attention',
                'Clear Filters': 'clear_filters',
                'All Types': 'all_types',
                'Recurring Only': 'recurring_only',
                'Non-Recurring': 'non_recurring',
                'Account': 'account',
                'Transfers': 'transfers',
                'Transfer': 'transfer',
                'Account Transfers': 'account_transfers',
                'Future Plans & Goals': 'plans',
                'Budget Tracking': 'budgets',
                'Financial Reports': 'reports',
                'Financial Calendar': 'calendar',
                'Print': 'print',
                'No accounts found. Please add an account first.': 'no_accounts_found',
                'No accounts added. Add an account to track balances across different sources.': 'no_accounts_added',
                'No transfers recorded. Add a transfer to track money movement between accounts.': 'no_transfers_recorded',
                'No debts tracked. Add a debt to start tracking.': 'no_debts_tracked',
                'Family Members': 'family_members',
                'Family Member': 'family_member',
                'Add Family Member': 'add_family_member',
                'Edit Family Member': 'edit_family_member',
                'Delete Family Member': 'delete_family_member',
                'Select Family Member': 'select_family_member',
                'Select Family Members': 'select_family_members',
                'Divide Equally': 'divide_equally',
                'Per Person': 'expense_per_person',
                'Settings & Preferences': 'settings_preferences',
                'General Settings': 'general_settings',
                'Currency Symbol': 'currency_symbol',
                'Default currency symbol for all amounts': 'currency_symbol_description',
                'Date Format': 'date_format',
                'Preferred date display format': 'date_format_description',
                'Auto-save': 'auto_save',
                'Automatically save changes to Excel file': 'auto_save_description',
                'Enable': 'enable',
                'Data Management': 'data_management',
                'Export Data': 'export_data',
                'Download all data as Excel file': 'export_data_description',
                'Export to Excel': 'export_to_excel',
                'Export to CSV': 'export_to_csv',
                'Import Data': 'import_data',
                'Import data from Excel file (will merge with existing data)': 'import_data_description',
                'Import from Excel': 'import_from_excel',
                'Backup Data': 'backup_data',
                'Create a backup of all your data': 'backup_data_description',
                'Create Backup': 'create_backup',
                'Restore Data': 'restore_data',
                'Restore data from a backup file': 'restore_data_description',
                'Restore Backup': 'restore_backup',
                'Undo Last Action': 'undo_last_action',
                'Undo the last transaction (add/edit/delete)': 'undo_last_action_description',
                'Undo': 'undo',
                'Keyboard Shortcuts': 'keyboard_shortcuts',
                'Navigation': 'navigation',
                'Transfers': 'transfers',
                'Family': 'family_members',
                'Recurring Transactions Manager': 'recurring_transactions_manager',
                'Generate Recurring Transactions': 'generate_recurring',
                'Next Occurrence Date': 'next_occurrence_date',
                'Payment': 'payment_method',
                'From Account': 'from_account',
                'To Account': 'to_account'
            };

            // Translate buttons, labels, and headings
            document.querySelectorAll('button, label, h1, h2, h3, .btn, .form-label').forEach(el => {
                const text = el.textContent.trim();
                if (textMappings[text] && translations[currentLanguage] && translations[currentLanguage][textMappings[text]]) {
                    // Skip if element has data-translate (already handled)
                    if (!el.hasAttribute('data-translate')) {
                        const originalText = el.textContent;
                        const emoji = originalText.match(/^[\u{1F300}-\u{1F9FF}]/u)?.[0] || '';
                        const translation = translations[currentLanguage][textMappings[text]];
                        // Preserve emoji if present
                        if (emoji) {
                            el.textContent = emoji + ' ' + translation;
                        } else {
                            el.textContent = translation;
                        }
                    }
                }
            });

            // Translate table headers (th elements)
            document.querySelectorAll('th').forEach(el => {
                const text = el.textContent.trim();
                if (text && textMappings[text] && translations[currentLanguage] && translations[currentLanguage][textMappings[text]]) {
                    // Skip if it's a checkbox or has data-translate
                    if (!el.querySelector('input') && !el.hasAttribute('data-translate')) {
                        el.textContent = translations[currentLanguage][textMappings[text]];
                    }
                }
            });

            // Translate common table header texts that might be in the textMappings
            const tableHeaderMappings = {
                'Date': 'date',
                'Source': 'source',
                'Category': 'category',
                'Amount': 'amount',
                'Actions': 'actions',
                'Due Date': 'due_date',
                'From': 'from',
                'To': 'to',
                'Status': 'status',
                'Priority': 'priority',
                'Description': 'description',
                'Details': 'details',
                'Type': 'type'
            };

            // Add table header mappings to textMappings if not already present
            Object.keys(tableHeaderMappings).forEach(key => {
                if (!textMappings[key]) {
                    textMappings[key] = tableHeaderMappings[key];
                }
            });

            // Translate placeholder text with data-translate-placeholder attribute
            document.querySelectorAll('input[data-translate-placeholder], textarea[data-translate-placeholder]').forEach(el => {
                const key = el.getAttribute('data-translate-placeholder');
                if (key && translations[currentLanguage] && translations[currentLanguage][key]) {
                    el.setAttribute('placeholder', translations[currentLanguage][key]);
                }
            });

            // Also translate regular placeholders
            document.querySelectorAll('input[placeholder], textarea[placeholder]').forEach(el => {
                if (!el.hasAttribute('data-translate-placeholder')) {
                    const placeholder = el.getAttribute('placeholder');
                    if (placeholder && textMappings[placeholder] && translations[currentLanguage] && translations[currentLanguage][textMappings[placeholder]]) {
                        el.setAttribute('placeholder', translations[currentLanguage][textMappings[placeholder]]);
                    }
                }
            });

            // Translate .stat-label, .insight-title, .chart-title, .insight-trend elements
            document.querySelectorAll('.stat-label, .insight-title, .chart-title, .insight-trend').forEach(el => {
                const text = el.textContent.trim();
                if (text && textMappings[text] && translations[currentLanguage] && translations[currentLanguage][textMappings[text]]) {
                    if (!el.hasAttribute('data-translate')) {
                        el.textContent = translations[currentLanguage][textMappings[text]];
                    }
                }
            });

            // Translate settings elements
            document.querySelectorAll('.settings-label, .settings-description, .settings-section-title').forEach(el => {
                const text = el.textContent.trim();
                if (text && textMappings[text] && translations[currentLanguage] && translations[currentLanguage][textMappings[text]]) {
                    if (!el.hasAttribute('data-translate')) {
                        el.textContent = translations[currentLanguage][textMappings[text]];
                    }
                }
            });

            // Translate h2 elements (handle emoji prefixes)
            document.querySelectorAll('h2').forEach(el => {
                if (!el.querySelector('[data-translate]')) {
                    const text = el.textContent.trim();
                    // Remove emoji for matching
                    const textWithoutEmoji = text.replace(/^[\u{1F300}-\u{1F9FF}]\s*/u, '').trim();
                    if (textWithoutEmoji && textMappings[textWithoutEmoji] && translations[currentLanguage] && translations[currentLanguage][textMappings[textWithoutEmoji]]) {
                        const emoji = text.match(/^[\u{1F300}-\u{1F9FF}]/u)?.[0] || '';
                        el.innerHTML = emoji ? `${emoji} ${translations[currentLanguage][textMappings[textWithoutEmoji]]}` : translations[currentLanguage][textMappings[textWithoutEmoji]];
                    }
                }
            });

            // Translate any span elements inside h2 that might have been missed
            document.querySelectorAll('h2 span[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    el.textContent = translations[currentLanguage][key];
                }
            });

            // Translate option text in selects
            document.querySelectorAll('select option').forEach(el => {
                const text = el.textContent.trim();
                if (textMappings[text] && translations[currentLanguage] && translations[currentLanguage][textMappings[text]]) {
                    const emoji = el.textContent.match(/^[\u{1F300}-\u{1F9FF}]/u)?.[0] || '';
                    const translation = translations[currentLanguage][textMappings[text]];
                    if (emoji) {
                        el.textContent = emoji + ' ' + translation;
                    } else {
                        el.textContent = translation;
                    }
                }
            });

            // Update notification badge counts
            updateNotificationBadge();
        }

        function toggleMobileMenu(event) {
            if (event) {
                event.stopPropagation();
            }
            const dropdown = document.getElementById('mobile-menu-dropdown');
            const notificationDropdown = document.getElementById('notification-dropdown-mobile');
            if (notificationDropdown) notificationDropdown.style.display = 'none';
            if (dropdown) {
                const isShowing = dropdown.classList.contains('show');
                if (isShowing) {
                    dropdown.classList.remove('show');
                } else {
                    dropdown.classList.add('show');
                }
            }
        }

        function closeMobileMenuHeader() {
            const dropdown = document.getElementById('mobile-menu-dropdown');
            if (dropdown) {
                dropdown.classList.remove('show');
            }
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('mobile-menu-dropdown');
            const btn = document.getElementById('mobile-menu-btn');
            if (dropdown && btn && !dropdown.contains(e.target) && !btn.contains(e.target)) {
                dropdown.classList.remove('show');
            }
        });

        function t(key) {
            return translations[currentLanguage] && translations[currentLanguage][key] ? translations[currentLanguage][key] : key;
        }

        // --- NOTIFICATION SYSTEM ---
        let notifications = JSON.parse(localStorage.getItem('finance-manager-notifications') || '[]');

        function addNotification(type, title, message, data = {}) {
            const notification = {
                id: Date.now(),
                type: type, // 'info', 'warning', 'success', 'error'
                title: title,
                message: message,
                data: data,
                read: false,
                timestamp: new Date().toISOString()
            };
            notifications.unshift(notification);
            if (notifications.length > 50) notifications = notifications.slice(0, 50);
            localStorage.setItem('finance-manager-notifications', JSON.stringify(notifications));
            updateNotificationBadge();
            renderNotifications();
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notification-badge');
            const badgeMobile = document.getElementById('notification-badge-mobile');
            const unreadCount = notifications.filter(n => !n.read).length;
            const badgeText = unreadCount > 99 ? '99+' : unreadCount;

            if (badge) {
                if (unreadCount > 0) {
                    badge.textContent = badgeText;
                    badge.style.display = 'flex';
                } else {
                    badge.style.display = 'none';
                }
            }

            if (badgeMobile) {
                if (unreadCount > 0) {
                    badgeMobile.textContent = badgeText;
                    badgeMobile.style.display = 'flex';
                } else {
                    badgeMobile.style.display = 'none';
                }
            }
        }

        function toggleNotifications() {
            const dropdown = document.getElementById('notification-dropdown');
            const mobileDropdown = document.getElementById('notification-dropdown-mobile');
            if (mobileDropdown) mobileDropdown.style.display = 'none';
            if (dropdown) {
                dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
                if (dropdown.style.display === 'block') {
                    renderNotifications();
                }
            }
        }

        function toggleNotificationsMobile(event) {
            if (event) {
                event.stopPropagation();
            }
            const dropdown = document.getElementById('notification-dropdown-mobile');
            const desktopDropdown = document.getElementById('notification-dropdown');
            const mobileMenu = document.getElementById('mobile-menu-dropdown');
            if (desktopDropdown) desktopDropdown.style.display = 'none';
            if (mobileMenu) mobileMenu.classList.remove('show');
            if (dropdown) {
                const isShowing = dropdown.style.display === 'block';
                dropdown.style.display = isShowing ? 'none' : 'block';
                if (!isShowing) {
                    renderNotificationsMobile();
                }
            }
        }

        function renderNotifications() {
            const container = document.getElementById('notification-list');
            if (!container) return;
            renderNotificationsToContainer(container);
        }

        function renderNotificationsMobile() {
            const container = document.getElementById('notification-list-mobile');
            if (!container) return;
            renderNotificationsToContainer(container);
        }

        function renderNotificationsToContainer(container) {
            if (notifications.length === 0) {
                container.innerHTML = `<div style="padding: 2rem; text-align: center; color: var(--text-light);">${t('no_notifications')}</div>`;
                return;
            }

            container.innerHTML = notifications.map(notif => {
                const date = new Date(notif.timestamp);
                const timeAgo = getTimeAgo(date);
                const typeColors = {
                    info: 'var(--primary)',
                    warning: 'var(--warning)',
                    success: 'var(--success)',
                    error: 'var(--danger)'
                };
                return `
                    <div style="padding: 0.75rem; border-bottom: 1px solid var(--border); cursor: pointer; background: ${notif.read ? 'transparent' : '#f0f9ff'};" onclick="markNotificationRead(${notif.id})">
                        <div style="display: flex; gap: 0.75rem;">
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: ${typeColors[notif.type] || typeColors.info}; margin-top: 0.5rem; flex-shrink: 0;"></div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">${notif.title}</div>
                                <div style="font-size: 0.875rem; color: var(--text-light);">${notif.message}</div>
                                <div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">${timeAgo}</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function markNotificationRead(id) {
            const notif = notifications.find(n => n.id === id);
            if (notif) {
                notif.read = true;
                localStorage.setItem('finance-manager-notifications', JSON.stringify(notifications));
                updateNotificationBadge();
                renderNotifications();
                renderNotificationsMobile();
            }
        }

        function clearAllNotifications() {
            notifications = [];
            localStorage.setItem('finance-manager-notifications', JSON.stringify(notifications));
            updateNotificationBadge();
            renderNotifications();
            renderNotificationsMobile();
        }

        function getTimeAgo(date) {
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);

            if (minutes < 1) return 'Just now';
            if (minutes < 60) return `${minutes}m ago`;
            if (hours < 24) return `${hours}h ago`;
            if (days < 7) return `${days}d ago`;
            return formatDate(date);
        }

        // Close notification dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('notification-dropdown');
            const dropdownMobile = document.getElementById('notification-dropdown-mobile');
            const btn = document.getElementById('notification-btn');
            const btnMobile = document.getElementById('notification-btn-mobile');

            if (dropdown && btn && !dropdown.contains(e.target) && !btn.contains(e.target)) {
                dropdown.style.display = 'none';
            }
            if (dropdownMobile && btnMobile && !dropdownMobile.contains(e.target) && !btnMobile.contains(e.target)) {
                dropdownMobile.style.display = 'none';
            }
        });

        let state = {
            fileHandle: null,
            isConnected: false,
            connectionType: 'local', // 'local', 'google-sheets', 'onedrive', 'dropbox'
            googleSheetsId: null,
            googleDriveFileId: null,
            backupStorageType: 'local', // 'local', 'google-drive'
            data: {
                income: [],
                expenses: [],
                receivables: [],
                payables: [],
                plans: [],
                budgets: [],
                categories: [],
                templates: [],
                accounts: [],
                tags: [],
                transactionHistory: []
            },
            settings: {
                darkMode: false,
                currency: '‡ß≥',
                dateFormat: 'YYYY-MM-DD'
            }
        };

        // --- 2. EXCEL FILE SYSTEM LOGIC ---

        // Store file handle and metadata
        const STORAGE_KEY = 'finance_manager_file_handle';
        const STORAGE_METADATA_KEY = 'finance_manager_file_metadata';
        const STORAGE_DIRECTORY_KEY = 'finance_manager_directory_handle';

        // IndexedDB for storing file handle and directory handle
        let db = null;

        async function initDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open('FinanceManagerDB', 2);
                request.onerror = () => reject(request.error);
                request.onsuccess = () => {
                    db = request.result;
                    resolve(db);
                };
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    if (!db.objectStoreNames.contains('fileHandle')) {
                        db.createObjectStore('fileHandle');
                    }
                    if (!db.objectStoreNames.contains('directoryHandle')) {
                        db.createObjectStore('directoryHandle');
                    }
                };
            });
        }

        async function saveFileHandle(fileHandle, directoryHandle = null) {
            try {
                // Store file handle in IndexedDB (for current session)
                if (!db) await initDB();
                const transaction = db.transaction(['fileHandle', 'directoryHandle'], 'readwrite');
                const fileStore = transaction.objectStore('fileHandle');
                await fileStore.put(fileHandle, 'handle');

                // Store directory handle if available
                if (directoryHandle) {
                    const dirStore = transaction.objectStore('directoryHandle');
                    await dirStore.put(directoryHandle, 'handle');
                }

                // Also store metadata in localStorage for persistence
                try {
                    const file = await fileHandle.getFile();
                    const metadata = {
                        name: file.name,
                        lastModified: file.lastModified,
                        size: file.size,
                        timestamp: Date.now()
                    };
                    localStorage.setItem(STORAGE_METADATA_KEY, JSON.stringify(metadata));
                } catch (err) {
                    console.error('Error saving file metadata:', err);
                }
            } catch (err) {
                console.error('Error saving file handle:', err);
            }
        }

        async function loadDirectoryHandle() {
            try {
                if (!db) await initDB();
                const transaction = db.transaction(['directoryHandle'], 'readonly');
                const store = transaction.objectStore('directoryHandle');
                return new Promise((resolve, reject) => {
                    const request = store.get('handle');
                    request.onsuccess = async () => {
                        const handle = request.result;
                        // Verify directory handle is still valid
                        if (handle) {
                            try {
                                // Try to verify by checking if we can query it
                                await handle.getDirectoryHandle('.');
                                resolve(handle);
                            } catch (err) {
                                // Handle is invalid, clear it
                                if (err.name === 'NotAllowedError' || err.name === 'NotFoundError' || err.name === 'InvalidStateError') {
                                    console.log('Directory handle is invalid, clearing');
                                    if (db) {
                                        const clearTransaction = db.transaction(['directoryHandle'], 'readwrite');
                                        const clearStore = clearTransaction.objectStore('directoryHandle');
                                        await clearStore.delete('handle');
                                    }
                                }
                                resolve(null);
                            }
                        } else {
                            resolve(null);
                        }
                    };
                    request.onerror = () => reject(request.error);
                });
            } catch (err) {
                console.error('Error loading directory handle:', err);
                return null;
            }
        }

        async function loadFileHandle() {
            try {
                if (!db) await initDB();
                const transaction = db.transaction(['fileHandle'], 'readonly');
                const store = transaction.objectStore('fileHandle');
                return new Promise((resolve, reject) => {
                    const request = store.get('handle');
                    request.onsuccess = () => resolve(request.result);
                    request.onerror = () => reject(request.error);
                });
            } catch (err) {
                console.error('Error loading file handle:', err);
                return null;
            }
        }

        function getStoredFileMetadata() {
            try {
                const metadata = localStorage.getItem(STORAGE_METADATA_KEY);
                return metadata ? JSON.parse(metadata) : null;
            } catch (err) {
                console.error('Error loading file metadata:', err);
                return null;
            }
        }

        async function removeFileHandle() {
            try {
                if (!db) await initDB();
                const transaction = db.transaction(['fileHandle', 'directoryHandle'], 'readwrite');
                const fileStore = transaction.objectStore('fileHandle');
                const dirStore = transaction.objectStore('directoryHandle');
                await fileStore.delete('handle');
                await dirStore.delete('handle');
                localStorage.removeItem(STORAGE_METADATA_KEY);
            } catch (err) {
                console.error('Error removing file handle:', err);
            }
        }

        async function verifyFileHandle(fileHandle) {
            try {
                if (!fileHandle) return false;
                // Try to get the file to verify handle is still valid
                const file = await fileHandle.getFile();
                // Verify file name matches
                if (file.name !== CONFIG.fileName) {
                    return false;
                }
                return true;
            } catch (err) {
                // Handle specific errors - NotAllowedError means handle is stale/invalid
                if (err.name === 'NotAllowedError' || err.name === 'NotFoundError' || err.name === 'InvalidStateError') {
                    // File handle is invalid (likely from previous session)
                    console.log('File handle is invalid (stale from previous session)');
                    return false;
                }
                console.error('File handle verification failed:', err);
                return false;
            }
        }

        async function tryRestoreFileHandle(silent = false) {
            try {
                // First, try to restore from IndexedDB (might work if same session)
                const savedHandle = await loadFileHandle();
                if (savedHandle) {
                    const isValid = await verifyFileHandle(savedHandle);
                    if (isValid) {
                        return savedHandle;
                    } else {
                        // Handle is invalid, clear it from storage
                        console.log('Stored file handle is invalid, clearing from storage');
                        await removeFileHandle();
                    }
                }

                // If IndexedDB handle is invalid, check if we have metadata
                const metadata = getStoredFileMetadata();
                if (!metadata || metadata.name !== CONFIG.fileName) {
                    return null;
                }

                // Try to request the file again using permission persistence
                // The browser should remember the permission and make it easier
                if (window.showOpenFilePicker) {
                    try {
                        // Request the file - browser should remember permission
                        // If silent is true, we'll skip this (for auto-restore on page load)
                        if (silent) {
                            return null; // Don't show file picker automatically on page load
                        }

                        // Try to get directory handle to help browser remember location
                        let directoryHandle = null;
                        try {
                            directoryHandle = await loadDirectoryHandle();
                        } catch (err) {
                            console.log('Could not load directory handle:', err);
                        }

                        const pickerOptions = {
                            types: [{
                                description: 'Excel Files',
                                accept: { 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'] }
                            }],
                            multiple: false,
                            excludeAcceptAllOption: false
                        };

                        // Use directory handle if available to help browser remember location
                        if (directoryHandle) {
                            try {
                                // Verify directory handle is still valid
                                await directoryHandle.getDirectoryHandle('.');
                                pickerOptions.startIn = directoryHandle;
                            } catch (err) {
                                console.log('Directory handle is invalid:', err);
                                // Clear invalid directory handle
                                if (db) {
                                    const transaction = db.transaction(['directoryHandle'], 'readwrite');
                                    const dirStore = transaction.objectStore('directoryHandle');
                                    await dirStore.delete('handle');
                                }
                            }
                        }

                        const [fileHandle] = await window.showOpenFilePicker(pickerOptions);

                        // Verify it's the correct file
                        if (fileHandle.name === CONFIG.fileName) {
                            // Save the new handle with directory handle
                            await saveFileHandle(fileHandle, directoryHandle);
                            return fileHandle;
                        }
                    } catch (err) {
                        if (err.name === 'AbortError') {
                            // User cancelled, that's fine
                            return null;
                        }
                        console.error('Error restoring file handle:', err);
                    }
                }

                return null;
            } catch (err) {
                console.error('Error in tryRestoreFileHandle:', err);
                return null;
            }
        }

        async function connectExcelFile() {
            // Show connection options modal
            const connectionType = await showExcelConnectionOptions();
            if (!connectionType) return; // User cancelled

            state.connectionType = connectionType;

            if (connectionType === 'local') {
                await connectLocalExcel();
            } else if (connectionType === 'google-sheets') {
                await connectGoogleSheets();
            } else {
                showToast('This option is coming soon!', 'info');
            }
        }

        async function connectLocalExcel() {
            if (!window.showOpenFilePicker) {
                alert("Your browser does not support the File System Access API. Please use Chrome, Edge, or Opera on HTTPS/Localhost.");
                return;
            }

            try {
                // Check if we have stored metadata - try to reconnect automatically
                const metadata = getStoredFileMetadata();

                // If we have metadata, try to restore automatically first (non-silent mode)
                if (metadata && metadata.name === CONFIG.fileName) {
                    try {
                        const restoredHandle = await tryRestoreFileHandle(false); // false = show file picker if needed
                        if (restoredHandle && await verifyFileHandle(restoredHandle)) {
                            state.fileHandle = restoredHandle;
                            state.isConnected = true;
                            updateStatus(true);

                            await readExcelFile();
                            renderAll();

                            showToast('Reconnected to Excel file.', 'success');
                            return;
                        }
                    } catch (err) {
                        if (err.name === 'AbortError') {
                            // User cancelled file picker
                            return;
                        }
                        console.log('Auto-restore failed, showing file picker:', err);
                    }
                }

                // Show file picker (either no metadata or restore failed)
                const pickerOptions = {
                    types: [{
                        description: 'Excel Files',
                        accept: { 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'] }
                    }],
                    multiple: false,
                    excludeAcceptAllOption: false
                };

                // Try to use stored directory handle to help browser remember location
                const directoryHandle = await loadDirectoryHandle();
                if (directoryHandle) {
                    pickerOptions.startIn = directoryHandle;
                }

                [state.fileHandle] = await window.showOpenFilePicker(pickerOptions);

                if (state.fileHandle.name !== CONFIG.fileName) {
                    alert(`Please select the file named exactly: ${CONFIG.fileName}`);
                    state.fileHandle = null;
                    return;
                }

                // Try to get directory handle - use stored one or request new permission
                let directoryHandleToSave = directoryHandle;

                // Save file handle and metadata for next session
                await saveFileHandle(state.fileHandle, directoryHandleToSave);

                state.isConnected = true;
                updateStatus(true);

                // Load Data
                await readExcelFile();
                renderAll();

                showToast('Excel file connected successfully!', 'success');

            } catch (err) {
                console.error(err);
                if (err.name === 'AbortError') {
                    // User cancelled the file picker, just return silently
                    return;
                }
                alert('Error connecting to file: ' + err.message);
            }
        }

        // Helper function to ensure Google API is loaded
        async function ensureGoogleAPILoaded() {
            // Wait for gapi to be available
            let retries = 0;
            while (!window.gapi && retries < 20) {
                await new Promise(resolve => setTimeout(resolve, 500));
                retries++;
            }

            if (!window.gapi) {
                throw new Error('Google API failed to load. Please refresh the page and ensure you have internet connection.');
            }
        }

        // Helper function to get setup instructions
        function getGoogleSheetsSetupInstructions() {
            const currentOrigin = window.location.origin;
            const isLocalhost = currentOrigin.includes('localhost') || currentOrigin.includes('127.0.0.1') || currentOrigin.includes('file://');

            let instructions = 'Google Sheets Setup Instructions:\n\n';
            instructions += 'IMPORTANT: Copy the EXACT origin below to avoid errors!\n';
            instructions += `Your current origin: "${currentOrigin}"\n\n`;

            instructions += '1. Go to: https://console.cloud.google.com/\n';
            instructions += '2. Select your project (or create a new one)\n';
            instructions += '3. Enable APIs:\n';
            instructions += '   - Go to "APIs & Services" > "Library"\n';
            instructions += '   - Search and enable "Google Sheets API"\n';
            instructions += '   - Search and enable "Google Drive API"\n\n';
            instructions += '4. Configure OAuth Consent Screen (REQUIRED):\n';
            instructions += '   - Go to "APIs & Services" > "OAuth consent screen"\n';
            instructions += '   - Choose "External" (or "Internal" if using Google Workspace)\n';
            instructions += '   - Fill in ALL required fields:\n';
            instructions += '     * App name (required)\n';
            instructions += '     * User support email (required)\n';
            instructions += '     * Developer contact information (required)\n';
            instructions += '   - Click "Save and Continue"\n';
            instructions += '   - On "Scopes" page, click "Add or Remove Scopes"\n';
            instructions += '   - Add these scopes:\n';
            instructions += '     * https://www.googleapis.com/auth/spreadsheets\n';
            instructions += '     * https://www.googleapis.com/auth/drive.file\n';
            instructions += '   - Click "Update" then "Save and Continue"\n';
            instructions += '   - On "Test users" (if External), add your Google account\n';
            instructions += '   - Click "Save and Continue" through remaining steps\n\n';
            instructions += '5. Configure OAuth 2.0 Client ID:\n';
            instructions += '   - Go to "APIs & Services" > "Credentials"\n';
            instructions += '   - Find your OAuth 2.0 Client ID (or create new one)\n';
            instructions += '   - Click on the Client ID to edit\n';
            instructions += '   - Under "Authorized JavaScript origins", click "ADD URI"\n';
            instructions += '   - Add EXACTLY (copy-paste, no trailing slash):\n';
            if (isLocalhost) {
                instructions += `     * ${currentOrigin}\n`;
                instructions += '     * http://localhost (if different port)\n';
                instructions += '     * http://127.0.0.1 (if using IP)\n';
            } else {
                instructions += `     * ${currentOrigin}\n`;
                // Also suggest without www if applicable
                if (currentOrigin.includes('www.')) {
                    instructions += `     * ${currentOrigin.replace('www.', '')}\n`;
                }
            }
            instructions += '   - Click "SAVE"\n';
            instructions += '   - Copy the Client ID and update it in the code\n\n';
            instructions += '6. Configure API Key:\n';
            instructions += '   - Go to "APIs & Services" > "Credentials"\n';
            instructions += '   - Click on your API key\n';
            instructions += '   - Under "API restrictions", select "Restrict key"\n';
            instructions += '   - Check "Google Sheets API" and "Google Drive API"\n';
            instructions += '   - Or set to "Don\'t restrict key" for testing\n';
            instructions += '   - Click "SAVE"\n';
            instructions += '   - Copy the API Key and update it in the code\n\n';
            instructions += '7. Wait 5-10 minutes for changes to propagate\n';
            instructions += '8. Refresh this page and try again\n\n';
            instructions += 'TROUBLESHOOTING:\n';
            instructions += '- Make sure origin has NO trailing slash\n';
            instructions += '- Origin must match EXACTLY (including http vs https)\n';
            instructions += '- OAuth consent screen must be fully configured (all steps completed)\n';
            instructions += '- If still failing, try creating a NEW OAuth client ID\n';

            return instructions;
        }

        async function connectGoogleSheets() {
            try {
                showToast('Initializing Google API...', 'info');

                await ensureGoogleAPILoaded();


                // Load client library
                await new Promise((resolve, reject) => {
                    if (window.gapi.client && window.gapi.client.sheets) {
                        // Already loaded
                        resolve();
                    } else {
                        window.gapi.load('client', {
                            callback: resolve,
                            onerror: reject,
                            timeout: 10000,
                            ontimeout: () => reject(new Error('Google API load timeout'))
                        });
                    }
                });

                // Check if already initialized
                if (!window.gapi.client.sheets) {
                    // Try to initialize the client with discovery document
                    // If this fails due to 403, we'll catch it and provide guidance
                    try {
                        await window.gapi.client.init({
                            apiKey: 'AIzaSyAyyXvJtpYb_L4UZtztccDqHB_peGXUxXU',
                            clientId: '415209089700-fp7cm5l9n53kkrfqkmhdo9k4f8n8omvt.apps.googleusercontent.com',
                            discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
                            scope: 'https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive.file'
                        });
                    } catch (initErr) {
                        // If discovery document fails, provide specific guidance
                        if (initErr.status === 403 || (initErr.result && initErr.result.error && initErr.result.error.code === 403)) {
                            throw new Error('API Key Access Denied (403). Please check:\n\n1. Go to Google Cloud Console > APIs & Services > Credentials\n2. Click on your API key\n3. Under "API restrictions", ensure "Google Sheets API" is allowed\n4. Or temporarily set to "Don\'t restrict key" for testing\n5. Save and wait a few minutes');
                        }
                        throw initErr;
                    }
                }

                // Load auth2 library
                await new Promise((resolve, reject) => {
                    if (window.gapi.auth2) {
                        resolve();
                    } else {
                        window.gapi.load('auth2', {
                            callback: resolve,
                            onerror: reject,
                            timeout: 10000,
                            ontimeout: () => reject(new Error('Google Auth2 load timeout'))
                        });
                    }
                });

                // Get current origin for validation
                const currentOrigin = window.location.origin;
                const isLocalhost = currentOrigin.includes('localhost') || currentOrigin.includes('127.0.0.1') || currentOrigin.includes('file://');

                // Initialize auth2 with proper error handling
                let authInstance;
                try {
                    // Check if already initialized
                    try {
                        authInstance = window.gapi.auth2.getAuthInstance();
                        if (authInstance) {
                            // Already initialized, use existing instance
                            console.log('Auth2 already initialized');
                        }
                    } catch (e) {
                        // Not initialized yet, proceed to initialize
                        console.log('Initializing auth2...');
                        console.log('Current origin:', currentOrigin);
                        console.log('Client ID:', '415209089700-fp7cm5l9n53kkrfqkmhdo9k4f8n8omvt.apps.googleusercontent.com');

                        // Initialize auth2 - returns a Thenable (promise-like)
                        const initPromise = window.gapi.auth2.init({
                            client_id: '415209089700-fp7cm5l9n53kkrfqkmhdo9k4f8n8omvt.apps.googleusercontent.com',
                            scope: 'https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive.file',
                            ux_mode: 'popup' // Use popup instead of redirect
                        });

                        // Wait for initialization to complete
                        await new Promise((resolve, reject) => {
                            initPromise.then(
                                () => {
                                    authInstance = window.gapi.auth2.getAuthInstance();
                                    resolve();
                                },
                                (error) => {
                                    reject(error);
                                }
                            );
                        });
                    }
                } catch (initError) {
                    console.error('Auth2 initialization error:', initError);
                    console.error('Error details:', JSON.stringify(initError, null, 2));

                    // Check for idpiframe_initialization_failed in various error formats
                    const errorString = JSON.stringify(initError);
                    const errorMessage = initError.message || initError.error || initError.details || errorString;

                    if (errorString.includes('idpiframe_initialization_failed') ||
                        errorMessage.includes('idpiframe_initialization_failed') ||
                        (initError.error && initError.error === 'idpiframe_initialization_failed') ||
                        (initError.details && initError.details === 'idpiframe_initialization_failed')) {

                        const setupInstructions = getGoogleSheetsSetupInstructions();
                        const detailedError = `OAuth initialization failed (idpiframe_initialization_failed).\n\n` +
                            `Current origin: "${currentOrigin}"\n\n` +
                            `CRITICAL: Make sure this EXACT origin is in "Authorized JavaScript origins":\n` +
                            `  "${currentOrigin}"\n\n` +
                            `Common issues:\n` +
                            `- Origin has trailing slash (WRONG: "${currentOrigin}/")\n` +
                            `- Origin doesn't match exactly\n` +
                            `- OAuth consent screen not fully configured\n` +
                            `- Changes not propagated yet (wait 5-10 minutes)\n\n` +
                            `Full setup instructions:\n\n${setupInstructions}`;

                        throw new Error(detailedError);
                    }

                    // For other errors, provide generic message
                    throw new Error(`OAuth initialization failed: ${errorMessage}\n\n${getGoogleSheetsSetupInstructions()}`);
                }

                // Sign in
                const isSignedIn = authInstance.isSignedIn.get();

                if (!isSignedIn) {
                    showToast('Please sign in to Google...', 'info');
                    try {
                        await authInstance.signIn({
                            scope: 'https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive.file'
                        });
                    } catch (signInError) {
                        if (signInError.error === 'popup_closed_by_user') {
                            throw new Error('Sign-in was cancelled. Please try again.');
                        }
                        throw signInError;
                    }
                }

                // Prompt for Google Sheets URL or ID
                const sheetUrl = prompt('Enter your Google Sheets URL or Sheet ID:');
                if (!sheetUrl) return;

                // Extract sheet ID from URL
                let sheetId = sheetUrl.trim();
                const match = sheetUrl.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);
                if (match) {
                    sheetId = match[1];
                }

                // Validate sheet ID format
                if (!/^[a-zA-Z0-9-_]+$/.test(sheetId)) {
                    throw new Error('Invalid Google Sheets ID format');
                }

                state.googleSheetsId = sheetId;
                state.isConnected = true;
                updateStatus(true);

                // Load data from Google Sheets
                showToast('Loading data from Google Sheets...', 'info');
                await readGoogleSheets();
                renderAll();

                showToast('Connected to Google Sheets successfully!', 'success');

            } catch (err) {
                console.error('Error connecting to Google Sheets:', err);
                let errorMessage = 'Error connecting to Google Sheets:\n\n';

                // Handle specific error types
                if (err.error) {
                    if (err.error.code === 403 || err.error.status === 'PERMISSION_DENIED') {
                        errorMessage += 'Access denied (403). Please check:\n';
                        errorMessage += '1. Google Sheets API is enabled in Google Cloud Console\n';
                        errorMessage += '2. API key has proper permissions (no restrictions blocking Sheets API)\n';
                        errorMessage += '3. OAuth consent screen is configured\n';
                        errorMessage += '4. Your domain/origin is added to authorized JavaScript origins';
                    } else if (err.error.message) {
                        errorMessage += err.error.message;
                    } else if (err.error.error_description) {
                        errorMessage += err.error.error_description;
                    } else {
                        errorMessage += JSON.stringify(err.error);
                    }
                } else if (err.details) {
                    errorMessage += err.details;
                } else if (err.message) {
                    errorMessage += err.message;
                } else {
                    errorMessage += 'Unknown error occurred. Check browser console for details.';
                }

                // Show detailed error in alert for better visibility
                alert(errorMessage);
                showToast('Connection failed. See alert for details.', 'error');
            }
        }

        async function readGoogleSheets() {
            try {
                if (!window.gapi.client.sheets) {
                    throw new Error('Google Sheets API not initialized');
                }

                // First, get spreadsheet metadata to verify access
                const spreadsheetResponse = await window.gapi.client.sheets.spreadsheets.get({
                    spreadsheetId: state.googleSheetsId
                });

                if (!spreadsheetResponse.result) {
                    throw new Error('Unable to access spreadsheet. Please check permissions.');
                }

                const sheetNames = ['Income', 'Expenses', 'Receivables', 'Payables', 'Plans', 'Budgets', 'Categories', 'Templates', 'Accounts', 'Transfers', 'FamilyMembers', 'Debts'];

                for (const sheetName of sheetNames) {
                    try {
                        const range = `${sheetName}!A:Z`;
                        const result = await window.gapi.client.sheets.spreadsheets.values.get({
                            spreadsheetId: state.googleSheetsId,
                            range: range
                        });

                        if (result.result && result.result.values && result.result.values.length > 0) {
                            const headers = result.result.values[0];
                            const rows = result.result.values.slice(1);
                            const data = rows.map(row => {
                                const obj = {};
                                headers.forEach((header, index) => {
                                    obj[header] = row[index] || '';
                                });
                                return obj;
                            });

                            const dataKey = sheetName.toLowerCase();
                            if (state.data[dataKey]) {
                                state.data[dataKey] = normalizeSheetData(data, dataKey);
                            }
                        }
                    } catch (err) {
                        // Sheet doesn't exist or is empty - this is OK, just skip it
                        console.log(`Sheet ${sheetName} not found or empty:`, err.message || err);
                    }
                }
            } catch (err) {
                console.error('Error reading Google Sheets:', err);
                let errorMsg = 'Error reading Google Sheets: ';
                if (err.result && err.result.error) {
                    errorMsg += err.result.error.message || JSON.stringify(err.result.error);
                } else if (err.message) {
                    errorMsg += err.message;
                } else {
                    errorMsg += 'Unknown error';
                }
                throw new Error(errorMsg);
            }
        }

        async function writeGoogleSheets() {
            if (!state.isConnected || !state.googleSheetsId) return;

            try {
                if (!window.gapi || !window.gapi.client || !window.gapi.client.sheets) {
                    throw new Error('Google Sheets API not initialized');
                }

                showToast('Saving to Google Sheets...', 'info');

                const sheetMappings = [
                    { name: 'Income', data: state.data.income },
                    { name: 'Expenses', data: state.data.expenses },
                    { name: 'Receivables', data: state.data.receivables },
                    { name: 'Payables', data: state.data.payables },
                    { name: 'Plans', data: state.data.plans },
                    { name: 'Budgets', data: state.data.budgets || [] },
                    { name: 'Categories', data: state.data.categories || [] },
                    { name: 'Templates', data: state.data.templates || [] },
                    { name: 'Accounts', data: state.data.accounts || [] },
                    { name: 'Transfers', data: state.data.transfers || [] },
                    { name: 'FamilyMembers', data: state.data.familyMembers || [] },
                    { name: 'Debts', data: state.data.debts || [] }
                ];

                // Prepare batch update requests
                const valueRanges = [];

                for (const mapping of sheetMappings) {
                    if (mapping.data.length === 0) {
                        // Clear sheet if no data
                        valueRanges.push({
                            range: `${mapping.name}!A:Z`,
                            values: [[]]
                        });
                        continue;
                    }

                    // Get headers from first object
                    const headers = Object.keys(mapping.data[0]);

                    // Convert data to 2D array
                    const values = [
                        headers, // Header row
                        ...mapping.data.map(row => headers.map(header => {
                            const value = row[header];
                            // Handle null/undefined
                            if (value === null || value === undefined) return '';
                            return String(value);
                        }))
                    ];

                    valueRanges.push({
                        range: `${mapping.name}!A1`,
                        values: values
                    });
                }

                // Use batchUpdate for better performance
                if (valueRanges.length > 0) {
                    const body = {
                        valueInputOption: 'RAW',
                        data: valueRanges
                    };

                    await window.gapi.client.sheets.spreadsheets.values.batchUpdate({
                        spreadsheetId: state.googleSheetsId,
                        resource: body
                    });
                }

                // Visual feedback
                const statusEl = document.getElementById('status-bar');
                statusEl.textContent = t('saved_successfully');
                setTimeout(() => updateStatus(true), 1500);

                showToast('Saved to Google Sheets successfully!', 'success');
            } catch (err) {
                console.error('Error writing to Google Sheets:', err);
                let errorMsg = 'Error saving to Google Sheets: ';
                if (err.result && err.result.error) {
                    errorMsg += err.result.error.message || JSON.stringify(err.result.error);
                } else if (err.message) {
                    errorMsg += err.message;
                } else {
                    errorMsg += 'Unknown error';
                }
                showToast(errorMsg, 'error');
            }
        }

        // Helper function to request directory permission for better reconnection
        async function requestDirectoryPermission() {
            try {
                if (window.showDirectoryPicker) {
                    // Ask user to select the directory containing the Excel file
                    // This helps us remember the location for future connections
                    const directoryHandle = await window.showDirectoryPicker({
                        mode: 'read'
                    });
                    return directoryHandle;
                }
            } catch (err) {
                if (err.name !== 'AbortError') {
                    console.error('Error requesting directory permission:', err);
                }
                return null;
            }
        }

        async function disconnectExcelFile() {
            if (confirm(t('are_you_sure_disconnect'))) {
                state.fileHandle = null;
                state.isConnected = false;
                await removeFileHandle();
                updateStatus(false);
                showToast('Disconnected from Excel file.', 'warning');
            }
        }

        async function restoreFileHandle(silent = true) {
            try {
                // Try to restore file handle (silent = true means don't show file picker automatically)
                const restoredHandle = await tryRestoreFileHandle(silent);

                if (restoredHandle && await verifyFileHandle(restoredHandle)) {
                    state.fileHandle = restoredHandle;
                    state.isConnected = true;
                    updateStatus(true);

                    // Load Data
                    await readExcelFile();
                    renderAll();

                    if (!silent) {
                        showToast('Restored connection to Excel file.', 'success');
                    }
                    return true;
                } else {
                    // No valid handle found, but keep metadata for manual reconnect
                    return false;
                }
            } catch (err) {
                console.error('Error restoring file handle:', err);
                return false;
            }
        }

        // Robust date parsing function - handles multiple formats
        function parseDate(dateValue) {
            if (!dateValue) return '';

            // Handle Date objects (from XLSX when raw: false)
            if (dateValue instanceof Date) {
                if (!isNaN(dateValue.getTime()) && dateValue.getFullYear() > 1900 && dateValue.getFullYear() < 2100) {
                    const year = dateValue.getFullYear();
                    const month = String(dateValue.getMonth() + 1).padStart(2, '0');
                    const day = String(dateValue.getDate()).padStart(2, '0');
                    return `${year}-${month}-${day}`;
                }
                return '';
            }

            // If it's already in ISO format (YYYY-MM-DD), return as is
            if (typeof dateValue === 'string' && /^\d{4}-\d{2}-\d{2}$/.test(dateValue.trim())) {
                return dateValue.trim();
            }

            // Try to parse as date
            let date = null;

            // Handle Excel date serial numbers (if XLSX converts them)
            if (typeof dateValue === 'number') {
                // Excel date serial number (days since 1900-01-01)
                const excelEpoch = new Date(1899, 11, 30);
                date = new Date(excelEpoch.getTime() + dateValue * 24 * 60 * 60 * 1000);
            } else if (typeof dateValue === 'string') {
                const str = dateValue.trim();

                // Try multiple date formats
                const formats = [
                    // ISO formats
                    /^(\d{4})-(\d{1,2})-(\d{1,2})$/,  // YYYY-MM-DD
                    /^(\d{4})\/(\d{1,2})\/(\d{1,2})$/, // YYYY/MM/DD
                    /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/, // MM/DD/YYYY or DD/MM/YYYY
                    /^(\d{1,2})-(\d{1,2})-(\d{4})$/,  // DD-MM-YYYY or MM-DD-YYYY
                    // Text formats
                    /^(\d{1,2})\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+(\d{4})$/i, // DD Month YYYY
                    /^(january|february|march|april|may|june|july|august|september|october|november|december)\s+(\d{1,2}),?\s+(\d{4})$/i, // Month DD, YYYY
                    /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+(\d{1,2}),?\s+(\d{4})$/i, // Mon DD, YYYY
                ];

                // Try ISO string parsing first
                date = new Date(str);
                if (!isNaN(date.getTime())) {
                    // Valid date, check if it's reasonable (not 1970)
                    if (date.getFullYear() > 1900 && date.getFullYear() < 2100) {
                        // Format as YYYY-MM-DD
                        const year = date.getFullYear();
                        const month = String(date.getMonth() + 1).padStart(2, '0');
                        const day = String(date.getDate()).padStart(2, '0');
                        return `${year}-${month}-${day}`;
                    }
                }

                // Try format-specific parsing
                const monthNames = ['january', 'february', 'march', 'april', 'may', 'june',
                    'july', 'august', 'september', 'october', 'november', 'december'];
                const monthShortNames = ['jan', 'feb', 'mar', 'apr', 'may', 'jun',
                    'jul', 'aug', 'sep', 'oct', 'nov', 'dec'];

                // Format: DD Month YYYY or DD Mon YYYY
                let match = str.match(/^(\d{1,2})\s+(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+(\d{4})$/i);
                if (match) {
                    const day = parseInt(match[1]);
                    const monthName = match[2].toLowerCase();
                    const year = parseInt(match[3]);
                    let month = monthNames.indexOf(monthName);
                    if (month === -1) month = monthShortNames.indexOf(monthName);
                    if (month !== -1 && day >= 1 && day <= 31 && year >= 1900 && year <= 2100) {
                        return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    }
                }

                // Format: Month DD, YYYY or Mon DD, YYYY
                match = str.match(/^(january|february|march|april|may|june|july|august|september|october|november|december|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+(\d{1,2}),?\s+(\d{4})$/i);
                if (match) {
                    const monthName = match[1].toLowerCase();
                    const day = parseInt(match[2]);
                    const year = parseInt(match[3]);
                    let month = monthNames.indexOf(monthName);
                    if (month === -1) month = monthShortNames.indexOf(monthName);
                    if (month !== -1 && day >= 1 && day <= 31 && year >= 1900 && year <= 2100) {
                        return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    }
                }

                // Format: YYYY/MM/DD or YYYY-MM-DD
                match = str.match(/^(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})$/);
                if (match) {
                    const year = parseInt(match[1]);
                    const month = parseInt(match[2]);
                    const day = parseInt(match[3]);
                    if (year >= 1900 && year <= 2100 && month >= 1 && month <= 12 && day >= 1 && day <= 31) {
                        return `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    }
                }

                // Format: DD/MM/YYYY or MM/DD/YYYY 
                // Prefer DD/MM/YYYY (more common international format)
                match = str.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/);
                if (match) {
                    const part1 = parseInt(match[1]);
                    const part2 = parseInt(match[2]);
                    const year = parseInt(match[3]);

                    // If both parts could be valid (e.g., 01/02/2025), prefer DD/MM/YYYY
                    // Try DD/MM/YYYY first (more common)
                    if (part1 >= 1 && part1 <= 31 && part2 >= 1 && part2 <= 12 && year >= 1900 && year <= 2100) {
                        // Validate it's a real date
                        const testDate = new Date(year, part2 - 1, part1);
                        if (testDate.getFullYear() === year && testDate.getMonth() === part2 - 1 && testDate.getDate() === part1) {
                            return `${year}-${String(part2).padStart(2, '0')}-${String(part1).padStart(2, '0')}`;
                        }
                    }
                    // Try MM/DD/YYYY as fallback
                    if (part1 >= 1 && part1 <= 12 && part2 >= 1 && part2 <= 31 && year >= 1900 && year <= 2100) {
                        const testDate = new Date(year, part1 - 1, part2);
                        if (testDate.getFullYear() === year && testDate.getMonth() === part1 - 1 && testDate.getDate() === part2) {
                            return `${year}-${String(part1).padStart(2, '0')}-${String(part2).padStart(2, '0')}`;
                        }
                    }
                }
            }

            // If all parsing fails, try native Date parsing as last resort
            if (!date) {
                date = new Date(dateValue);
            }

            if (date && !isNaN(date.getTime()) && date.getFullYear() > 1900 && date.getFullYear() < 2100) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }

            // Return empty string if parsing fails
            console.warn('Could not parse date:', dateValue);
            return '';
        }

        // Normalize numeric values - convert strings to numbers
        function parseNumber(value) {
            if (value === null || value === undefined || value === '') return 0;
            if (typeof value === 'number') return value;
            if (typeof value === 'string') {
                // Remove any currency symbols, commas, spaces
                const cleaned = value.toString().replace(/[‡ß≥$‚Ç¨¬£,\s]/g, '').trim();
                const num = parseFloat(cleaned);
                return isNaN(num) ? 0 : num;
            }
            return 0;
        }

        // Normalize data from Excel sheet
        function normalizeSheetData(items, sheetType) {
            if (!Array.isArray(items)) return [];

            return items.map(item => {
                const normalized = { ...item };

                // Normalize dates based on sheet type
                if (sheetType === 'income' || sheetType === 'expenses') {
                    if (normalized.date) normalized.date = parseDate(normalized.date);
                } else if (sheetType === 'receivables' || sheetType === 'payables') {
                    if (normalized.dueDate) normalized.dueDate = parseDate(normalized.dueDate);
                } else if (sheetType === 'plans') {
                    if (normalized.deadline) normalized.deadline = parseDate(normalized.deadline);
                }

                // Normalize numeric amounts
                if ('amount' in normalized) {
                    normalized.amount = parseNumber(normalized.amount);
                }
                if ('targetAmount' in normalized) {
                    normalized.targetAmount = parseNumber(normalized.targetAmount);
                }

                // Normalize boolean values (recurring)
                if ('recurring' in normalized) {
                    if (typeof normalized.recurring === 'string') {
                        normalized.recurring = normalized.recurring.toLowerCase() === 'true' || normalized.recurring === '1' || normalized.recurring === 'yes';
                    } else {
                        normalized.recurring = Boolean(normalized.recurring);
                    }
                }

                // Parse JSON strings back to arrays/objects for expenses
                if (sheetType === 'expenses') {
                    // Parse familyMembers from JSON string if it exists
                    if (normalized.familyMembers) {
                        if (typeof normalized.familyMembers === 'string') {
                            try {
                                normalized.familyMembers = JSON.parse(normalized.familyMembers);
                            } catch (e) {
                                // If parsing fails, try comma-separated string
                                if (normalized.familyMembers.includes(',')) {
                                    normalized.familyMembers = normalized.familyMembers.split(',').map(s => s.trim()).filter(Boolean);
                                } else {
                                    normalized.familyMembers = [normalized.familyMembers];
                                }
                            }
                        }
                        // Ensure it's an array
                        if (!Array.isArray(normalized.familyMembers)) {
                            normalized.familyMembers = undefined;
                        }
                    }
                    // Parse contributions from JSON string if it exists
                    if (normalized.contributions && typeof normalized.contributions === 'string') {
                        try {
                            normalized.contributions = JSON.parse(normalized.contributions);
                        } catch (e) {
                            normalized.contributions = undefined;
                        }
                    }
                }

                // Normalize boolean values for family members (active status)
                if (sheetType === 'familyMembers') {
                    if ('active' in normalized) {
                        if (typeof normalized.active === 'string') {
                            normalized.active = normalized.active.toLowerCase() !== 'false' && normalized.active !== '0' && normalized.active !== 'no';
                        } else {
                            normalized.active = normalized.active !== false && normalized.active !== 0;
                        }
                    } else {
                        // Default to active if not specified
                        normalized.active = true;
                    }
                }

                // Trim string fields
                Object.keys(normalized).forEach(key => {
                    if (typeof normalized[key] === 'string') {
                        normalized[key] = normalized[key].trim();
                    }
                });

                return normalized;
            });
        }

        async function readExcelFile() {
            try {
                if (state.connectionType === 'google-sheets') {
                    await readGoogleSheets();
                    return;
                }

                if (!state.fileHandle) return;

                const file = await state.fileHandle.getFile();
                const arrayBuffer = await file.arrayBuffer();
                const workbook = XLSX.read(arrayBuffer, { type: 'array' });

                const parseSheet = (name, sheetType) => {
                    try {
                        if (workbook.Sheets[name]) {
                            const rawData = XLSX.utils.sheet_to_json(workbook.Sheets[name], {
                                defval: '', // Default value for empty cells
                                raw: false  // Convert dates and numbers
                            });
                            return normalizeSheetData(rawData, sheetType);
                        }
                        return [];
                    } catch (err) {
                        console.error(`Error parsing sheet "${name}":`, err);
                        return [];
                    }
                };

                // Map sheets to state data with proper normalization
                state.data.income = parseSheet('Income', 'income');
                state.data.expenses = parseSheet('Expenses', 'expenses');
                state.data.receivables = parseSheet('Receivables', 'receivables');
                state.data.payables = parseSheet('Payables', 'payables');
                state.data.plans = parseSheet('Plans', 'plans');
                state.data.budgets = parseSheet('Budgets', 'budgets') || [];
                state.data.categories = parseSheet('Categories', 'categories') || [];
                state.data.templates = parseSheet('Templates', 'templates') || [];
                state.data.accounts = parseSheet('Accounts', 'accounts') || [];
                state.data.debts = parseSheet('Debts', 'debts') || [];
                state.data.transfers = parseSheet('Transfers', 'transfers') || [];
                state.data.familyMembers = parseSheet('FamilyMembers', 'familyMembers') || [];

                // Ensure arrays exist
                if (!Array.isArray(state.data.budgets)) state.data.budgets = [];
                if (!Array.isArray(state.data.categories)) state.data.categories = [];
                if (!Array.isArray(state.data.templates)) state.data.templates = [];
                if (!Array.isArray(state.data.accounts)) state.data.accounts = [];
                if (!Array.isArray(state.data.debts)) state.data.debts = [];
                if (!Array.isArray(state.data.transfers)) state.data.transfers = [];
                if (!Array.isArray(state.data.familyMembers)) state.data.familyMembers = [];
                if (!Array.isArray(state.data.transactionHistory)) state.data.transactionHistory = [];

            } catch (err) {
                console.error('Error reading Excel file:', err);
                showToast('Error reading Excel file. Please check the file format.', 'error');
                throw err;
            }
        }

        async function writeExcelFile() {
            if (!state.isConnected) return;

            try {
                if (state.connectionType === 'local') {
                    await writeLocalExcel();
                } else if (state.connectionType === 'google-sheets') {
                    await writeGoogleSheets();
                }
            } catch (err) {
                console.error('Save error:', err);
                alert(t('failed_to_save'));
            }
        }

        async function writeLocalExcel() {
            if (!state.fileHandle) return;

            try {
                // Create workbook
                const wb = XLSX.utils.book_new();

                // Prepare expenses data - convert arrays to JSON strings for Excel compatibility
                const expensesForExcel = (state.data.expenses || []).map(expense => {
                    const expenseCopy = { ...expense };
                    // Convert familyMembers array to JSON string if it exists
                    if (expenseCopy.familyMembers && Array.isArray(expenseCopy.familyMembers)) {
                        expenseCopy.familyMembers = JSON.stringify(expenseCopy.familyMembers);
                    }
                    // Convert contributions object to JSON string if it exists
                    if (expenseCopy.contributions && typeof expenseCopy.contributions === 'object') {
                        expenseCopy.contributions = JSON.stringify(expenseCopy.contributions);
                    }
                    return expenseCopy;
                });

                // Convert data to sheets
                const incomeSheet = XLSX.utils.json_to_sheet(state.data.income);
                const expensesSheet = XLSX.utils.json_to_sheet(expensesForExcel);
                const receivablesSheet = XLSX.utils.json_to_sheet(state.data.receivables);
                const payablesSheet = XLSX.utils.json_to_sheet(state.data.payables);
                const plansSheet = XLSX.utils.json_to_sheet(state.data.plans);
                const budgetsSheet = XLSX.utils.json_to_sheet(state.data.budgets || []);
                const categoriesSheet = XLSX.utils.json_to_sheet(state.data.categories || []);
                const templatesSheet = XLSX.utils.json_to_sheet(state.data.templates || []);
                const accountsSheet = XLSX.utils.json_to_sheet(state.data.accounts || []);
                const transfersSheet = XLSX.utils.json_to_sheet(state.data.transfers || []);
                const familyMembersSheet = XLSX.utils.json_to_sheet(state.data.familyMembers || []);

                // Append sheets
                XLSX.utils.book_append_sheet(wb, incomeSheet, "Income");
                XLSX.utils.book_append_sheet(wb, expensesSheet, "Expenses");
                XLSX.utils.book_append_sheet(wb, receivablesSheet, "Receivables");
                XLSX.utils.book_append_sheet(wb, payablesSheet, "Payables");
                XLSX.utils.book_append_sheet(wb, plansSheet, "Plans");
                XLSX.utils.book_append_sheet(wb, budgetsSheet, "Budgets");
                XLSX.utils.book_append_sheet(wb, categoriesSheet, "Categories");
                XLSX.utils.book_append_sheet(wb, templatesSheet, "Templates");
                XLSX.utils.book_append_sheet(wb, accountsSheet, "Accounts");
                XLSX.utils.book_append_sheet(wb, transfersSheet, "Transfers");
                XLSX.utils.book_append_sheet(wb, familyMembersSheet, "FamilyMembers");

                // Write to file
                const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });
                const writable = await state.fileHandle.createWritable();
                await writable.write(wbout);
                await writable.close();

                // Visual feedback (brief toast or status update)
                const statusEl = document.getElementById('status-bar');
                const originalText = statusEl.textContent;
                statusEl.textContent = t('saved_successfully');
                setTimeout(() => updateStatus(true), 1500);

            } catch (err) {
                console.error('Save error:', err);
                throw err;
            }
        }

        // --- 3. UI RENDERING ---

        // Toast notification function (defined early for use in other functions)
        function showToast(message, type = 'success') {
            // Remove existing toast
            const existingToast = document.querySelector('.toast');
            if (existingToast) existingToast.remove();

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            const icon = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ö†Ô∏è';
            toast.innerHTML = `<span>${icon}</span><span>${message}</span>`;
            document.body.appendChild(toast);

            // Show toast
            setTimeout(() => toast.classList.add('show'), 10);

            // Hide and remove toast after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function updateStatus(connected) {
            const el = document.getElementById('status-bar');
            const btn = document.getElementById('connect-btn');
            const refreshBtn = document.getElementById('refresh-btn');
            const exportBtn = document.getElementById('export-btn');
            const disconnectBtn = document.getElementById('disconnect-btn');
            const connectBtnMobile = document.getElementById('connect-btn-mobile');
            const mobileMenuContainer = document.getElementById('mobile-menu-container');

            if (connected) {
                el.className = 'status-bar status-connected';
                if (state.connectionType === 'google-sheets') {
                    el.textContent = `${t('connected_to')} Google Sheets`;
                } else {
                    el.textContent = `${t('connected_to')} ${CONFIG.fileName}`;
                }
                btn.innerHTML = `
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    Connected
                `;
                btn.disabled = true;
                btn.style.display = 'none'; // Hide connect button when connected

                // Hide mobile connect button, show mobile menu
                if (connectBtnMobile) {
                    connectBtnMobile.style.display = 'none';
                }
                if (mobileMenuContainer) {
                    mobileMenuContainer.style.display = 'block';
                }

                // Show Refresh and Export buttons
                if (refreshBtn) {
                    refreshBtn.disabled = false;
                    refreshBtn.style.display = 'inline-flex';
                    refreshBtn.style.alignItems = 'center';
                }
                if (exportBtn) {
                    exportBtn.disabled = false;
                    exportBtn.style.display = 'inline-flex';
                    exportBtn.style.alignItems = 'center';
                }
                if (disconnectBtn) {
                    disconnectBtn.style.display = 'inline-flex';
                    disconnectBtn.style.alignItems = 'center';
                }
            } else {
                el.className = 'status-bar status-disconnected';
                el.textContent = t('disconnected') + '. ' + t('please_connect');
                btn.innerHTML = `
                    <svg width="16" height="16" viewBox="-0.08 0 1.28 1.28" xmlns="http://www.w3.org/2000/svg"><path d="M.103 0a.1.1 0 0 0-.101.102v1.077a.1.1 0 0 0 .101.101h.915a.1.1 0 0 0 .101-.101V.406L.742 0z" fill-rule="evenodd" clip-rule="evenodd" fill="#0c8fe8"/><g fill-rule="evenodd" clip-rule="evenodd"><path d="M1.12.407v.02H.864S.738.402.741.293c0 0 .004.114.12.114z" fill="#0973e2"/><path d="M.741 0v.291c0 .033.022.116.122.116h.256z" opacity=".5" fill="#fff"/></g><path d="M.565.712a.106.106 0 0 0-.151 0L.353.773a.11.11 0 0 0 0 .151.025.025 0 0 0 .035 0 .024.024 0 0 0 0-.035.06.06 0 0 1 0-.082L.45.746a.057.057 0 0 1 .081 0 .06.06 0 0 1 0 .081l-.029.03q.01.03.008.061L.566.862a.106.106 0 0 0 0-.151M.412.83a.025.025 0 0 0 0 .035.057.057 0 0 1 0 .081l-.061.061a.057.057 0 0 1-.081 0 .06.06 0 0 1 0-.081L.299.897A.14.14 0 0 1 .291.835L.235.891a.106.106 0 0 0 0 .151.11.11 0 0 0 .151 0L.448.98a.106.106 0 0 0 0-.151.025.025 0 0 0-.035 0" fill="#fff"/></svg>
                `;
                btn.disabled = false;
                btn.style.display = 'inline-flex'; // Show connect button when disconnected

                // Show mobile connect button, hide mobile menu
                if (connectBtnMobile) {
                    connectBtnMobile.style.display = 'inline-flex';
                }
                if (mobileMenuContainer) {
                    mobileMenuContainer.style.display = 'none';
                }

                // Hide Refresh and Export buttons
                if (refreshBtn) {
                    refreshBtn.disabled = true;
                    refreshBtn.style.display = 'none';
                }
                if (exportBtn) {
                    exportBtn.disabled = true;
                    exportBtn.style.display = 'none';
                }
                if (disconnectBtn) {
                    disconnectBtn.style.display = 'none';
                }
            }
        }

        async function refreshData() {
            if (!state.isConnected || !state.fileHandle) {
                showToast('Please connect to Excel file first.', 'warning');
                return;
            }

            try {
                const refreshBtn = document.getElementById('refresh-btn');
                if (refreshBtn) {
                    refreshBtn.disabled = true;
                    refreshBtn.innerHTML = `
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="animation: spin 1s linear infinite;">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                        Refreshing...
                    `;
                }

                await readExcelFile();
                renderAll();
                showToast('Data refreshed successfully!', 'success');
            } catch (err) {
                console.error('Error refreshing data:', err);
                showToast('Error refreshing data. Please check the file.', 'error');
                // If file handle is invalid, disconnect
                if (err.name === 'NotFoundError' || err.name === 'NotAllowedError') {
                    await disconnectExcelFile();
                }
            } finally {
                const refreshBtn = document.getElementById('refresh-btn');
                if (refreshBtn && state.isConnected) {
                    refreshBtn.disabled = false;
                    refreshBtn.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" xml:space="preserve" width="16" height="16"><path fill="none" stroke="#000" stroke-miterlimit="10" d="M12.85 5.45A5.47 5.47 0 0 0 8 2.5C5.65 2.5 3.7 3.95 2.9 6m.2 4.5c.9 1.75 2.75 3 4.9 3 2.35 0 4.3-1.45 5.1-3.5"/><path fill="none" stroke="#000" stroke-miterlimit="10" d="M13 2.5v3h-3m-7 8v-3h3"/></svg>
                    `;
                }
            }
        }

        function formatCurrency(amount) {
            return CONFIG.currency + Number(amount).toLocaleString('en-BD');
        }

        // Format date according to user's date format setting
        function formatDate(dateValue) {
            if (!dateValue) return '';

            // Get date format from settings
            const settings = getSettings();
            const dateFormat = settings.dateFormat || CONFIG.dateFormat || 'YYYY-MM-DD';

            // Parse the date value (could be string in YYYY-MM-DD format or Date object)
            let date;
            if (dateValue instanceof Date) {
                date = dateValue;
            } else if (typeof dateValue === 'string') {
                // If it's already in YYYY-MM-DD format, parse it
                if (/^\d{4}-\d{2}-\d{2}$/.test(dateValue)) {
                    const parts = dateValue.split('-');
                    date = new Date(parseInt(parts[0]), parseInt(parts[1]) - 1, parseInt(parts[2]));
                } else {
                    date = new Date(dateValue);
                }
            } else {
                return '';
            }

            // Check if date is valid
            if (isNaN(date.getTime())) return '';

            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');

            // Format according to setting
            switch (dateFormat) {
                case 'DD/MM/YYYY':
                    return `${day}/${month}/${year}`;
                case 'MM/DD/YYYY':
                    return `${month}/${day}/${year}`;
                case 'DD-MM-YYYY':
                    return `${day}-${month}-${year}`;
                case 'YYYY-MM-DD':
                default:
                    return `${year}-${month}-${day}`;
            }
        }

        function switchTab(tabId) {
            // Update Tab UI
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            const activeTab = Array.from(document.querySelectorAll('.nav-tab')).find(t => t.innerText.toLowerCase().includes(tabId === 'plans' ? 'future' : tabId));
            if (activeTab) activeTab.classList.add('active');

            // Hide all views
            document.getElementById('view-dashboard')?.classList.add('hidden');
            document.getElementById('view-list')?.classList.add('hidden');
            document.getElementById('view-plans')?.classList.add('hidden');
            document.getElementById('view-budgets')?.classList.add('hidden');
            document.getElementById('view-reports')?.classList.add('hidden');
            document.getElementById('view-analytics')?.classList.add('hidden');
            document.getElementById('view-categories')?.classList.add('hidden');
            document.getElementById('view-templates')?.classList.add('hidden');
            document.getElementById('view-accounts')?.classList.add('hidden');
            document.getElementById('view-family')?.classList.add('hidden');
            document.getElementById('view-family')?.classList.add('hidden');
            document.getElementById('view-transfers')?.classList.add('hidden');
            document.getElementById('view-debts')?.classList.add('hidden');
            document.getElementById('view-recurring')?.classList.add('hidden');
            document.getElementById('view-calendar')?.classList.add('hidden');
            document.getElementById('view-cashflow')?.classList.add('hidden');
            document.getElementById('view-investments')?.classList.add('hidden');
            document.getElementById('view-settings')?.classList.add('hidden');

            // Show selected view
            if (tabId === 'dashboard') {
                document.getElementById('view-dashboard').classList.remove('hidden');
                renderDashboard();
            } else if (tabId === 'plans') {
                document.getElementById('view-plans').classList.remove('hidden');
                renderPlansList();
            } else if (tabId === 'budgets') {
                document.getElementById('view-budgets').classList.remove('hidden');
                renderBudgetsList();
            } else if (tabId === 'reports') {
                document.getElementById('view-reports').classList.remove('hidden');
                renderReports();
            } else if (tabId === 'analytics') {
                document.getElementById('view-analytics').classList.remove('hidden');
                renderAnalytics();
            } else if (tabId === 'settings') {
                document.getElementById('view-settings').classList.remove('hidden');
                loadSettings();
            } else if (tabId === 'categories') {
                document.getElementById('view-categories').classList.remove('hidden');
                renderCategoriesList();
            } else if (tabId === 'templates') {
                document.getElementById('view-templates').classList.remove('hidden');
                renderTemplatesList();
            } else if (tabId === 'accounts') {
                document.getElementById('view-accounts').classList.remove('hidden');
                renderAccountsList();
            } else if (tabId === 'family') {
                document.getElementById('view-family').classList.remove('hidden');
                renderFamilyMembersList();
            } else if (tabId === 'transfers') {
                document.getElementById('view-transfers').classList.remove('hidden');
                renderTransfersList();
            } else if (tabId === 'debts') {
                document.getElementById('view-debts').classList.remove('hidden');
                renderDebtsList();
            } else if (tabId === 'recurring') {
                document.getElementById('view-recurring').classList.remove('hidden');
                renderRecurringList();
            } else if (tabId === 'calendar') {
                const calendarView = document.getElementById('view-calendar');
                if (calendarView) {
                    calendarView.classList.remove('hidden');
                    renderFinancialCalendar();
                }
            } else if (tabId === 'cashflow') {
                const cashflowView = document.getElementById('view-cashflow');
                if (cashflowView) {
                    cashflowView.classList.remove('hidden');
                    renderCashFlow();
                }
            } else if (tabId === 'investments') {
                const investmentsView = document.getElementById('view-investments');
                if (investmentsView) {
                    investmentsView.classList.remove('hidden');
                    renderInvestmentsList();
                }
            } else {
                document.getElementById('view-list').classList.remove('hidden');
                renderListTable(tabId);
            }

            // Re-translate after switching tabs
            setTimeout(() => translatePage(), 100);
        }

        function renderAll() {
            // Save current filter state if on a list view
            let savedFilterState = null;
            if (currentListType && document.getElementById('view-list') && !document.getElementById('view-list').classList.contains('hidden')) {
                savedFilterState = {
                    searchTerm: document.getElementById('search-input')?.value || '',
                    categoryFilter: document.getElementById('category-filter')?.value || '',
                    dateFrom: document.getElementById('date-from-filter')?.value || '',
                    dateTo: document.getElementById('date-to-filter')?.value || '',
                    recurringFilter: document.getElementById('recurring-filter')?.value || '',
                    sortBy: document.getElementById('sort-by')?.value || '',
                    listType: currentListType
                };
            }

            // Determine current tab and render it specifically
            const activeTab = document.querySelector('.nav-tab.active');
            if (activeTab) {
                if (activeTab.innerText.includes('Dashboard') || activeTab.innerText.includes(t('dashboard'))) switchTab('dashboard');
                else if (activeTab.innerText.includes('Future') || activeTab.innerText.includes(t('plans'))) switchTab('plans');
                else switchTab(activeTab.getAttribute('onclick').match(/'([^']+)'/)[1]);
            } else {
                switchTab('dashboard');
            }

            // Re-translate after rendering
            setTimeout(() => translatePage(), 100);

            // Restore filter state if we were on a list view
            if (savedFilterState && savedFilterState.listType === currentListType) {
                setTimeout(() => {
                    const searchInput = document.getElementById('search-input');
                    const categoryFilter = document.getElementById('category-filter');
                    const dateFromFilter = document.getElementById('date-from-filter');
                    const dateToFilter = document.getElementById('date-to-filter');
                    const recurringFilter = document.getElementById('recurring-filter');
                    const sortBy = document.getElementById('sort-by');

                    if (searchInput) searchInput.value = savedFilterState.searchTerm;
                    if (categoryFilter) categoryFilter.value = savedFilterState.categoryFilter;
                    if (dateFromFilter) dateFromFilter.value = savedFilterState.dateFrom;
                    if (dateToFilter) dateToFilter.value = savedFilterState.dateTo;
                    if (recurringFilter) recurringFilter.value = savedFilterState.recurringFilter;
                    if (sortBy) sortBy.value = savedFilterState.sortBy;

                    // Reapply filters
                    applyFilters();
                }, 100);
            }
        }

        // Calculate total savings (reusable function)
        function calculateTotalSavings() {
            if (!state.data) return 0;
            const income = Array.isArray(state.data.income) ? state.data.income : [];
            const expenses = Array.isArray(state.data.expenses) ? state.data.expenses : [];
            const receivables = Array.isArray(state.data.receivables) ? state.data.receivables : [];

            const totalIncome = income.reduce((sum, i) => sum + Number(i?.amount || 0), 0);
            const totalExpenses = expenses.reduce((sum, i) => sum + Number(i?.amount || 0), 0);
            const netBalance = totalIncome - totalExpenses;
            const totalReceivables = receivables
                .filter(i => (i?.status || 'unpaid') === 'unpaid')
                .reduce((sum, i) => sum + Number(i?.amount || 0), 0);
            return totalReceivables + (netBalance > 0 ? netBalance : 0);
        }

        function renderDashboard() {
            // Ensure state.data exists and has required arrays
            if (!state.data) {
                state.data = {
                    income: [],
                    expenses: [],
                    receivables: [],
                    payables: [],
                    plans: [],
                    budgets: [],
                    categories: [],
                    templates: [],
                    accounts: [],
                    tags: [],
                    transactionHistory: []
                };
            }

            // Ensure arrays exist
            if (!Array.isArray(state.data.income)) state.data.income = [];
            if (!Array.isArray(state.data.expenses)) state.data.expenses = [];
            if (!Array.isArray(state.data.receivables)) state.data.receivables = [];
            if (!Array.isArray(state.data.payables)) state.data.payables = [];

            // Calculate Stats
            const totalIncome = state.data.income.reduce((sum, i) => sum + Number(i.amount || 0), 0);
            const totalExpenses = state.data.expenses.reduce((sum, i) => sum + Number(i.amount || 0), 0);
            const netBalance = totalIncome - totalExpenses;
            const totalSavings = calculateTotalSavings();

            const totalReceivables = state.data.receivables
                .filter(i => (i.status || 'unpaid') === 'unpaid')
                .reduce((sum, i) => sum + Number(i.amount || 0), 0);
            const totalPayables = state.data.payables
                .filter(i => (i.status || 'unpaid') === 'unpaid')
                .reduce((sum, i) => sum + Number(i.amount || 0), 0);

            const dashIncomeEl = document.getElementById('dash-income');
            if (dashIncomeEl) dashIncomeEl.textContent = formatCurrency(totalIncome);
            const dashExpensesEl = document.getElementById('dash-expenses');
            if (dashExpensesEl) dashExpensesEl.textContent = formatCurrency(totalExpenses);
            const dashBalanceEl = document.getElementById('dash-balance');
            if (dashBalanceEl) dashBalanceEl.textContent = formatCurrency(netBalance);
            const dashSavingsEl = document.getElementById('dash-savings');
            if (dashSavingsEl) dashSavingsEl.textContent = formatCurrency(totalSavings);
            const dashReceivablesEl = document.getElementById('dash-receivables-total');
            if (dashReceivablesEl) dashReceivablesEl.textContent = formatCurrency(totalReceivables);
            const dashPayablesEl = document.getElementById('dash-payables-total');
            if (dashPayablesEl) dashPayablesEl.textContent = formatCurrency(totalPayables);

            // Calculate current month totals
            const now = new Date();
            const currentMonth = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`; // YYYY-MM

            const currentMonthIncome = state.data.income
                .filter(item => item.date && item.date.substring(0, 7) === currentMonth)
                .reduce((sum, item) => sum + Number(item.amount || 0), 0);

            const currentMonthExpenses = state.data.expenses
                .filter(item => item.date && item.date.substring(0, 7) === currentMonth)
                .reduce((sum, item) => sum + Number(item.amount || 0), 0);

            const currentMonthBalance = currentMonthIncome - currentMonthExpenses;

            const dashCurrentMonthIncomeEl = document.getElementById('dash-current-month-income');
            if (dashCurrentMonthIncomeEl) dashCurrentMonthIncomeEl.textContent = formatCurrency(currentMonthIncome);
            const dashCurrentMonthExpensesEl = document.getElementById('dash-current-month-expenses');
            if (dashCurrentMonthExpensesEl) dashCurrentMonthExpensesEl.textContent = formatCurrency(currentMonthExpenses);
            const dashCurrentMonthBalanceEl = document.getElementById('dash-current-month-balance');
            if (dashCurrentMonthBalanceEl) dashCurrentMonthBalanceEl.textContent = formatCurrency(currentMonthBalance);

            // Render Alerts
            renderDashboardAlerts();

            // Render Monthly Comparison
            renderMonthlyComparison();

            // Render Quick Insights
            renderQuickInsights(totalIncome, totalExpenses);

            // Render Charts
            renderCharts();

            // Render Bill Reminders
            renderBillReminders();

            // Render Family Members Overview
            renderFamilyMembersOverview();

            // Re-translate after rendering dashboard
            setTimeout(() => translatePage(), 50);

            // Render Dashboard Lists (Top 5)
            const renderSmallList = (items, containerId, type) => {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                // Filter out paid payables for dashboard display
                const filteredItems = type === 'payable'
                    ? items.filter(item => (item.status || 'unpaid') === 'unpaid')
                    : items;
                const list = filteredItems.slice(0, 5); // Show top 5

                if (list.length === 0) {
                    container.innerHTML = `<div style="color:#cbd5e0; font-style:italic;">${t('no_items')}</div>`;
                    return;
                }

                list.forEach((item, idx) => {
                    const row = document.createElement('div');
                    row.style.cssText = "display:flex; justify-content:space-between; padding:0.5rem 0; border-bottom:1px solid #f7fafc;";
                    const title = type === 'receivable' ? (item.from || 'Unknown') : (item.to || 'Unknown');
                    const statusBadge = type === 'payable' || type === 'receivable'
                        ? '<span style="background: #e53e3e; color: white; padding: 0.125rem 0.375rem; border-radius: 3px; font-size: 0.625rem; margin-left: 0.25rem;">Unpaid</span>'
                        : '';
                    row.innerHTML = `
                        <span>${title} <small style="color:#a0aec0">(${item.dueDate ? formatDate(item.dueDate) : '-'})</small>${statusBadge}</span>
                        <strong style="color: ${type === 'receivable' ? 'var(--success)' : 'var(--danger)'}">${formatCurrency(item.amount)}</strong>
                    `;
                    container.appendChild(row);
                });
            };

            renderSmallList(state.data.receivables, 'dash-receivables-list', 'receivable');
            renderSmallList(state.data.payables, 'dash-payables-list', 'payable');
        }

        function renderDashboardAlerts() {
            const alertsContainer = document.getElementById('dashboard-alerts');
            if (!alertsContainer) return;

            alertsContainer.innerHTML = '';
            const alerts = [];

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            // Check overdue receivables (only unpaid)
            const overdueReceivables = state.data.receivables.filter(item => {
                if ((item.status || 'unpaid') === 'paid') return false;
                if (!item.dueDate) return false;
                const due = new Date(item.dueDate);
                due.setHours(0, 0, 0, 0);
                return due < today;
            });

            // Check overdue payables (only unpaid)
            const overduePayables = state.data.payables.filter(item => {
                if ((item.status || 'unpaid') === 'paid') return false;
                if (!item.dueDate) return false;
                const due = new Date(item.dueDate);
                due.setHours(0, 0, 0, 0);
                return due < today;
            });

            // Check due soon (within 3 days) - only unpaid
            const dueSoonReceivables = state.data.receivables.filter(item => {
                if ((item.status || 'unpaid') === 'paid') return false;
                if (!item.dueDate) return false;
                const due = new Date(item.dueDate);
                due.setHours(0, 0, 0, 0);
                const diffDays = Math.ceil((due - today) / (1000 * 60 * 60 * 24));
                return diffDays >= 0 && diffDays <= 3 && !overdueReceivables.includes(item);
            });

            const dueSoonPayables = state.data.payables.filter(item => {
                if ((item.status || 'unpaid') === 'paid') return false;
                if (!item.dueDate) return false;
                const due = new Date(item.dueDate);
                due.setHours(0, 0, 0, 0);
                const diffDays = Math.ceil((due - today) / (1000 * 60 * 60 * 24));
                return diffDays >= 0 && diffDays <= 3 && !overduePayables.includes(item);
            });

            // Check over-budget categories (with period filtering)
            const filterExpensesByPeriod = (expenses, periodType) => {
                const today = new Date();
                today.setHours(0, 0, 0, 0);

                return expenses.filter(exp => {
                    if (!exp.date) return false;
                    const expDate = new Date(exp.date);
                    expDate.setHours(0, 0, 0, 0);

                    switch (periodType) {
                        case 'daily':
                            return expDate.getTime() === today.getTime();
                        case 'monthly':
                            return expDate.getMonth() === today.getMonth() &&
                                expDate.getFullYear() === today.getFullYear();
                        case 'per 3 month':
                            const threeMonthsAgo = new Date(today);
                            threeMonthsAgo.setMonth(today.getMonth() - 3);
                            return expDate >= threeMonthsAgo && expDate <= today;
                        case 'per 6 month':
                            const sixMonthsAgo = new Date(today);
                            sixMonthsAgo.setMonth(today.getMonth() - 6);
                            return expDate >= sixMonthsAgo && expDate <= today;
                        case 'yearly':
                            return expDate.getFullYear() === today.getFullYear();
                        default:
                            return true; // fallback to all expenses
                    }
                });
            };

            const overBudgetCategories = (state.data.budgets || []).filter(budget => {
                const category = budget.category;
                const budgetAmount = Number(budget.amount || 0);
                const period = budget.period || 'monthly';

                const periodExpenses = filterExpensesByPeriod(
                    state.data.expenses.filter(exp => exp.category === category),
                    period
                );
                const actualSpending = periodExpenses.reduce((sum, exp) => sum + Number(exp.amount || 0), 0);
                return actualSpending > budgetAmount;
            });

            // Add alerts
            if (overdueReceivables.length > 0) {
                const total = overdueReceivables.reduce((sum, item) => sum + Number(item.amount || 0), 0);
                alerts.push({
                    type: 'danger',
                    message: `‚ö†Ô∏è You have ${overdueReceivables.length} overdue receivable${overdueReceivables.length > 1 ? 's' : ''} totaling ${formatCurrency(total)}`,
                    action: () => switchTab('receivables')
                });
            }

            if (overduePayables.length > 0) {
                const total = overduePayables.reduce((sum, item) => sum + Number(item.amount || 0), 0);
                alerts.push({
                    type: 'danger',
                    message: `‚ö†Ô∏è You have ${overduePayables.length} overdue payable${overduePayables.length > 1 ? 's' : ''} totaling ${formatCurrency(total)}`,
                    action: () => switchTab('payables')
                });
            }

            if (dueSoonReceivables.length > 0) {
                const total = dueSoonReceivables.reduce((sum, item) => sum + Number(item.amount || 0), 0);
                alerts.push({
                    type: 'warning',
                    message: `üìÖ ${dueSoonReceivables.length} receivable${dueSoonReceivables.length > 1 ? 's' : ''} due soon (within 3 days) - ${formatCurrency(total)}`,
                    action: () => switchTab('receivables')
                });
            }

            if (dueSoonPayables.length > 0) {
                const total = dueSoonPayables.reduce((sum, item) => sum + Number(item.amount || 0), 0);
                alerts.push({
                    type: 'warning',
                    message: `üìÖ ${dueSoonPayables.length} payable${dueSoonPayables.length > 1 ? 's' : ''} due soon (within 3 days) - ${formatCurrency(total)}`,
                    action: () => switchTab('payables')
                });
            }

            if (overBudgetCategories.length > 0) {
                alerts.push({
                    type: 'warning',
                    message: `üí∞ ${overBudgetCategories.length} budget${overBudgetCategories.length > 1 ? 's' : ''} exceeded`,
                    action: () => switchTab('budgets')
                });
            }

            // Render alerts
            alerts.forEach(alert => {
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert-banner ${alert.type === 'danger' ? '' : alert.type === 'warning' ? 'warning' : 'info'}`;
                alertDiv.innerHTML = `
                    <div style="flex: 1;">${alert.message}</div>
                    <button class="btn btn-secondary" onclick="alert.action(); closeAlert(this)" style="width: auto; padding: 0.5rem 1rem;">View</button>
                `;
                alertsContainer.appendChild(alertDiv);
            });
        }

        function closeAlert(button) {
            button.closest('.alert-banner').remove();
        }

        function renderMonthlyComparison() {
            const container = document.getElementById('monthly-comparison-content');
            if (!container) return;

            const monthlyData = getMonthlyData();
            if (monthlyData.labels.length < 2) {
                container.innerHTML = `<div style="color: var(--text-light); padding: 1rem; text-align: center;">${t('not_enough_data')}</div>`;
                return;
            }

            const currentMonthIdx = monthlyData.labels.length - 1;
            const previousMonthIdx = monthlyData.labels.length - 2;

            const currentMonth = monthlyData.labels[currentMonthIdx];
            const previousMonth = monthlyData.labels[previousMonthIdx];

            const currentIncome = monthlyData.income[currentMonthIdx] || 0;
            const previousIncome = monthlyData.income[previousMonthIdx] || 0;
            const incomeDiff = currentIncome - previousIncome;

            const currentExpenses = monthlyData.expenses[currentMonthIdx] || 0;
            const previousExpenses = monthlyData.expenses[previousMonthIdx] || 0;
            const expenseDiff = currentExpenses - previousExpenses;

            const currentSavings = currentIncome - currentExpenses;
            const previousSavings = previousIncome - previousExpenses;
            const savingsDiff = currentSavings - previousSavings;

            container.innerHTML = `
                <div class="comparison-row">
                    <div class="comparison-label" data-translate="month">Month</div>
                    <div class="comparison-values">
                        <div class="comparison-value"><strong>${previousMonth}</strong></div>
                        <div class="comparison-value"><strong>${currentMonth}</strong></div>
                        <div class="comparison-value" style="min-width: 120px;"><strong>Difference</strong></div>
                    </div>
                </div>
                <div class="comparison-row">
                    <div class="comparison-label" data-translate="income">Income</div>
                    <div class="comparison-values">
                        <div class="comparison-value">${formatCurrency(previousIncome)}</div>
                        <div class="comparison-value">${formatCurrency(currentIncome)}</div>
                        <div class="comparison-value">
                            <span class="comparison-diff ${incomeDiff >= 0 ? 'positive' : 'negative'}">
                                ${incomeDiff >= 0 ? '+' : ''}${formatCurrency(incomeDiff)}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="comparison-row">
                    <div class="comparison-label" data-translate="expenses">Expenses</div>
                    <div class="comparison-values">
                        <div class="comparison-value">${formatCurrency(previousExpenses)}</div>
                        <div class="comparison-value">${formatCurrency(currentExpenses)}</div>
                        <div class="comparison-value">
                            <span class="comparison-diff ${expenseDiff <= 0 ? 'positive' : 'negative'}">
                                ${expenseDiff >= 0 ? '+' : ''}${formatCurrency(expenseDiff)}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="comparison-row">
                    <div class="comparison-label" data-translate="savings">Savings</div>
                    <div class="comparison-values">
                        <div class="comparison-value">${formatCurrency(previousSavings)}</div>
                        <div class="comparison-value">${formatCurrency(currentSavings)}</div>
                        <div class="comparison-value">
                            <span class="comparison-diff ${savingsDiff >= 0 ? 'positive' : 'negative'}">
                                ${savingsDiff >= 0 ? '+' : ''}${formatCurrency(savingsDiff)}
                            </span>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderQuickInsights(totalIncome, totalExpenses) {
            // Calculate average monthly expense
            const monthlyData = getMonthlyData();
            const avgMonthlyExpense = monthlyData.expenses.length > 0
                ? monthlyData.expenses.reduce((a, b) => a + b, 0) / monthlyData.expenses.length
                : 0;
            const expenseEl = document.getElementById('avg-monthly-expense');
            if (expenseEl) expenseEl.textContent = formatCurrency(avgMonthlyExpense);

            // Calculate average monthly income
            const avgMonthlyIncome = monthlyData.income.length > 0
                ? monthlyData.income.reduce((a, b) => a + b, 0) / monthlyData.income.length
                : 0;
            const incomeEl = document.getElementById('avg-monthly-income');
            if (incomeEl) incomeEl.textContent = formatCurrency(avgMonthlyIncome);

            // Top spending category
            const expenseCategories = getCategoryData('expenses');
            const topCategory = expenseCategories.labels.length > 0 ? expenseCategories.labels[0] : '-';
            const topCategoryEl = document.getElementById('top-category');
            if (topCategoryEl) topCategoryEl.textContent = topCategory;
            const topCategoryAmountEl = document.getElementById('top-category-amount');
            if (topCategoryAmountEl && expenseCategories.labels.length > 0 && expenseCategories.values && expenseCategories.values.length > 0) {
                topCategoryAmountEl.textContent = formatCurrency(expenseCategories.values[0]);
            } else if (topCategoryAmountEl) {
                topCategoryAmountEl.textContent = formatCurrency(0);
            }

            // Average transaction size
            const incomeArray = state.data && Array.isArray(state.data.income) ? state.data.income : [];
            const expensesArray = state.data && Array.isArray(state.data.expenses) ? state.data.expenses : [];
            const totalTransactions = incomeArray.length + expensesArray.length;
            const avgTransaction = totalTransactions > 0
                ? (totalIncome + totalExpenses) / totalTransactions
                : 0;
            const avgTransEl = document.getElementById('avg-transaction');
            if (avgTransEl) avgTransEl.textContent = formatCurrency(avgTransaction);

            // Average monthly savings
            const avgMonthlySavings = avgMonthlyIncome - avgMonthlyExpense;
            const savingsEl = document.getElementById('avg-monthly-savings');
            if (savingsEl) savingsEl.textContent = formatCurrency(avgMonthlySavings);
            const savingsTrendEl = document.getElementById('savings-trend');
            if (savingsTrendEl) {
                savingsTrendEl.className = 'insight-trend ' + (avgMonthlySavings >= 0 ? 'trend-up' : 'trend-down');
                savingsTrendEl.textContent = avgMonthlySavings >= 0 ? t('positive_monthly_savings') : t('negative_monthly_savings');
            }

            // Transaction count breakdown
            const transCountEl = document.getElementById('transaction-count');
            if (transCountEl) transCountEl.textContent = totalTransactions;
            const transBreakdownEl = document.getElementById('transaction-breakdown');
            if (transBreakdownEl) {
                transBreakdownEl.textContent = `${state.data.income.length} ${t('income_comma_expenses')}, ${state.data.expenses.length} ${t('expenses_word')}`;
            }

            // Calculate trends (compare last 2 months if available)
            if (monthlyData.expenses.length >= 2) {
                const recent = monthlyData.expenses.slice(-2);
                const expenseChange = recent[1] - recent[0];
                const expenseTrendEl = document.getElementById('expense-trend');
                if (expenseTrendEl) {
                    expenseTrendEl.className = 'insight-trend ' + (expenseChange < 0 ? 'trend-up' : 'trend-down');
                    expenseTrendEl.textContent = expenseChange < 0
                        ? `‚Üì ${formatCurrency(Math.abs(expenseChange))} vs last month`
                        : `‚Üë ${formatCurrency(expenseChange)} vs last month`;
                }
            }

            if (monthlyData.income.length >= 2) {
                const recent = monthlyData.income.slice(-2);
                const incomeChange = recent[1] - recent[0];
                const incomeTrendEl = document.getElementById('income-trend');
                if (incomeTrendEl) {
                    incomeTrendEl.className = 'insight-trend ' + (incomeChange > 0 ? 'trend-up' : 'trend-down');
                    incomeTrendEl.textContent = incomeChange > 0
                        ? `‚Üë ${formatCurrency(incomeChange)} vs last month`
                        : `‚Üì ${formatCurrency(Math.abs(incomeChange))} vs last month`;
                }
            }

            // Calculate Financial Health Score
            calculateFinancialHealth(totalIncome, totalExpenses, avgMonthlyIncome, avgMonthlyExpense);
        }

        // Dark Mode Toggle
        function toggleDarkMode() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            if (isDark) {
                document.documentElement.removeAttribute('data-theme');
                state.settings.darkMode = false;
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                state.settings.darkMode = true;
            }
            updateDarkModeIcon();
            saveSettingsToStorage();
        }

        function updateDarkModeIcon() {
            const icon = document.getElementById('dark-mode-icon');
            if (!icon) return;
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            if (isDark) {
                icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
            } else {
                icon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';
            }
        }

        function saveSettingsToStorage() {
            try {
                localStorage.setItem('financeManagerSettings', JSON.stringify(state.settings));
            } catch (e) {
                console.error('Error saving settings:', e);
            }
        }

        function loadSettingsFromStorage() {
            try {
                const saved = localStorage.getItem('financeManagerSettings');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    state.settings = { ...state.settings, ...parsed };
                    if (state.settings.darkMode) {
                        document.documentElement.setAttribute('data-theme', 'dark');
                    }
                    updateDarkModeIcon();
                }
            } catch (e) {
                console.error('Error loading settings:', e);
            }
        }

        // Bill Reminders Widget
        function renderBillReminders() {
            const container = document.getElementById('bill-reminders-content');
            if (!container) return;

            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const nextWeek = new Date(today);
            nextWeek.setDate(today.getDate() + 7);

            // Get upcoming unpaid payables and receivables
            const upcomingBills = [
                ...state.data.payables.filter(item => {
                    if ((item.status || 'unpaid') === 'paid') return false;
                    if (!item.dueDate) return false;
                    const due = new Date(item.dueDate);
                    due.setHours(0, 0, 0, 0);
                    return due >= today && due <= nextWeek;
                }).map(item => ({ ...item, type: 'payable', label: 'Payable' })),
                ...state.data.receivables.filter(item => {
                    if ((item.status || 'unpaid') === 'paid') return false;
                    if (!item.dueDate) return false;
                    const due = new Date(item.dueDate);
                    due.setHours(0, 0, 0, 0);
                    return due >= today && due <= nextWeek;
                }).map(item => ({ ...item, type: 'receivable', label: 'Receivable' }))
            ].sort((a, b) => {
                const dateA = new Date(a.dueDate);
                const dateB = new Date(b.dueDate);
                return dateA - dateB;
            });

            if (upcomingBills.length === 0) {
                container.innerHTML = `<div class="text-center" style="padding: 1rem; color: var(--text-light);">${t('no_upcoming_bills')}</div>`;
                return;
            }

            // Generate notifications for upcoming bills
            upcomingBills.forEach(bill => {
                const dueDate = new Date(bill.dueDate);
                const daysUntil = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                const isToday = daysUntil === 0;
                const isTomorrow = daysUntil === 1;

                // Check if notification already exists for this bill
                const billIndex = state.data[bill.type === 'payable' ? 'payables' : 'receivables'].indexOf(bill);
                const existingNotif = notifications.find(n =>
                    n.data && n.data.billId === `${bill.type}-${billIndex}`
                );

                if (!existingNotif) {
                    const daysText = isToday ? t('today') : isTomorrow ? t('tomorrow') : `${daysUntil} ${t('days')}`;
                    addNotification(
                        isToday ? 'error' : isTomorrow ? 'warning' : 'info',
                        `${isToday ? '‚ö†Ô∏è ' : ''}${bill.type === 'payable' ? t('payables') : t('receivables')} ${t('due_date')}`,
                        `${bill.to || bill.from || 'Unknown'}: ${formatCurrency(bill.amount)} - ${daysText}`,
                        { billId: `${bill.type}-${billIndex}` }
                    );
                }
            });

            container.innerHTML = upcomingBills.map(bill => {
                const dueDate = new Date(bill.dueDate);
                const daysUntil = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                const isToday = daysUntil === 0;
                const isTomorrow = daysUntil === 1;
                const daysText = isToday ? 'Today' : isTomorrow ? 'Tomorrow' : `In ${daysUntil} days`;
                const priority = bill.priority || 'medium';
                const priorityColor = priority === 'high' ? 'var(--danger)' : priority === 'medium' ? 'var(--warning)' : 'var(--success)';

                return `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; background: var(--card-bg); border-radius: 8px; margin-bottom: 0.5rem; border-left: 3px solid ${priorityColor};">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">${bill.to || bill.from || 'Unknown'}</div>
                            <div style="font-size: 0.875rem; color: var(--text-light);">
                                ${bill.description || 'No description'} ‚Ä¢ ${bill.label}
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">
                                Due: ${formatDate(bill.dueDate)} (${daysText})
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: bold; font-size: 1.1rem; color: ${bill.type === 'payable' ? 'var(--danger)' : 'var(--success)'};">
                                ${formatCurrency(bill.amount)}
                            </div>
                            <button class="btn btn-sm" style="margin-top: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem;" onclick="showBillDetails('${bill.type}', ${state.data[bill.type === 'payable' ? 'payables' : 'receivables'].indexOf(bill)})">
                                ${t('view')}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderFamilyMembersOverview() {
            const card = document.getElementById('family-members-overview-card');
            const container = document.getElementById('family-members-overview-content');

            if (!card || !container) return;

            const familyMembers = state.data.familyMembers || [];

            // Filter only active members for dashboard overview
            const activeMembers = familyMembers.filter(m => m.active !== false);

            if (activeMembers.length === 0) {
                card.style.display = 'none';
                return;
            }

            card.style.display = 'block';
            const memberStats = calculateFamilyMemberStats();

            // Sort members by net contribution (top contributors first)
            const sortedMembers = [...activeMembers].sort((a, b) => {
                const statsA = memberStats[a.name] || { netContribution: 0 };
                const statsB = memberStats[b.name] || { netContribution: 0 };
                return statsB.netContribution - statsA.netContribution;
            });

            // Show top 5 members
            const topMembers = sortedMembers.slice(0, 5);

            if (topMembers.length === 0) {
                container.innerHTML = `<div class="text-center" style="padding: 1rem; color: var(--text-light);">${t('no_family_members')}</div>`;
                return;
            }

            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    ${topMembers.map((member, idx) => {
                const stats = memberStats[member.name] || { totalIncome: 0, totalExpenses: 0, netContribution: 0 };
                const rank = idx + 1;
                const rankEmoji = rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : 'üìä';
                const memberIndex = familyMembers.indexOf(member);

                return `
                            <div class="card" style="padding: 1rem; cursor: pointer; transition: transform 0.2s;" 
                                 onclick="switchTab('family'); setTimeout(() => showFamilyMemberDetails(${memberIndex}), 100);"
                                 onmouseover="this.style.transform='translateY(-2px)'" 
                                 onmouseout="this.style.transform='translateY(0)'">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                                    <div style="flex: 1;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">
                                            <span style="font-size: 1.2rem;">${rankEmoji}</span>
                                            <h3 style="margin: 0; font-size: 1rem; font-weight: 600;">${member.name}</h3>
                                        </div>
                                        ${member.relation ? `<div style="font-size: 0.75rem; color: var(--text-light);">${member.relation}</div>` : ''}
                                    </div>
                                </div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid var(--border);">
                                    <div>
                                        <div style="font-size: 0.7rem; color: var(--text-light); margin-bottom: 0.25rem;" data-translate="income">Income</div>
                                        <div style="font-size: 0.9rem; font-weight: 600; color: var(--success);">${formatCurrency(stats.totalIncome)}</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 0.7rem; color: var(--text-light); margin-bottom: 0.25rem;" data-translate="expenses">Expenses</div>
                                        <div style="font-size: 0.9rem; font-weight: 600; color: var(--danger);">${formatCurrency(stats.totalExpenses)}</div>
                                    </div>
                                </div>
                                <div style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid var(--border);">
                                    <div style="font-size: 0.7rem; color: var(--text-light); margin-bottom: 0.25rem;" data-translate="net_contribution">Net Contribution</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; color: ${stats.netContribution >= 0 ? 'var(--success)' : 'var(--danger)'};">
                                        ${stats.netContribution >= 0 ? '+' : ''}${formatCurrency(stats.netContribution)}
                                    </div>
                                </div>
                            </div>
                        `;
            }).join('')}
                </div>
                ${sortedMembers.length > 5 ? `
                    <div style="margin-top: 1rem; text-align: center;">
                        <button class="btn btn-secondary" onclick="switchTab('family')" style="width: auto;">
                            View All ${sortedMembers.length} Members ‚Üí
                        </button>
                    </div>
                ` : ''}
            `;
        }

        function showBillDetails(type, index) {
            const dataType = type === 'payable' ? 'payables' : 'receivables';
            const bill = state.data[dataType][index];
            if (!bill) return;

            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            if (!overlay || !content) return;

            const dueDate = new Date(bill.dueDate);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const daysUntil = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
            const isToday = daysUntil === 0;
            const isTomorrow = daysUntil === 1;
            const daysText = isToday ? t('today') : isTomorrow ? t('tomorrow') : `${daysUntil} ${t('days')}`;
            const status = bill.status || 'unpaid';
            const priority = bill.priority || 'medium';

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${t('bill_details')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <div style="padding: 1.5rem;">
                    <div style="margin-bottom: 1.5rem;">
                        <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.25rem;">${type === 'payable' ? t('payables') : t('receivables')}</div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">
                            ${type === 'payable' ? (bill.to || 'Unknown') : (bill.from || 'Unknown')}
                        </div>
                    </div>
                    
                    <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.25rem;">${t('amount')}</div>
                            <div style="font-size: 1.25rem; font-weight: bold; color: ${type === 'payable' ? 'var(--danger)' : 'var(--success)'};">
                                ${formatCurrency(bill.amount)}
                            </div>
                        </div>
                        
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.25rem;">${t('due_date')}</div>
                            <div style="font-size: 1rem; font-weight: 500;">
                                ${formatDate(bill.dueDate)} (${daysText})
                            </div>
                        </div>
                        
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.25rem;">${t('status')}</div>
                            <div>
                                <span style="background: ${status === 'paid' ? 'var(--success)' : 'var(--danger)'}; color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">
                                    ${status === 'paid' ? t('paid') : t('unpaid')}
                                </span>
                            </div>
                        </div>
                        
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.25rem;">${t('priority')}</div>
                            <div>
                                <span style="background: ${priority === 'high' ? 'var(--danger)' : priority === 'medium' ? 'var(--warning)' : 'var(--success)'}; color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.875rem; font-weight: 500;">
                                    ${priority === 'high' ? t('high') : priority === 'medium' ? t('medium') : t('low')}
                                </span>
                            </div>
                        </div>
                        
                        ${bill.description ? `
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.25rem;">${t('description')}</div>
                            <div style="font-size: 0.875rem;">${bill.description}</div>
                        </div>
                        ` : ''}
                        
                        ${bill.paymentMethod ? `
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.25rem;">Payment Method</div>
                            <div style="font-size: 0.875rem;">${bill.paymentMethod}</div>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="modal-footer" style="display: flex; gap: 0.5rem; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">${t('close')}</button>
                        <button type="button" class="btn btn-primary" onclick="closeModal(); setTimeout(() => editItem('${dataType}', ${index}), 100);">${t('edit')}</button>
                    </div>
                </div>
            `;
        }

        // Budget Alerts Widget
        function renderBudgetAlerts() {
            const alertsContainer = document.getElementById('dashboard-alerts');
            if (!alertsContainer) return;

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const filterExpensesByPeriod = (expenses, periodType) => {
                return expenses.filter(exp => {
                    if (!exp.date) return false;
                    const expDate = new Date(exp.date);
                    expDate.setHours(0, 0, 0, 0);

                    switch (periodType) {
                        case 'daily':
                            return expDate.getTime() === today.getTime();
                        case 'monthly':
                            return expDate.getMonth() === today.getMonth() &&
                                expDate.getFullYear() === today.getFullYear();
                        case 'per 3 month':
                            const threeMonthsAgo = new Date(today);
                            threeMonthsAgo.setMonth(today.getMonth() - 3);
                            return expDate >= threeMonthsAgo && expDate <= today;
                        case 'per 6 month':
                            const sixMonthsAgo = new Date(today);
                            sixMonthsAgo.setMonth(today.getMonth() - 6);
                            return expDate >= sixMonthsAgo && expDate <= today;
                        case 'yearly':
                            return expDate.getFullYear() === today.getFullYear();
                        default:
                            return true;
                    }
                });
            };

            const budgets = state.data.budgets || [];
            const budgetAlerts = [];

            budgets.forEach(budget => {
                const category = budget.category;
                const budgetAmount = Number(budget.amount || 0);
                const period = budget.period || 'monthly';

                const periodExpenses = filterExpensesByPeriod(
                    state.data.expenses.filter(exp => exp.category === category),
                    period
                );
                const actualSpending = periodExpenses.reduce((sum, exp) => sum + Number(exp.amount || 0), 0);
                const percentUsed = budgetAmount > 0 ? (actualSpending / budgetAmount) * 100 : 0;
                const remaining = budgetAmount - actualSpending;

                // Alert if over 80% used or over budget
                if (percentUsed >= 80 || actualSpending > budgetAmount) {
                    budgetAlerts.push({
                        category: category,
                        period: period,
                        budgetAmount: budgetAmount,
                        actualSpending: actualSpending,
                        percentUsed: percentUsed,
                        remaining: remaining,
                        isOverBudget: actualSpending > budgetAmount
                    });
                }
            });

            if (budgetAlerts.length > 0) {
                const existingAlerts = alertsContainer.querySelectorAll('.alert');
                const budgetAlertDiv = document.createElement('div');
                budgetAlertDiv.className = 'alert alert-warning';
                budgetAlertDiv.style.marginBottom = '1rem';
                budgetAlertDiv.innerHTML = `
                    <div style="display: flex; align-items: start; gap: 1rem;">
                        <div style="font-size: 1.5rem;">‚ö†Ô∏è</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.5rem;">Budget Alerts</div>
                            ${budgetAlerts.map(alert => `
                                <div style="margin-bottom: 0.5rem; padding: 0.5rem; background: rgba(255,255,255,0.5); border-radius: 4px;">
                                    <strong>${alert.category}</strong> (${alert.period}): 
                                    ${alert.isOverBudget
                        ? `<span style="color: var(--danger);">Over budget by ${formatCurrency(Math.abs(alert.remaining))}</span>`
                        : `<span style="color: var(--warning);">${Math.round(alert.percentUsed)}% used, ${formatCurrency(alert.remaining)} remaining</span>`
                    }
                                </div>
                            `).join('')}
                            <button class="btn btn-sm" style="margin-top: 0.5rem;" onclick="switchTab('budgets')">View Budgets</button>
                        </div>
                    </div>
                `;
                alertsContainer.insertBefore(budgetAlertDiv, alertsContainer.firstChild);
            }
        }

        function calculateFinancialHealth(totalIncome, totalExpenses, avgMonthlyIncome, avgMonthlyExpense) {
            let score = 0;
            const maxScore = 100;

            // Savings rate (0-30 points)
            if (totalIncome > 0) {
                const savingsRate = ((totalIncome - totalExpenses) / totalIncome) * 100;
                const savingsRateEl = document.getElementById('savings-rate');
                if (savingsRateEl) savingsRateEl.textContent = savingsRate.toFixed(1) + '%';
                if (savingsRate >= 20) score += 30;
                else if (savingsRate >= 10) score += 20;
                else if (savingsRate >= 5) score += 15;
                else if (savingsRate >= 0) score += 10;
                else score += 0;
            } else {
                const savingsRateEl = document.getElementById('savings-rate');
                if (savingsRateEl) savingsRateEl.textContent = '0%';
            }

            // Expense ratio (0-25 points)
            if (totalIncome > 0) {
                const expenseRatio = (totalExpenses / totalIncome) * 100;
                const expenseRatioEl = document.getElementById('expense-ratio');
                if (expenseRatioEl) expenseRatioEl.textContent = expenseRatio.toFixed(1) + '%';
                if (expenseRatio <= 70) score += 25;
                else if (expenseRatio <= 80) score += 20;
                else if (expenseRatio <= 90) score += 15;
                else if (expenseRatio <= 100) score += 10;
                else score += 5;
            } else {
                const expenseRatioEl = document.getElementById('expense-ratio');
                if (expenseRatioEl) expenseRatioEl.textContent = '0%';
            }

            // Monthly consistency (0-20 points)
            const monthlyData = getMonthlyData();
            if (monthlyData.income.length >= 3) {
                const incomeVariance = calculateVariance(monthlyData.income.slice(-3));
                if (incomeVariance < 0.1) score += 20;
                else if (incomeVariance < 0.2) score += 15;
                else if (incomeVariance < 0.3) score += 10;
                else score += 5;
            } else {
                score += 10; // Default for insufficient data
            }

            // Growth trend (0-15 points)
            if (monthlyData.income.length >= 2 && monthlyData.expenses.length >= 2) {
                const incomeTrend = monthlyData.income.slice(-2)[1] - monthlyData.income.slice(-2)[0];
                const expenseTrend = monthlyData.expenses.slice(-2)[1] - monthlyData.expenses.slice(-2)[0];
                if (incomeTrend > 0 && expenseTrend <= 0) score += 15;
                else if (incomeTrend > expenseTrend) score += 10;
                else if (incomeTrend === expenseTrend) score += 5;
                else score += 0;
            } else {
                score += 5;
            }

            // Transaction activity (0-10 points)
            const totalTransactions = state.data.expenses.length + state.data.income.length;
            if (totalTransactions >= 20) score += 10;
            else if (totalTransactions >= 10) score += 7;
            else if (totalTransactions >= 5) score += 5;
            else score += 2;

            // Update UI
            const healthScoreEl = document.getElementById('health-score');
            if (healthScoreEl) healthScoreEl.textContent = Math.min(score, maxScore);
            const statusEl = document.getElementById('health-status');
            if (statusEl) {
                if (score >= 80) {
                    statusEl.textContent = t('excellent_health');
                    statusEl.style.color = '#48bb78';
                } else if (score >= 65) {
                    statusEl.textContent = t('good_health');
                    statusEl.style.color = '#38a169';
                } else if (score >= 50) {
                    statusEl.textContent = t('fair_health');
                    statusEl.style.color = '#d69e2e';
                } else {
                    statusEl.textContent = t('needs_attention');
                    statusEl.style.color = '#e53e3e';
                }
            }
        }

        function calculateVariance(values) {
            if (values.length === 0) return 0;
            const mean = values.reduce((a, b) => a + b, 0) / values.length;
            const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / values.length;
            return variance / (mean * mean); // Coefficient of variation
        }

        // Chart rendering functions
        let trendChart = null;
        let expenseCategoriesChart = null;
        let incomeCategoriesChart = null;
        let cashFlowChart = null;

        function renderCharts() {
            // Destroy existing charts if they exist
            if (trendChart) trendChart.destroy();
            if (expenseCategoriesChart) expenseCategoriesChart.destroy();
            if (incomeCategoriesChart) incomeCategoriesChart.destroy();
            if (cashFlowChart) cashFlowChart.destroy();

            // Trend Chart (Income vs Expenses by Month)
            const monthlyData = getMonthlyData();
            const trendCtx = document.getElementById('trend-chart');
            if (trendCtx) {
                trendChart = new Chart(trendCtx, {
                    type: 'line',
                    data: {
                        labels: monthlyData.labels,
                        datasets: [
                            {
                                label: 'Income',
                                data: monthlyData.income,
                                borderColor: '#38a169',
                                backgroundColor: 'rgba(56, 161, 105, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Expenses',
                                data: monthlyData.expenses,
                                borderColor: '#e53e3e',
                                backgroundColor: 'rgba(229, 62, 62, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top' },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        return context.dataset.label + ': ' + formatCurrency(context.parsed.y);
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function (value) {
                                        return '‡ß≥' + value.toLocaleString('en-BD');
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Expense Categories Chart
            const expenseCategories = getCategoryData('expenses');
            const expenseCtx = document.getElementById('expense-categories-chart');
            if (expenseCtx) {
                expenseCategoriesChart = new Chart(expenseCtx, {
                    type: 'doughnut',
                    data: {
                        labels: expenseCategories.labels,
                        datasets: [{
                            data: expenseCategories.values,
                            backgroundColor: [
                                '#e53e3e', '#d97706', '#d69e2e', '#38a169',
                                '#3182ce', '#805ad5', '#e53e3e', '#c53030'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        const label = context.label || '';
                                        const value = context.parsed || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = ((value / total) * 100).toFixed(1);
                                        return label + ': ' + formatCurrency(value) + ' (' + percentage + '%)';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Cash Flow Chart
            const cashFlowData = getMonthlyData();
            const cashFlowValues = cashFlowData.income.map((income, idx) => income - cashFlowData.expenses[idx]);
            const cashFlowCtx = document.getElementById('cashflow-chart');
            if (cashFlowCtx) {
                cashFlowChart = new Chart(cashFlowCtx, {
                    type: 'bar',
                    data: {
                        labels: cashFlowData.labels,
                        datasets: [{
                            label: 'Net Cash Flow',
                            data: cashFlowValues,
                            backgroundColor: cashFlowValues.map(val => val >= 0 ? 'rgba(56, 161, 105, 0.6)' : 'rgba(229, 62, 62, 0.6)'),
                            borderColor: cashFlowValues.map(val => val >= 0 ? '#38a169' : '#e53e3e'),
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        return 'Cash Flow: ' + formatCurrency(context.parsed.y);
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                ticks: {
                                    callback: function (value) {
                                        return '‡ß≥' + value.toLocaleString('en-BD');
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Income Categories Chart
            const incomeCategories = getCategoryData('income');
            const incomeCtx = document.getElementById('income-categories-chart');
            if (incomeCtx) {
                incomeCategoriesChart = new Chart(incomeCtx, {
                    type: 'doughnut',
                    data: {
                        labels: incomeCategories.labels,
                        datasets: [{
                            data: incomeCategories.values,
                            backgroundColor: [
                                '#38a169', '#3182ce', '#805ad5', '#d69e2e',
                                '#e53e3e', '#48bb78', '#4299e1', '#9f7aea'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        const label = context.label || '';
                                        const value = context.parsed || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = ((value / total) * 100).toFixed(1);
                                        return label + ': ' + formatCurrency(value) + ' (' + percentage + '%)';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // Helper function to format month from YYYY-MM to "May 2025"
        function formatMonthLabel(monthStr) {
            if (!monthStr || monthStr.length < 7) return monthStr;
            const [year, month] = monthStr.split('-');
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];
            const monthIndex = parseInt(month) - 1;
            if (monthIndex >= 0 && monthIndex < 12) {
                return `${monthNames[monthIndex]} ${year}`;
            }
            return monthStr;
        }

        function getMonthlyData() {
            const incomeByMonth = {};
            const expensesByMonth = {};

            if (state.data && Array.isArray(state.data.income)) {
                state.data.income.forEach(item => {
                    if (item && item.date) {
                        const month = item.date.substring(0, 7); // YYYY-MM
                        incomeByMonth[month] = (incomeByMonth[month] || 0) + Number(item.amount || 0);
                    }
                });
            }

            if (state.data && Array.isArray(state.data.expenses)) {
                state.data.expenses.forEach(item => {
                    if (item && item.date) {
                        const month = item.date.substring(0, 7); // YYYY-MM
                        expensesByMonth[month] = (expensesByMonth[month] || 0) + Number(item.amount || 0);
                    }
                });
            }

            const allMonths = [...new Set([...Object.keys(incomeByMonth), ...Object.keys(expensesByMonth)])].sort();

            return {
                labels: allMonths.map(m => formatMonthLabel(m)), // Format labels as "May 2025"
                labelsRaw: allMonths, // Keep raw format for calculations
                income: allMonths.map(m => incomeByMonth[m] || 0),
                expenses: allMonths.map(m => expensesByMonth[m] || 0)
            };
        }

        function getCategoryData(type) {
            const data = (state.data && type === 'expenses')
                ? (Array.isArray(state.data.expenses) ? state.data.expenses : [])
                : (state.data && Array.isArray(state.data.income) ? state.data.income : []);
            const categoryMap = {};

            if (Array.isArray(data)) {
                data.forEach(item => {
                    if (item) {
                        const category = item.category || 'Other';
                        categoryMap[category] = (categoryMap[category] || 0) + Number(item.amount || 0);
                    }
                });
            }

            const sorted = Object.entries(categoryMap).sort((a, b) => b[1] - a[1]);

            return {
                labels: sorted.map(([cat]) => cat),
                values: sorted.map(([, val]) => val)
            };
        }

        // Filter state
        let currentListType = null;
        let filteredData = null;
        let selectedItems = new Set();

        function renderListTable(type) {
            currentListType = type;
            selectedItems.clear(); // Reset selections
            const titleEl = document.getElementById('list-title');
            const thead = document.getElementById('list-thead');
            const tbody = document.getElementById('list-tbody');
            const data = state.data[type] || [];
            filteredData = [...data]; // Copy for filtering

            thead.innerHTML = '';
            tbody.innerHTML = '';

            let headers = [];

            if (type === 'income') {
                titleEl.textContent = t('income_sources');
                headers = ['', t('date'), t('source'), t('category'), t('amount'), t('actions')];
            } else if (type === 'expenses') {
                titleEl.textContent = t('expenses');
                headers = ['', t('date'), t('description'), t('category'), t('amount'), t('actions')];
            } else if (type === 'receivables') {
                titleEl.textContent = t('receivables');
                headers = ['', t('due_date'), t('from'), t('description'), t('status'), t('priority'), t('amount'), t('actions')];
            } else if (type === 'payables') {
                titleEl.textContent = t('payables');
                headers = ['', t('due_date'), t('to'), t('description'), t('status'), t('priority'), t('amount'), t('actions')];
            }

            // Populate category filter
            populateCategoryFilter(type, data);
            // Populate family member filter
            populateFamilyMemberFilter(type, data);

            // Render Headers
            const trHead = document.createElement('tr');
            // Add mobile Details header first
            const mobileDetailsHeader = document.createElement('th');
            mobileDetailsHeader.className = 'mobile-details';
            mobileDetailsHeader.textContent = t('details');
            trHead.appendChild(mobileDetailsHeader);

            headers.forEach((h, idx) => {
                const th = document.createElement('th');
                if (idx === 0) {
                    th.className = 'select-all-cell';
                    th.innerHTML = `<input type="checkbox" onchange="toggleSelectAll(this.checked)">`;
                } else {
                    th.textContent = h;
                }
                trHead.appendChild(th);
            });
            thead.appendChild(trHead);

            // Render Bulk Actions Bar
            renderBulkActionsBar();

            // Render rows
            renderTableRows(type, filteredData, tbody, headers.length);

            // Update item count
            const countEl = document.getElementById('list-count');
            if (countEl) {
                const totalCount = data.length;
                const filteredCount = filteredData.length;
                if (filteredCount === totalCount) {
                    countEl.textContent = `${totalCount} ${totalCount !== 1 ? t('items') : t('item')}`;
                } else {
                    countEl.textContent = `${t('showing')} ${filteredCount} ${t('of')} ${totalCount} ${totalCount !== 1 ? t('items') : t('item')}`;
                }
            }
        }

        function populateCategoryFilter(type, data) {
            const categoryFilter = document.getElementById('category-filter');
            if (!categoryFilter) return;

            const categories = [...new Set(data.map(item => item.category || 'Other').filter(Boolean))].sort();
            categoryFilter.innerHTML = `<option value="">${t('all_categories')}</option>` +
                categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
        }

        function populateFamilyMemberFilter(type, data) {
            const familyMemberFilter = document.getElementById('family-member-filter');
            if (!familyMemberFilter) return;

            const familyMembers = new Set();
            
            // Collect family members from data
            data.forEach(item => {
                if (type === 'income' && item.familyMember) {
                    familyMembers.add(item.familyMember);
                } else if (type === 'expenses') {
                    // Include expenseFor (Given to)
                    if (item.expenseFor) {
                        familyMembers.add(item.expenseFor);
                    }
                    // Include contributors (familyMembers)
                    if (item.familyMembers) {
                        if (Array.isArray(item.familyMembers)) {
                            item.familyMembers.forEach(member => familyMembers.add(member));
                        } else if (typeof item.familyMembers === 'string') {
                            // Handle comma-separated string
                            item.familyMembers.split(',').forEach(member => {
                                const trimmed = member.trim();
                                if (trimmed) familyMembers.add(trimmed);
                            });
                        }
                    }
                } else if (item.familyMember) {
                    familyMembers.add(item.familyMember);
                }
            });

            // Also include all active family members from state
            (state.data.familyMembers || []).forEach(member => {
                if (member.active !== false && member.name) {
                    familyMembers.add(member.name);
                }
            });

            const sortedMembers = Array.from(familyMembers).sort();
            familyMemberFilter.innerHTML = `<option value="">${t('all_family_members') || 'All Family Members'}</option>` +
                sortedMembers.map(member => `<option value="${member}">${member}</option>`).join('');
        }

        function renderTableRows(type, data, tbody, colspan) {
            tbody.innerHTML = '';

            if (data.length === 0) {
                tbody.innerHTML = `<tr><td colspan="${colspan}" class="text-center" style="padding: 2rem; color: var(--text-light);">${t('no_data_found')}</td></tr>`;
                // Clear footer if no data
                const table = tbody.closest('table');
                if (table) {
                    const tfoot = table.querySelector('tfoot');
                    if (tfoot) tfoot.remove();
                }
                return;
            }

            let totalAmount = 0;
            const amountColumnIndex = type === 'income' || type === 'expenses' ? 4 : 4; // Amount is always 4th data column (after checkbox)

            data.forEach((item, index) => {
                const originalIndex = state.data[type].indexOf(item);
                const tr = document.createElement('tr');
                let cols = '';
                const itemKey = `${type}-${originalIndex}`;
                const amount = Number(item.amount || 0);
                totalAmount += amount;

                // Checkbox column
                cols += `<td class="checkbox-cell"><input type="checkbox" onchange="toggleItemSelection('${itemKey}', this.checked)" ${selectedItems.has(itemKey) ? 'checked' : ''}></td>`;

                // Date badge helper - check status to avoid showing overdue for paid items
                const getDueDateBadge = (dueDate, itemStatus) => {
                    if (!dueDate) return '';
                    // Don't show overdue badge for paid items
                    if (itemStatus === 'paid') return '';
                    const today = new Date();
                    today.setHours(0, 0, 0, 0);
                    const due = new Date(dueDate);
                    due.setHours(0, 0, 0, 0);
                    const diffDays = Math.ceil((due - today) / (1000 * 60 * 60 * 24));

                    if (diffDays < 0) {
                        return `<span class="overdue-badge">‚ö†Ô∏è Overdue (${Math.abs(diffDays)} days)</span>`;
                    } else if (diffDays <= 3) {
                        return `<span class="due-soon-badge">Due in ${diffDays} day${diffDays !== 1 ? 's' : ''}</span>`;
                    }
                    return '';
                };

                // Build mobile details content
                let mobileDetails = '';
                if (type === 'income') {
                    mobileDetails = `
                        <div class="mobile-details-content">
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Date:</span>
                                <span class="mobile-details-value">${item.date ? formatDate(item.date) : '-'}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Source:</span>
                                <span class="mobile-details-value">${item.source || '-'} ${item.recurring ? '<span class="recurring-badge">üîÑ Recurring</span>' : ''}</span>
                            </div>
                            ${item.familyMember ? `<div class="mobile-details-row"><span class="mobile-details-label">Contributor:</span><span class="mobile-details-value">üë§ ${item.familyMember}</span></div>` : ''}
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Category:</span>
                                <span class="mobile-details-value"><span class="tag tag-success">${item.category || 'Other'}</span></span>
                            </div>
                            ${item.account ? `<div class="mobile-details-row"><span class="mobile-details-label">Account:</span><span class="mobile-details-value">${item.account}</span></div>` : ''}
                            ${item.notes ? `<div class="mobile-details-row"><span class="mobile-details-value transaction-note">${item.notes}</span></div>` : ''}
                        </div>
                    `;
                    const contributorBadge = item.familyMember ? `<span style="background: #e6f3ff; color: #0066cc; padding: 0.125rem 0.5rem; border-radius: 12px; font-size: 0.75rem; margin-left: 0.5rem; font-weight: 500;">üë§ ${item.familyMember}</span>` : '';
                    cols += `
                        <td>${item.date ? formatDate(item.date) : '-'}</td>
                        <td>
                            ${item.source || '-'}
                            ${contributorBadge}
                            ${item.recurring ? '<span class="recurring-badge">üîÑ Recurring</span>' : ''}
                            ${item.account ? `<div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">üè¶ ${item.account}</div>` : ''}
                            ${item.notes ? `<div class="transaction-note">${item.notes}</div>` : ''}
                        </td>
                        <td><span class="tag tag-success">${item.category || 'Other'}</span></td>
                        <td>${formatCurrency(item.amount)}</td>
                    `;
                } else if (type === 'expenses') {
                    mobileDetails = `
                        <div class="mobile-details-content">
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Date:</span>
                                <span class="mobile-details-value">${item.date ? formatDate(item.date) : '-'}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Description:</span>
                                <span class="mobile-details-value">${item.description || '-'} ${item.recurring ? '<span class="recurring-badge">üîÑ Recurring</span>' : ''}</span>
                            </div>
                            ${item.expenseFor ? `
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Given to:</span>
                                <span class="mobile-details-value">üéÅ ${item.expenseFor}</span>
                            </div>
                            ` : ''}
                            ${item.familyMembers && Array.isArray(item.familyMembers) && item.familyMembers.length > 0 ? `
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Contributors:</span>
                                <span class="mobile-details-value">${item.familyMembers.map(name => {
                        if (item.contributionType === 'custom' && item.contributions && item.contributions[name]) {
                            return `üë§ ${name} (${formatCurrency(item.contributions[name])})`;
                        }
                        return `üë§ ${name}`;
                    }).join(', ')}</span>
                            </div>
                            ` : ''}
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Category:</span>
                                <span class="mobile-details-value"><span class="tag tag-danger">${item.category || 'Other'}</span></span>
                            </div>
                            ${item.account ? `<div class="mobile-details-row"><span class="mobile-details-label">Account:</span><span class="mobile-details-value">${item.account}</span></div>` : ''}
                            ${item.notes ? `<div class="mobile-details-row"><span class="mobile-details-value transaction-note">${item.notes}</span></div>` : ''}
                        </div>
                    `;
                    // Build "Given to" badge
                    const givenToBadge = item.expenseFor ? `<span style="background: #fff3cd; color: #856404; padding: 0.125rem 0.5rem; border-radius: 12px; font-size: 0.75rem; margin-left: 0.5rem; font-weight: 500;">üéÅ Given to: ${item.expenseFor}</span>` : '';

                    // Build contributor badges for expenses
                    let contributorBadges = '';
                    if (item.familyMembers && Array.isArray(item.familyMembers) && item.familyMembers.length > 0) {
                        if (item.contributionType === 'custom' && item.contributions) {
                            // Show custom contributions
                            contributorBadges = item.familyMembers.map(name => {
                                const amount = item.contributions[name] || '';
                                return `<span style="background: #e6f3ff; color: #0066cc; padding: 0.125rem 0.5rem; border-radius: 12px; font-size: 0.75rem; margin-left: 0.5rem; font-weight: 500;">üë§ ${name}${amount ? ` (${formatCurrency(amount)})` : ''}</span>`;
                            }).join('');
                        } else {
                            // Show equal contributions
                            contributorBadges = item.familyMembers.map(name =>
                                `<span style="background: #e6f3ff; color: #0066cc; padding: 0.125rem 0.5rem; border-radius: 12px; font-size: 0.75rem; margin-left: 0.5rem; font-weight: 500;">üë§ ${name}</span>`
                            ).join('');
                        }
                    }
                    cols += `
                        <td>${item.date ? formatDate(item.date) : '-'}</td>
                        <td>
                            ${item.description || '-'}
                            ${givenToBadge}
                            ${contributorBadges}
                            ${item.recurring ? '<span class="recurring-badge">üîÑ Recurring</span>' : ''}
                            ${item.account ? `<div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">üè¶ ${item.account}</div>` : ''}
                            ${item.notes ? `<div class="transaction-note">${item.notes}</div>` : ''}
                        </td>
                        <td><span class="tag tag-danger">${item.category || 'Other'}</span></td>
                        <td>${formatCurrency(item.amount)}</td>
                    `;
                } else if (type === 'receivables') {
                    const status = item.status || 'unpaid';
                    const statusBadge = status === 'paid'
                        ? '<span style="background: #48bb78; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Paid</span>'
                        : '<span style="background: #e53e3e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Unpaid</span>';
                    const priority = item.priority || 'medium';
                    const priorityBadge = priority === 'high'
                        ? '<span style="background: #e53e3e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">High</span>'
                        : priority === 'low'
                            ? '<span style="background: #48bb78; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Low</span>'
                            : '<span style="background: #d69e2e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Medium</span>';
                    mobileDetails = `
                        <div class="mobile-details-content">
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Due Date:</span>
                                <span class="mobile-details-value">${item.dueDate ? formatDate(item.dueDate) : '-'} ${getDueDateBadge(item.dueDate, status)}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">From:</span>
                                <span class="mobile-details-value">${item.from || '-'}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Description:</span>
                                <span class="mobile-details-value">${item.description || '-'}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Status:</span>
                                <span class="mobile-details-value">${statusBadge}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Priority:</span>
                                <span class="mobile-details-value">${priorityBadge}</span>
                            </div>
                            ${item.notes ? `<div class="mobile-details-row"><span class="mobile-details-value transaction-note">${item.notes}</span></div>` : ''}
                        </div>
                    `;
                    cols += `
                        <td>
                            ${item.dueDate ? formatDate(item.dueDate) : '-'}
                            ${getDueDateBadge(item.dueDate, status)}
                        </td>
                        <td>${item.from || '-'}</td>
                        <td>${item.description || '-'}</td>
                        <td>${statusBadge}</td>
                        <td>${priorityBadge}</td>
                        <td style="color:var(--success); font-weight:bold;">${formatCurrency(item.amount)}</td>
                    `;
                } else if (type === 'payables') {
                    const status = item.status || 'unpaid';
                    const statusBadge = status === 'paid'
                        ? '<span style="background: #48bb78; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Paid</span>'
                        : '<span style="background: #e53e3e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Unpaid</span>';
                    const priority = item.priority || 'medium';
                    const priorityBadge = priority === 'high'
                        ? '<span style="background: #e53e3e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">High</span>'
                        : priority === 'low'
                            ? '<span style="background: #48bb78; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Low</span>'
                            : '<span style="background: #d69e2e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Medium</span>';
                    mobileDetails = `
                        <div class="mobile-details-content">
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Due Date:</span>
                                <span class="mobile-details-value">${item.dueDate ? formatDate(item.dueDate) : '-'} ${getDueDateBadge(item.dueDate, status)}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">To:</span>
                                <span class="mobile-details-value">${item.to || '-'}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Description:</span>
                                <span class="mobile-details-value">${item.description || '-'}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Status:</span>
                                <span class="mobile-details-value">${statusBadge}</span>
                            </div>
                            <div class="mobile-details-row">
                                <span class="mobile-details-label">Priority:</span>
                                <span class="mobile-details-value">${priorityBadge}</span>
                            </div>
                            ${item.notes ? `<div class="mobile-details-row"><span class="mobile-details-value transaction-note">${item.notes}</span></div>` : ''}
                        </div>
                    `;
                    cols += `
                        <td>
                            ${item.dueDate ? formatDate(item.dueDate) : '-'}
                            ${getDueDateBadge(item.dueDate, status)}
                        </td>
                        <td>${item.to || '-'}</td>
                        <td>${item.description || '-'}</td>
                        <td>${statusBadge}</td>
                        <td>${priorityBadge}</td>
                        <td style="color:var(--danger); font-weight:bold;">${formatCurrency(item.amount)}</td>
                    `;
                }

                // Add mobile details column (hidden on desktop, shown on mobile)
                cols = `<td class="mobile-details">${mobileDetails}</td>` + cols;

                const actionButtons = type === 'income' || type === 'expenses'
                    ? `<button class="btn-icon icon-only" onclick="duplicateTransaction('${type}', ${originalIndex})" title="Duplicate">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>`
                    : '';

                // Mobile menu items
                const duplicateMenuItem = type === 'income' || type === 'expenses'
                    ? `<button class="mobile-menu-item" onclick="duplicateTransaction('${type}', ${originalIndex}); closeMobileMenu(event);">
                        <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Duplicate
                    </button>`
                    : '';

                tr.innerHTML = cols + `
                    <td>
                        <div class="action-buttons">
                            ${actionButtons}
                            <button class="btn-edit" onclick="editItem('${type}', ${originalIndex})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                Edit
                            </button>
                            <button class="btn-delete" onclick="deleteItem('${type}', ${originalIndex})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                                Delete
                            </button>
                        </div>
                        <div class="mobile-actions-menu">
                            <button class="mobile-menu-button" onclick="toggleMobileMenu(event)" title="Actions">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="1"></circle>
                                    <circle cx="12" cy="5" r="1"></circle>
                                    <circle cx="12" cy="19" r="1"></circle>
                                </svg>
                            </button>
                            <div class="mobile-menu-dropdown" id="menu-${itemKey}">
                                ${duplicateMenuItem}
                                <button class="mobile-menu-item" onclick="editItem('${type}', ${originalIndex}); closeMobileMenu(event);">
                                    <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                    </svg>
                                    Edit
                                </button>
                                <button class="mobile-menu-item delete" onclick="deleteItem('${type}', ${originalIndex}); closeMobileMenu(event);">
                                    <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="3 6 5 6 21 6"></polyline>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                    </svg>
                                    Delete
                                </button>
                            </div>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            // Add table footer with totals
            const table = tbody.closest('table');
            if (table) {
                let tfoot = table.querySelector('tfoot');
                if (!tfoot) {
                    tfoot = document.createElement('tfoot');
                    table.appendChild(tfoot);
                }
                // Calculate correct colspan: mobile details(1) + checkbox(1) + data columns before amount
                // For income/expenses: mobile(1) + checkbox(1) + Date(1) + Source/Desc(1) + Category(1) = 5 columns before Amount
                // For receivables/payables: mobile(1) + checkbox(1) + DueDate(1) + From/To(1) + Description(1) = 5 columns before Amount
                // On mobile, we show: mobile details(1) + amount(1) + actions(1), so colspan should be 1 for mobile
                const colsBeforeAmount = 5; // Mobile details + checkbox + Date/DueDate, Source/From/To, Description/Category, Category/Description
                tfoot.innerHTML = `
                    <tr>
                        <td colspan="1" class="table-total-label mobile-total" style="display: none;"><strong>Total:</strong></td>
                        <td colspan="${colsBeforeAmount - 1}" class="table-total-label desktop-total"><strong>Total:</strong></td>
                        <td class="table-total-value">${formatCurrency(totalAmount)}</td>
                        <td></td>
                    </tr>
                `;
            }
        }

        function renderBulkActionsBar() {
            const card = document.getElementById('view-list')?.querySelector('.card');
            if (!card) return;

            let bulkBar = card.querySelector('.bulk-actions');
            if (!bulkBar) {
                bulkBar = document.createElement('div');
                bulkBar.className = 'bulk-actions';
                bulkBar.innerHTML = `
                    <span id="bulk-count">0 selected</span>
                    <button class="btn btn-danger" onclick="bulkDelete()" style="width: auto;">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Delete Selected
                    </button>
                    <button class="btn btn-secondary" onclick="clearSelection()" style="width: auto;">Cancel</button>
                `;
                const tableContainer = card.querySelector('.table-container');
                if (tableContainer) {
                    card.insertBefore(bulkBar, tableContainer);
                } else {
                    card.appendChild(bulkBar);
                }
            }
            updateBulkActionsBar();
        }

        // Mobile menu functions
        function toggleMobileMenu(event) {
            event.stopPropagation();
            const button = event.currentTarget;
            const menu = button.nextElementSibling;
            const allMenus = document.querySelectorAll('.mobile-menu-dropdown');

            // Close all other menus
            allMenus.forEach(m => {
                if (m !== menu) {
                    m.classList.remove('show');
                }
            });

            // Toggle current menu
            menu.classList.toggle('show');
        }

        function closeMobileMenu(event) {
            if (event) {
                event.stopPropagation();
            }
            const allMenus = document.querySelectorAll('.mobile-menu-dropdown');
            allMenus.forEach(m => m.classList.remove('show'));
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function (event) {
            if (!event.target.closest('.mobile-actions-menu')) {
                closeMobileMenu();
            }
        });

        function toggleItemSelection(itemKey, checked) {
            if (checked) {
                selectedItems.add(itemKey);
            } else {
                selectedItems.delete(itemKey);
            }
            updateBulkActionsBar();
        }

        function toggleSelectAll(checked) {
            if (!filteredData) return;
            filteredData.forEach((item, index) => {
                const originalIndex = state.data[currentListType].indexOf(item);
                const itemKey = `${currentListType}-${originalIndex}`;
                if (checked) {
                    selectedItems.add(itemKey);
                } else {
                    selectedItems.delete(itemKey);
                }
            });
            // Update all checkboxes
            document.querySelectorAll('#list-tbody input[type="checkbox"]').forEach(cb => cb.checked = checked);
            updateBulkActionsBar();
        }

        function updateBulkActionsBar() {
            const bulkBar = document.querySelector('.bulk-actions');
            const bulkCount = document.getElementById('bulk-count');
            if (bulkBar && bulkCount) {
                const count = selectedItems.size;
                bulkCount.textContent = `${count} selected`;
                if (count > 0) {
                    bulkBar.classList.add('active');
                } else {
                    bulkBar.classList.remove('active');
                }
            }
        }

        function clearSelection() {
            selectedItems.clear();
            document.querySelectorAll('#list-tbody input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelector('#list-thead input[type="checkbox"]').checked = false;
            updateBulkActionsBar();
        }

        function bulkDelete() {
            if (selectedItems.size === 0) return;
            showConfirmModal({
                title: 'Delete Multiple Items',
                message: `${t('are_you_sure_delete')} ${selectedItems.size} ${t('selected')} ${selectedItems.size !== 1 ? t('items') : t('item')}? ${t('action_cannot_undo')}`,
                type: 'danger',
                confirmText: 'Delete All',
                cancelText: 'Cancel'
            }).then(confirmed => {
                if (!confirmed) return;

                // Sort indices in descending order to avoid index shifting issues
                const indicesToDelete = Array.from(selectedItems)
                    .map(key => {
                        const [type, index] = key.split('-');
                        return { type, index: parseInt(index) };
                    })
                    .filter(item => item.type === currentListType)
                    .map(item => item.index)
                    .sort((a, b) => b - a);

                indicesToDelete.forEach(index => {
                    state.data[currentListType].splice(index, 1);
                });

                selectedItems.clear();
                writeExcelFile().then(() => {
                    renderAll();
                    showToast(`Successfully deleted ${indicesToDelete.length} item(s)`, 'success');
                });
            });
        }

        function applyFilters() {
            if (!currentListType) return;

            const searchTerm = (document.getElementById('search-input')?.value || '').toLowerCase();
            const categoryFilter = document.getElementById('category-filter')?.value || '';
            const dateFrom = document.getElementById('date-from-filter')?.value || '';
            const dateTo = document.getElementById('date-to-filter')?.value || '';
            const recurringFilter = document.getElementById('recurring-filter')?.value || '';
            const familyMemberFilter = document.getElementById('family-member-filter')?.value || '';
            const sortBy = document.getElementById('sort-by')?.value || '';

            const data = state.data[currentListType] || [];
            filteredData = data.filter(item => {
                // Search filter
                if (searchTerm) {
                    const searchableText = Object.values(item).join(' ').toLowerCase();
                    if (!searchableText.includes(searchTerm)) return false;
                }

                // Category filter
                if (categoryFilter && item.category !== categoryFilter) return false;

                // Date filter
                const dateField = currentListType === 'receivables' || currentListType === 'payables' ? 'dueDate' : 'date';
                const itemDate = item[dateField] || '';

                if (dateFrom && itemDate < dateFrom) return false;
                if (dateTo && itemDate > dateTo) return false;

                // Recurring filter
                if (recurringFilter) {
                    const isRecurring = item.recurring === true || item.recurring === 'true';
                    if (recurringFilter === 'recurring' && !isRecurring) return false;
                    if (recurringFilter === 'non-recurring' && isRecurring) return false;
                }

                // Family member filter
                if (familyMemberFilter) {
                    if (currentListType === 'income') {
                        // Income has familyMember (singular) field
                        if (item.familyMember !== familyMemberFilter) return false;
                    } else if (currentListType === 'expenses') {
                        // For expenses, check both:
                        // 1. Expense for / Given to (expenseFor field)
                        // 2. Contributors (familyMembers array)
                        let matches = false;
                        
                        // Check if expense is for/given to this family member
                        if (item.expenseFor === familyMemberFilter) {
                            matches = true;
                        }
                        
                        // Check if family member is in contributors
                        if (!matches) {
                            const familyMembers = item.familyMembers || [];
                            if (Array.isArray(familyMembers)) {
                                matches = familyMembers.includes(familyMemberFilter);
                            } else if (typeof familyMembers === 'string') {
                                // Handle comma-separated string
                                matches = familyMembers.split(',').map(s => s.trim()).includes(familyMemberFilter);
                            }
                        }
                        
                        if (!matches) return false;
                    } else {
                        // For other types, check if they have familyMember or familyMembers
                        if (item.familyMember && item.familyMember !== familyMemberFilter) return false;
                        if (item.familyMembers) {
                            const familyMembers = Array.isArray(item.familyMembers) ? item.familyMembers : [item.familyMembers];
                            if (!familyMembers.includes(familyMemberFilter)) return false;
                        }
                    }
                }

                return true;
            });

            // Apply sorting
            if (sortBy) {
                const dateField = currentListType === 'receivables' || currentListType === 'payables' ? 'dueDate' : 'date';

                filteredData.sort((a, b) => {
                    if (sortBy === 'date-asc' || sortBy === 'date-desc') {
                        const dateA = a[dateField] || '';
                        const dateB = b[dateField] || '';
                        return sortBy === 'date-asc' ? dateA.localeCompare(dateB) : dateB.localeCompare(dateA);
                    } else if (sortBy === 'amount-asc' || sortBy === 'amount-desc') {
                        const amountA = Number(a.amount || 0);
                        const amountB = Number(b.amount || 0);
                        return sortBy === 'amount-asc' ? amountA - amountB : amountB - amountA;
                    } else if (sortBy === 'category-asc' || sortBy === 'category-desc') {
                        const catA = (a.category || 'Other').toLowerCase();
                        const catB = (b.category || 'Other').toLowerCase();
                        return sortBy === 'category-asc' ? catA.localeCompare(catB) : catB.localeCompare(catA);
                    } else if (sortBy === 'status-asc' || sortBy === 'status-desc') {
                        const statusA = (a.status || 'unpaid').toLowerCase();
                        const statusB = (b.status || 'unpaid').toLowerCase();
                        // Paid comes before unpaid in asc, reverse in desc
                        if (sortBy === 'status-asc') {
                            return statusA === 'paid' ? -1 : statusB === 'paid' ? 1 : statusA.localeCompare(statusB);
                        } else {
                            return statusA === 'unpaid' ? -1 : statusB === 'unpaid' ? 1 : statusB.localeCompare(statusA);
                        }
                    } else if (sortBy === 'priority-asc' || sortBy === 'priority-desc') {
                        const priorityOrder = { 'low': 1, 'medium': 2, 'high': 3 };
                        const priorityA = priorityOrder[a.priority || 'medium'] || 2;
                        const priorityB = priorityOrder[b.priority || 'medium'] || 2;
                        return sortBy === 'priority-asc' ? priorityA - priorityB : priorityB - priorityA;
                    }
                    return 0;
                });
            }

            const tbody = document.getElementById('list-tbody');
            const headers = document.querySelectorAll('#list-thead th').length;
            renderTableRows(currentListType, filteredData, tbody, headers);

            // Update item count
            const countEl = document.getElementById('list-count');
            if (countEl) {
                const totalCount = state.data[currentListType]?.length || 0;
                const filteredCount = filteredData.length;
                if (filteredCount === totalCount) {
                    countEl.textContent = `${totalCount} ${totalCount !== 1 ? t('items') : t('item')}`;
                } else {
                    countEl.textContent = `${t('showing')} ${filteredCount} ${t('of')} ${totalCount} ${totalCount !== 1 ? t('items') : t('item')}`;
                }
            }

            // Re-translate after rendering
            setTimeout(() => translatePage(), 100);
        }

        function clearFilters() {
            document.getElementById('search-input').value = '';
            document.getElementById('category-filter').value = '';
            document.getElementById('date-from-filter').value = '';
            document.getElementById('date-to-filter').value = '';
            document.getElementById('recurring-filter').value = '';
            document.getElementById('family-member-filter').value = '';
            document.getElementById('sort-by').value = '';
            applyFilters();
        }

        function renderPlansList() {
            const container = document.getElementById('plans-container');
            container.innerHTML = '';
            const data = state.data.plans || [];

            if (data.length === 0) {
                container.innerHTML = `<div class="text-center" style="padding: 2rem; color: var(--text-light);">${t('no_future_plans')}</div>`;
                return;
            }

            const totalSavings = calculateTotalSavings();

            data.forEach((plan, index) => {
                const target = Number(plan.targetAmount || 1);
                const percent = Math.min(100, Math.round((totalSavings / target) * 100));
                const status = plan.status || 'in progress';
                const statusBadge = status === 'completed'
                    ? '<span style="background: #48bb78; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Completed</span>'
                    : status === 'cancelled'
                        ? '<span style="background: #a0aec0; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Cancelled</span>'
                        : '<span style="background: #4299e1; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">In Progress</span>';
                const priority = plan.priority || 'medium';
                const priorityBadge = priority === 'high'
                    ? '<span style="background: #e53e3e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">High</span>'
                    : priority === 'low'
                        ? '<span style="background: #48bb78; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Low</span>'
                        : '<span style="background: #d69e2e; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">Medium</span>';

                const div = document.createElement('div');
                div.className = 'plan-item';
                div.innerHTML = `
                    <div class="plan-header">
                        <div>
                            <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem;">${plan.title || 'Untitled'}</h3>
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center; margin-bottom: 0.5rem;">
                                ${statusBadge}
                                ${priorityBadge}
                                ${plan.startDate ? `<span style="font-size: 0.75rem; color: var(--text-light);">Start: ${plan.startDate}</span>` : ''}
                                ${plan.deadline ? `<span style="font-size: 0.75rem; color: var(--text-light);">Deadline: ${plan.deadline}</span>` : ''}
                            </div>
                            ${plan.notes ? `<div style="font-size: 0.875rem; color: var(--text-light); margin-top: 0.25rem; font-style: italic;">${plan.notes}</div>` : ''}
                        </div>
                        <div class="action-buttons" style="position: relative;">
                            <button class="btn-edit" onclick="editItem('plans', ${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                <span class="desktop-only">Edit</span>
                            </button>
                            <button class="btn-delete" onclick="deleteItem('plans', ${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                                <span class="desktop-only">Delete</span>
                            </button>
                            </div>
                            <div class="mobile-actions-menu">
                                <button class="mobile-menu-button" onclick="toggleMobileMenu(event)" title="Actions">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="1"></circle>
                                        <circle cx="12" cy="5" r="1"></circle>
                                        <circle cx="12" cy="19" r="1"></circle>
                                    </svg>
                                </button>
                                <div class="mobile-menu-dropdown" id="menu-plan-${index}">
                                    <button class="mobile-menu-item" onclick="editItem('plans', ${index}); closeMobileMenu(event);">
                                        <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                        </svg>
                                        Edit
                                    </button>
                                    <button class="mobile-menu-item delete" onclick="deleteItem('plans', ${index}); closeMobileMenu(event);">
                                        <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="3 6 5 6 21 6"></polyline>
                                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                        </svg>
                                        Delete
                                    </button>
                                </div>
                        </div>
                    </div>
                    <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.5rem;">
                        Target: ${formatCurrency(target)} by ${plan.deadline || 'No Date'}
                    </div>
                    <div class="progress-track">
                        <div class="progress-fill" style="width: ${percent}%"></div>
                    </div>
                    <div class="plan-meta">
                        <span>Total Savings: ${formatCurrency(totalSavings)}</span>
                        <span style="font-weight: bold; color: var(--purple);">${percent}%</span>
                    </div>
                    <div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.5rem;">
                        Remaining: ${formatCurrency(Math.max(0, target - totalSavings))}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Budget rendering
        function renderBudgetsList() {
            const container = document.getElementById('budgets-container');
            if (!container) return;

            container.innerHTML = '';
            const budgets = state.data.budgets || [];

            if (budgets.length === 0) {
                container.innerHTML = `<div class="text-center" style="padding: 2rem; color: var(--text-light);">${t('no_budgets_set')}</div>`;
                return;
            }

            budgets.forEach((budget, index) => {
                const category = budget.category || 'Uncategorized';
                const budgetAmount = Number(budget.amount || 0);
                const period = budget.period || 'monthly';

                // Helper function to filter expenses by period
                const filterExpensesByPeriod = (expenses, periodType) => {
                    const today = new Date();
                    today.setHours(0, 0, 0, 0);

                    return expenses.filter(exp => {
                        if (!exp.date) return false;
                        const expDate = new Date(exp.date);
                        expDate.setHours(0, 0, 0, 0);

                        switch (periodType) {
                            case 'daily':
                                return expDate.getTime() === today.getTime();
                            case 'monthly':
                                return expDate.getMonth() === today.getMonth() &&
                                    expDate.getFullYear() === today.getFullYear();
                            case 'per 3 month':
                                const threeMonthsAgo = new Date(today);
                                threeMonthsAgo.setMonth(today.getMonth() - 3);
                                return expDate >= threeMonthsAgo && expDate <= today;
                            case 'per 6 month':
                                const sixMonthsAgo = new Date(today);
                                sixMonthsAgo.setMonth(today.getMonth() - 6);
                                return expDate >= sixMonthsAgo && expDate <= today;
                            case 'yearly':
                                return expDate.getFullYear() === today.getFullYear();
                            default:
                                return true; // fallback to all expenses
                        }
                    });
                };

                // Get all expenses for this category
                const categoryExpenses = state.data.expenses.filter(exp => exp.category === category);

                // Calculate overall expenses (all time)
                const overallExpenses = categoryExpenses.reduce((sum, exp) => sum + Number(exp.amount || 0), 0);

                // Calculate actual spending for this category within the budget period
                const periodExpenses = filterExpensesByPeriod(categoryExpenses, period);
                const actualSpending = periodExpenses.reduce((sum, exp) => sum + Number(exp.amount || 0), 0);

                // Calculate period-wise expenses
                const dailyExpenses = filterExpensesByPeriod(categoryExpenses, 'daily');
                const dailySpending = dailyExpenses.reduce((sum, exp) => sum + Number(exp.amount || 0), 0);

                const monthlyExpenses = filterExpensesByPeriod(categoryExpenses, 'monthly');
                const monthlySpending = monthlyExpenses.reduce((sum, exp) => sum + Number(exp.amount || 0), 0);

                const yearlyExpenses = filterExpensesByPeriod(categoryExpenses, 'yearly');
                const yearlySpending = yearlyExpenses.reduce((sum, exp) => sum + Number(exp.amount || 0), 0);

                const percent = budgetAmount > 0 ? Math.min(100, Math.round((actualSpending / budgetAmount) * 100)) : 0;
                const remaining = Math.max(0, budgetAmount - actualSpending);
                const isOverBudget = actualSpending > budgetAmount;

                const div = document.createElement('div');
                div.className = 'budget-item';
                div.style.borderLeftColor = isOverBudget ? 'var(--danger)' : 'var(--primary)';
                const periodLabel = period.charAt(0).toUpperCase() + period.slice(1);
                div.innerHTML = `
                    <div class="budget-header">
                        <div>
                            <div class="budget-category">${category}</div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">Period: ${periodLabel}</div>
                        </div>
                        <div class="action-buttons" style="position: relative;">
                            <button class="btn-edit" onclick="editItem('budgets', ${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                <span class="desktop-only">Edit</span>
                            </button>
                            <button class="btn-delete" onclick="deleteItem('budgets', ${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                                <span class="desktop-only">Delete</span>
                            </button>
                        </div>
                        <div class="mobile-actions-menu">
                                <button class="mobile-menu-button" onclick="toggleMobileMenu(event)" title="Actions">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="1"></circle>
                                        <circle cx="12" cy="5" r="1"></circle>
                                        <circle cx="12" cy="19" r="1"></circle>
                                    </svg>
                                </button>
                                <div class="mobile-menu-dropdown" id="menu-budget-${index}">
                                    <button class="mobile-menu-item" onclick="editItem('budgets', ${index}); closeMobileMenu(event);">
                                        <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                        </svg>
                                        Edit
                                    </button>
                                    <button class="mobile-menu-item delete" onclick="deleteItem('budgets', ${index}); closeMobileMenu(event);">
                                        <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="3 6 5 6 21 6"></polyline>
                                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                        </svg>
                                        Delete
                                    </button>
                                </div>
                            </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-light);">Budget</div>
                            <div class="budget-amount">${formatCurrency(budgetAmount)}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-light);">Spent (${periodLabel})</div>
                            <div class="budget-amount budget-spent">${formatCurrency(actualSpending)}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-light);">Remaining</div>
                            <div class="budget-amount budget-remaining">${formatCurrency(remaining)}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-light);">Overall Expenses</div>
                            <div class="budget-amount" style="color: var(--text-main);">${formatCurrency(overallExpenses)}</div>
                        </div>
                    </div>
                    <div class="progress-track">
                        <div class="progress-fill" style="width: ${percent}%; background: ${isOverBudget ? 'var(--danger)' : 'var(--primary)'}"></div>
                    </div>
                    <div style="font-size: 0.75rem; color: ${isOverBudget ? 'var(--danger)' : 'var(--text-light)'}; margin-top: 0.5rem; margin-bottom: 1rem;">
                        ${isOverBudget ? `‚ö†Ô∏è Over budget by ${formatCurrency(actualSpending - budgetAmount)}` : `${percent}% used`}
                    </div>
                    <div style="background: #f7fafc; border-radius: 8px; padding: 1rem; margin-top: 1rem;">
                        <div style="font-size: 0.875rem; font-weight: 600; color: var(--text-main); margin-bottom: 0.75rem;">Period-wise Expenses Breakdown</div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem;">
                            <div>
                                <div style="font-size: 0.7rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Daily (Today)</div>
                                <div style="font-size: 1rem; font-weight: 600; color: var(--text-main); margin-top: 0.25rem;">${formatCurrency(dailySpending)}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.7rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Monthly (This Month)</div>
                                <div style="font-size: 1rem; font-weight: 600; color: var(--text-main); margin-top: 0.25rem;">${formatCurrency(monthlySpending)}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.7rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px;">Yearly (This Year)</div>
                                <div style="font-size: 1rem; font-weight: 600; color: var(--text-main); margin-top: 0.25rem;">${formatCurrency(yearlySpending)}</div>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Reports rendering
        function renderReports() {
            const container = document.getElementById('reports-container');
            if (!container) return;

            const period = document.getElementById('report-period')?.value || 'month';
            const dateFromContainer = document.getElementById('custom-date-from-container');
            const dateToContainer = document.getElementById('custom-date-to-container');
            const reportType = document.getElementById('report-type')?.value || 'all';
            const categoryFilter = document.getElementById('report-category')?.value || '';
            const accountFilter = document.getElementById('report-account')?.value || '';
            const statusFilter = document.getElementById('report-status')?.value || '';
            const priorityFilter = document.getElementById('report-priority')?.value || '';
            const recurringFilter = document.getElementById('report-recurring')?.value || '';
            const dateFromFilter = document.getElementById('report-date-from')?.value || '';
            const dateToFilter = document.getElementById('report-date-to')?.value || '';

            // Show/hide custom date inputs based on period selection
            if (period === 'custom') {
                if (dateFromContainer) dateFromContainer.style.display = 'block';
                if (dateToContainer) dateToContainer.style.display = 'block';
            } else {
                if (dateFromContainer) dateFromContainer.style.display = 'none';
                if (dateToContainer) dateToContainer.style.display = 'none';
            }

            // Populate category dropdown
            const categorySelect = document.getElementById('report-category');
            if (categorySelect) {
                const allCategories = [
                    ...new Set([
                        ...state.data.income.map(i => i.category).filter(Boolean),
                        ...state.data.expenses.map(e => e.category).filter(Boolean)
                    ])
                ].sort();
                const currentValue = categorySelect.value;
                categorySelect.innerHTML = '<option value="">All Categories</option>' +
                    allCategories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
                if (currentValue) categorySelect.value = currentValue;
            }

            const now = new Date();
            let startDate = '', endDate = '';

            // If date filters are set, use them (they override period selection)
            if (dateFromFilter || dateToFilter) {
                startDate = dateFromFilter;
                endDate = dateToFilter || now.toISOString().split('T')[0];
            } else {
                // Otherwise use period selection
                if (period === 'month') {
                    startDate = new Date(now.getFullYear(), now.getMonth(), 1).toISOString().split('T')[0];
                    endDate = now.toISOString().split('T')[0];
                } else if (period === 'lastmonth') {
                    startDate = new Date(now.getFullYear(), now.getMonth() - 1, 1).toISOString().split('T')[0];
                    endDate = new Date(now.getFullYear(), now.getMonth(), 0).toISOString().split('T')[0];
                } else if (period === 'quarter') {
                    const quarter = Math.floor(now.getMonth() / 3);
                    startDate = new Date(now.getFullYear(), quarter * 3, 1).toISOString().split('T')[0];
                    endDate = now.toISOString().split('T')[0];
                } else if (period === 'year') {
                    startDate = new Date(now.getFullYear(), 0, 1).toISOString().split('T')[0];
                    endDate = now.toISOString().split('T')[0];
                } else if (period === 'lastyear') {
                    startDate = new Date(now.getFullYear() - 1, 0, 1).toISOString().split('T')[0];
                    endDate = new Date(now.getFullYear() - 1, 11, 31).toISOString().split('T')[0];
                } else if (period === 'custom') {
                    startDate = dateFromFilter || '';
                    endDate = dateToFilter || '';
                }
            }

            const filterByDate = (items, dateField) => {
                // If no date filters and period is 'all', return all items
                if (!startDate && !endDate && (period === 'all' || (!dateFromFilter && !dateToFilter))) {
                    return items;
                }

                // If only one date is set, use it appropriately
                if (startDate && !endDate) {
                    return items.filter(item => {
                        const itemDate = item[dateField] || '';
                        return itemDate >= startDate;
                    });
                }
                if (!startDate && endDate) {
                    return items.filter(item => {
                        const itemDate = item[dateField] || '';
                        return itemDate <= endDate;
                    });
                }

                // Both dates set
                if (startDate && endDate) {
                    return items.filter(item => {
                        const itemDate = item[dateField] || '';
                        return itemDate >= startDate && itemDate <= endDate;
                    });
                }

                return items;
            };

            // Apply all filters
            const applyFilters = (items, dateField, itemType) => {
                let filtered = filterByDate(items, dateField);

                // Category filter (for income/expenses)
                if (categoryFilter && (itemType === 'income' || itemType === 'expense')) {
                    filtered = filtered.filter(item => item.category === categoryFilter);
                }

                // Payment method filter (for income/expenses)
                if (accountFilter && (itemType === 'income' || itemType === 'expense')) {
                    filtered = filtered.filter(item => item.account === accountFilter);
                }

                // Status filter (for receivables/payables)
                if (statusFilter && (itemType === 'receivable' || itemType === 'payable')) {
                    filtered = filtered.filter(item => (item.status || 'unpaid') === statusFilter);
                }

                // Priority filter (for receivables/payables)
                if (priorityFilter && (itemType === 'receivable' || itemType === 'payable')) {
                    filtered = filtered.filter(item => (item.priority || 'medium') === priorityFilter);
                }

                // Recurring filter (for income/expenses)
                if (recurringFilter && (itemType === 'income' || itemType === 'expense')) {
                    const isRecurring = recurringFilter === 'recurring';
                    filtered = filtered.filter(item => {
                        const itemRecurring = item.recurring === true || item.recurring === 'true';
                        return isRecurring ? itemRecurring : !itemRecurring;
                    });
                }

                return filtered;
            };

            let periodIncome = applyFilters(state.data.income, 'date', 'income');
            let periodExpenses = applyFilters(state.data.expenses, 'date', 'expense');
            let periodReceivables = applyFilters(state.data.receivables, 'dueDate', 'receivable');
            let periodPayables = applyFilters(state.data.payables, 'dueDate', 'payable');

            // Apply transaction type filter
            if (reportType === 'income') {
                periodExpenses = [];
                periodReceivables = [];
                periodPayables = [];
            } else if (reportType === 'expense') {
                periodIncome = [];
                periodReceivables = [];
                periodPayables = [];
            } else if (reportType === 'receivable') {
                periodIncome = [];
                periodExpenses = [];
                periodPayables = [];
            } else if (reportType === 'payable') {
                periodIncome = [];
                periodExpenses = [];
                periodReceivables = [];
            }

            const totalIncome = periodIncome.reduce((sum, i) => sum + Number(i.amount || 0), 0);
            const totalExpenses = periodExpenses.reduce((sum, i) => sum + Number(i.amount || 0), 0);
            const netBalance = totalIncome - totalExpenses;
            const totalReceivables = periodReceivables.reduce((sum, i) => sum + Number(i.amount || 0), 0);
            const totalPayables = periodPayables.reduce((sum, i) => sum + Number(i.amount || 0), 0);

            let reportHTML = `
                <div class="report-section">
                    <div class="report-title">Summary</div>
                    <div class="report-grid">
            `;

            if (reportType === 'all' || reportType === 'income') {
                reportHTML += `
                        <div class="stat-card" style="border-color: var(--success);">
                            <div class="stat-label" data-translate="total_income">Total Income</div>
                            <div class="stat-value">${formatCurrency(totalIncome)}</div>
                        </div>
                `;
            }

            if (reportType === 'all' || reportType === 'expense') {
                reportHTML += `
                        <div class="stat-card" style="border-color: var(--danger);">
                            <div class="stat-label" data-translate="total_expenses">Total Expenses</div>
                            <div class="stat-value">${formatCurrency(totalExpenses)}</div>
                        </div>
                `;
            }

            if (reportType === 'all' && (periodIncome.length > 0 || periodExpenses.length > 0)) {
                reportHTML += `
                        <div class="stat-card" style="border-color: var(--primary);">
                            <div class="stat-label" data-translate="net_balance">Net Balance</div>
                            <div class="stat-value">${formatCurrency(netBalance)}</div>
                        </div>
                `;
            }

            if (reportType === 'all' || reportType === 'receivable') {
                reportHTML += `
                        <div class="stat-card" style="border-color: var(--warning);">
                            <div class="stat-label" data-translate="due_receivables">Due Receivables</div>
                            <div class="stat-value">${formatCurrency(totalReceivables)}</div>
                        </div>
                `;
            }

            if (reportType === 'all' || reportType === 'payable') {
                reportHTML += `
                        <div class="stat-card" style="border-color: #c53030;">
                            <div class="stat-label" data-translate="due_payables">Due Payables</div>
                            <div class="stat-value">${formatCurrency(totalPayables)}</div>
                        </div>
                `;
            }

            reportHTML += `
                    </div>
                </div>
            `;

            if ((reportType === 'all' || reportType === 'expense') && periodExpenses.length > 0) {
                reportHTML += `
                <div class="report-section">
                    <div class="report-title">Top Expense Categories</div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Amount</th>
                                    <th>Transactions</th>
                                    <th>Percentage</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${getCategoryBreakdown(periodExpenses).map(cat => `
                                    <tr>
                                        <td><span class="tag tag-danger">${cat.name}</span></td>
                                        <td>${formatCurrency(cat.amount)}</td>
                                        <td>${cat.count}</td>
                                        <td>${cat.percentage}%</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td class="table-total-label"><strong>Total:</strong></td>
                                    <td class="table-total-value">${formatCurrency(totalExpenses)}</td>
                                    <td><strong>${periodExpenses.length}</strong></td>
                                    <td><strong>100%</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
                `;
            }

            if ((reportType === 'all' || reportType === 'income') && periodIncome.length > 0) {
                reportHTML += `
                <div class="report-section">
                    <div class="report-title">Top Income Categories</div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Amount</th>
                                    <th>Transactions</th>
                                    <th>Percentage</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${getCategoryBreakdown(periodIncome).map(cat => `
                                    <tr>
                                        <td><span class="tag tag-success">${cat.name}</span></td>
                                        <td>${formatCurrency(cat.amount)}</td>
                                        <td>${cat.count}</td>
                                        <td>${cat.percentage}%</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td class="table-total-label"><strong>Total:</strong></td>
                                    <td class="table-total-value">${formatCurrency(totalIncome)}</td>
                                    <td><strong>${periodIncome.length}</strong></td>
                                    <td><strong>100%</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
                `;
            }

            if (reportHTML.trim() === '<div class="report-section">') {
                reportHTML = '<div class="text-center" style="padding: 2rem; color: var(--text-light);">No data found for the selected filters.</div>';
            }

            container.innerHTML = reportHTML;
        }

        function resetReportFilters() {
            document.getElementById('report-period').value = 'month';
            document.getElementById('report-type').value = 'all';
            document.getElementById('report-category').value = '';
            document.getElementById('report-payment-method').value = '';
            document.getElementById('report-status').value = '';
            document.getElementById('report-priority').value = '';
            document.getElementById('report-recurring').value = '';
            document.getElementById('report-date-from').value = '';
            document.getElementById('report-date-to').value = '';
            document.getElementById('custom-from').value = '';
            document.getElementById('custom-to').value = '';
            document.getElementById('custom-date-range').style.display = 'none';
            renderReports();
        }

        function getCategoryBreakdown(items) {
            const categoryMap = {};
            items.forEach(item => {
                const cat = item.category || 'Other';
                if (!categoryMap[cat]) {
                    categoryMap[cat] = { amount: 0, count: 0 };
                }
                categoryMap[cat].amount += Number(item.amount || 0);
                categoryMap[cat].count++;
            });

            const total = items.reduce((sum, item) => sum + Number(item.amount || 0), 0);
            return Object.entries(categoryMap)
                .map(([name, data]) => ({
                    name,
                    amount: data.amount,
                    count: data.count,
                    percentage: total > 0 ? ((data.amount / total) * 100).toFixed(1) : 0
                }))
                .sort((a, b) => b.amount - a.amount)
                .slice(0, 10);
        }

        function printReport() {
            window.print();
        }

        function exportReportToPDF() {
            // Simple PDF export using window.print with PDF option
            // For better PDF generation, you could use libraries like jsPDF
            alert('To export as PDF, use the Print button and select "Save as PDF" from your printer options.');
            window.print();
        }

        // Analytics rendering
        // Category Management
        function getCategoriesByType(type) {
            // Get all unique categories from data if categories sheet is empty
            if (!state.data.categories || state.data.categories.length === 0) {
                const dataArray = type === 'income' ? state.data.income : state.data.expenses;
                const uniqueCategories = [...new Set(dataArray.map(item => item.category).filter(Boolean))];
                return uniqueCategories.map(cat => ({ name: cat, type: type }));
            }
            return state.data.categories.filter(cat => cat.type === type);
        }

        function renderCategoriesList() {
            const incomeContainer = document.getElementById('income-categories-list');
            const expenseContainer = document.getElementById('expense-categories-list');

            if (!incomeContainer || !expenseContainer) return;

            const incomeCategories = getCategoriesByType('income');
            const expenseCategories = getCategoriesByType('expense');

            // Render Income Categories
            if (incomeCategories.length === 0) {
                incomeContainer.innerHTML = '<div style="color: var(--text-light); font-style: italic; padding: 1rem;">No income categories. Add one to get started.</div>';
            } else {
                incomeContainer.innerHTML = incomeCategories.map((cat, index) => {
                    const catIndex = state.data.categories.findIndex(c => c.name === cat.name && c.type === 'income');
                    const usageCount = state.data.income.filter(i => i.category === cat.name).length;
                    return `
                        <div class="category-item">
                            <div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    ${cat.color ? `<span style="width: 16px; height: 16px; border-radius: 50%; background: ${cat.color}; display: inline-block;"></span>` : ''}
                                    <span class="category-name">${cat.name || 'Unnamed'}</span>
                                </div>
                                <span class="category-badge badge-income">Income</span>
                                <small style="color: var(--text-light); margin-left: 0.5rem;">(${usageCount} transactions)</small>
                            </div>
                            <div class="category-actions">
                                <button class="btn-edit" onclick="editItem('categories', ${catIndex >= 0 ? catIndex : index})">
                                    <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                    </svg>
                                    Edit
                                </button>
                                <button class="btn-delete" onclick="deleteCategory('income', '${cat.name}', ${usageCount})">
                                    <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="3 6 5 6 21 6"></polyline>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                    </svg>
                                    Delete
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            // Render Expense Categories
            if (expenseCategories.length === 0) {
                expenseContainer.innerHTML = '<div style="color: var(--text-light); font-style: italic; padding: 1rem;">No expense categories. Add one to get started.</div>';
            } else {
                expenseContainer.innerHTML = expenseCategories.map((cat, index) => {
                    const catIndex = state.data.categories.findIndex(c => c.name === cat.name && c.type === 'expense');
                    const usageCount = state.data.expenses.filter(e => e.category === cat.name).length;
                    return `
                        <div class="category-item">
                            <div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    ${cat.color ? `<span style="width: 16px; height: 16px; border-radius: 50%; background: ${cat.color}; display: inline-block;"></span>` : ''}
                                    <span class="category-name">${cat.name || 'Unnamed'}</span>
                                </div>
                                <span class="category-badge badge-expense">Expense</span>
                                <small style="color: var(--text-light); margin-left: 0.5rem;">(${usageCount} transactions)</small>
                            </div>
                            <div class="category-actions">
                                <button class="btn-edit" onclick="editItem('categories', ${catIndex >= 0 ? catIndex : index})">
                                    <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                    </svg>
                                    Edit
                                </button>
                                <button class="btn-delete" onclick="deleteCategory('expense', '${cat.name}', ${usageCount})">
                                    <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="3 6 5 6 21 6"></polyline>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                    </svg>
                                    Delete
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        function deleteCategory(type, name, usageCount) {
            if (usageCount > 0) {
                if (!confirm(`${t('category_used_in_transactions')} ${usageCount} ${t('transaction')}${usageCount !== 1 ? 's' : ''}. ${t('deleting_will_set_to_other')}`)) {
                    return;
                }
                // Update transactions to use "Other" category
                if (type === 'income') {
                    state.data.income.forEach(item => {
                        if (item.category === name) item.category = 'Other';
                    });
                } else {
                    state.data.expenses.forEach(item => {
                        if (item.category === name) item.category = 'Other';
                    });
                }
            }

            const index = state.data.categories.findIndex(c => c.name === name && c.type === type);
            if (index >= 0) {
                state.data.categories.splice(index, 1);
            }

            writeExcelFile().then(() => {
                renderAll();
            });
        }

        function renderAnalytics() {
            const container = document.getElementById('analytics-container');
            if (!container) return;

            const monthlyData = getMonthlyData();
            const expenseCategories = getCategoryData('expenses');
            const incomeCategories = getCategoryData('income');

            // Calculate trends
            const recentMonths = 3;
            const recentExpenses = monthlyData.expenses.slice(-recentMonths);
            const recentIncome = monthlyData.income.slice(-recentMonths);
            const avgRecentExpense = recentExpenses.length > 0
                ? recentExpenses.reduce((a, b) => a + b, 0) / recentExpenses.length
                : 0;
            const avgRecentIncome = recentIncome.length > 0
                ? recentIncome.reduce((a, b) => a + b, 0) / recentIncome.length
                : 0;

            container.innerHTML = `
                <div class="analytics-grid">
                    <div class="insight-card">
                        <div class="insight-title">Average Monthly Spending</div>
                        <div class="insight-value">${formatCurrency(avgRecentExpense)}</div>
                        <div class="insight-trend">Last ${recentMonths} months average</div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-title" data-translate="average_monthly_income">Average Monthly Income</div>
                        <div class="insight-value">${formatCurrency(avgRecentIncome)}</div>
                        <div class="insight-trend">Last ${recentMonths} months average</div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-title">Savings Rate</div>
                        <div class="insight-value">${avgRecentIncome > 0 ? ((avgRecentIncome - avgRecentExpense) / avgRecentIncome * 100).toFixed(1) : 0}%</div>
                        <div class="insight-trend">Income vs Expenses</div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-title">Total Transactions</div>
                        <div class="insight-value">${state.data.expenses.length + state.data.income.length}</div>
                        <div class="insight-trend">${state.data.expenses.length} expenses, ${state.data.income.length} income</div>
                    </div>
                </div>
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3>Top Spending Categories</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Total Amount</th>
                                    <th>Percentage</th>
                                    <th>Transactions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${expenseCategories.labels.slice(0, 10).map((label, idx) => {
                const amount = expenseCategories.values[idx];
                const total = expenseCategories.values.reduce((a, b) => a + b, 0);
                const percentage = total > 0 ? ((amount / total) * 100).toFixed(1) : 0;
                const count = state.data.expenses.filter(e => e.category === label).length;
                return `
                                        <tr>
                                            <td><span class="tag tag-danger">${label}</span></td>
                                            <td>${formatCurrency(amount)}</td>
                                            <td>${percentage}%</td>
                                            <td>${count}</td>
                                        </tr>
                                    `;
            }).join('')}
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td class="table-total-label"><strong>Total:</strong></td>
                                    <td class="table-total-value">${formatCurrency(expenseCategories.values.reduce((a, b) => a + b, 0))}</td>
                                    <td><strong>100%</strong></td>
                                    <td><strong>${state.data.expenses.length}</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
                <div class="card">
                    <h3>Top Income Categories</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Total Amount</th>
                                    <th>Percentage</th>
                                    <th>Transactions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${incomeCategories.labels.slice(0, 10).map((label, idx) => {
                const amount = incomeCategories.values[idx];
                const total = incomeCategories.values.reduce((a, b) => a + b, 0);
                const percentage = total > 0 ? ((amount / total) * 100).toFixed(1) : 0;
                const count = state.data.income.filter(i => i.category === label).length;
                return `
                                        <tr>
                                            <td><span class="tag tag-success">${label}</span></td>
                                            <td>${formatCurrency(amount)}</td>
                                            <td>${percentage}%</td>
                                            <td>${count}</td>
                                        </tr>
                                    `;
            }).join('')}
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td class="table-total-label"><strong>Total:</strong></td>
                                    <td class="table-total-value">${formatCurrency(incomeCategories.values.reduce((a, b) => a + b, 0))}</td>
                                    <td><strong>100%</strong></td>
                                    <td><strong>${state.data.income.length}</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            `;
        }

        // --- 4. MODAL & FORM LOGIC ---

        // Edit state
        let editingIndex = null;
        let editingType = null;

        function openModal(mode, type = null, editIndex = null, categoryType = null) {
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            editingIndex = editIndex;
            editingType = type;
            if (categoryType) window.lastCategoryType = categoryType;

            overlay.classList.add('active');

            if (mode === 'selector') {
                content.innerHTML = `
                    <div class="modal-header">${t('add')} ${t('new')} ${t('item')}</div>
                    <div class="type-grid">
                        <div class="type-card" onclick="openModal('form', 'income')">
                            <span class="type-icon">üí∞</span>
                            <div class="type-label">${t('income')}</div>
                        </div>
                        <div class="type-card" onclick="openModal('form', 'expense')">
                            <span class="type-icon">üí∏</span>
                            <div class="type-label">${t('expenses')}</div>
                        </div>
                        <div class="type-card" onclick="openModal('form', 'receivable')">
                            <span class="type-icon">üì•</span>
                            <div class="type-label">${t('receivables')}</div>
                        </div>
                        <div class="type-card" onclick="openModal('form', 'payable')">
                            <span class="type-icon">üì§</span>
                            <div class="type-label">${t('payables')}</div>
                        </div>
                        <div class="type-card"  onclick="openModal('form', 'plan')">
                            <span class="type-icon">üéØ</span>
                            <div class="type-label">${t('plans')}</div>
                        </div>
                        <div class="type-card"  onclick="openModal('form', 'budget')">
                            <span class="type-icon">üí∞</span>
                            <div class="type-label">${t('budgets')}</div>
                        </div>
                        <div class="type-card"  onclick="openCategorySelector()">
                            <span class="type-icon">üìÅ</span>
                            <div class="type-label">${t('categories')}</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
                `;
                setTimeout(() => translatePage(), 50);
            } else if (mode === 'form') {
                const isEditing = editIndex !== null;
                // Map form type back to data type for retrieving item
                const dataTypeMap = {
                    'income': 'income',
                    'expense': 'expenses',
                    'receivable': 'receivables',
                    'payable': 'payables',
                    'plan': 'plans',
                    'budget': 'budgets',
                    'category': 'categories'
                };
                const dataType = dataTypeMap[type] || type;
                const item = isEditing && editIndex !== null ? (state.data[dataType] && state.data[dataType][editIndex]) : null;
                const today = new Date().toISOString().split('T')[0]; // Default date

                let formHTML = `<div class="modal-header">${isEditing ? 'Edit' : 'Add'} ${type.charAt(0).toUpperCase() + type.slice(1)}</div>`;

                if (type === 'income') {
                    const incomeCategories = getCategoriesByType('income').map(c => c.name);
                    const uniqueCategories = [...new Set([...incomeCategories, ...state.data.income.map(i => i.category).filter(Boolean)])].sort();
                    const categoryOptions = uniqueCategories.map(cat => `<option${item?.category === cat ? ' selected' : ''}>${cat || 'Other'}</option>`).join('');
                    formHTML += `
                        <div class="form-group">
                            <label class="form-label">Source</label>
                            <input type="text" class="form-input" id="inp-source" placeholder="${t('placeholder_salary_freelance')}" value="${item?.source || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Category</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <select class="form-select" id="inp-category" style="flex: 1;">
                                    <option value="">Select Category</option>
                                    ${categoryOptions}
                                </select>
                                <button type="button" class="btn-icon" onclick="closeModal(); setTimeout(() => openModal('form', 'category', null, 'income'), 100);" title="Manage Categories">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('amount')}</label>
                            <input type="number" class="form-input" id="inp-amount" placeholder="0" step="0.01" value="${item?.amount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('date')}</label>
                            <input type="date" class="form-input" id="inp-date" value="${item?.date || today}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('account')} *</label>
                            ${(state.data.accounts || []).length === 0 ? `
                                <div style="padding: 1rem; background: #fef3c7; border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="font-size: 0.875rem; color: #92400e;">‚ö†Ô∏è No accounts found. Please <a href="#" onclick="closeModal(); setTimeout(() => switchTab('accounts'), 100);" style="color: var(--primary); text-decoration: underline;">add an account</a> first.</div>
                                </div>
                            ` : ''}
                            <div style="display: flex; gap: 0.5rem;">
                                <select class="form-select" id="inp-account" style="flex: 1;" required ${(state.data.accounts || []).length === 0 ? 'disabled' : ''}>
                                    <option value="">${t('select_account')}</option>
                                    ${(state.data.accounts || []).map(acc => `<option value="${acc.name}" ${(item?.account === acc.name || (!item?.account && item?.paymentMethod && item.paymentMethod === acc.type)) ? 'selected' : ''}>${acc.name} (${acc.type})</option>`).join('')}
                                </select>
                                <button type="button" class="btn-icon" onclick="closeModal(); setTimeout(() => switchTab('accounts'), 100);" title="Manage Accounts">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('family_member')} (${t('optional')})</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <select class="form-select" id="inp-family-member" style="flex: 1;">
                                    <option value="">${t('select_family_member')}</option>
                                    ${(state.data.familyMembers || []).filter(m => m.active !== false).map(member => `<option value="${member.name}" ${item?.familyMember === member.name ? 'selected' : ''}>${member.name}${member.relation ? ` (${member.relation})` : ''}</option>`).join('')}
                                </select>
                                <button type="button" class="btn-icon" onclick="closeModal(); setTimeout(() => switchTab('family'), 100);" title="Manage Family Members">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('notes_optional')}</label>
                            <textarea class="form-input" id="inp-notes" placeholder="${t('additional_notes')}" rows="2">${item?.notes || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="inp-recurring" ${item?.recurring ? 'checked' : ''} onchange="toggleRecurringOptions('income')">
                                <span>${t('recurring_transaction')}</span>
                            </label>
                        </div>
                        <div id="recurring-options-income" style="display: ${item?.recurring ? 'block' : 'none'}; margin-top: 0.5rem; padding: 1rem; background: #f7fafc; border-radius: 8px;">
                            <div class="form-group">
                                <label class="form-label">${t('frequency')}</label>
                                <select class="form-select" id="inp-recurring-frequency-income">
                                    <option value="daily" ${item?.recurringFrequency === 'daily' ? 'selected' : ''}>${t('daily')}</option>
                                    <option value="weekly" ${item?.recurringFrequency === 'weekly' ? 'selected' : ''}>${t('weekly')}</option>
                                    <option value="monthly" ${item?.recurringFrequency === 'monthly' || !item?.recurringFrequency ? 'selected' : ''}>${t('monthly')}</option>
                                    <option value="yearly" ${item?.recurringFrequency === 'yearly' ? 'selected' : ''}>${t('yearly')}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">${t('next_occurrence_date')}</label>
                                <input type="date" class="form-input" id="inp-recurring-next-income" value="${item?.recurringNextDate || ''}">
                            </div>
                        </div>
                    `;
                } else if (type === 'expense') {
                    const expenseCategories = getCategoriesByType('expense').map(c => c.name);
                    const uniqueCategories = [...new Set([...expenseCategories, ...state.data.expenses.map(e => e.category).filter(Boolean)])].sort();
                    const categoryOptions = uniqueCategories.map(cat => `<option${item?.category === cat ? ' selected' : ''}>${cat || 'Other'}</option>`).join('');
                    formHTML += `
                        <div class="form-group">
                            <label class="form-label">${t('description')}</label>
                            <input type="text" class="form-input" id="inp-desc" placeholder="${t('placeholder_groceries')}" value="${item?.description || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('category')}</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <select class="form-select" id="inp-category" style="flex: 1;">
                                    <option value="">${t('select_category')}</option>
                                    ${categoryOptions}
                                </select>
                                <button type="button" class="btn-icon" onclick="closeModal(); setTimeout(() => openModal('form', 'category', null, 'expense'), 100);" title="Manage Categories">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('amount')}</label>
                            <input type="number" class="form-input" id="inp-amount" placeholder="0" step="0.01" value="${item?.amount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('date')}</label>
                            <input type="date" class="form-input" id="inp-date" value="${item?.date || today}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('account')} *</label>
                            ${(state.data.accounts || []).length === 0 ? `
                                <div style="padding: 1rem; background: #fef3c7; border-radius: 8px; margin-bottom: 0.5rem;">
                                    <div style="font-size: 0.875rem; color: #92400e;">‚ö†Ô∏è No accounts found. Please <a href="#" onclick="closeModal(); setTimeout(() => switchTab('accounts'), 100);" style="color: var(--primary); text-decoration: underline;">add an account</a> first.</div>
                                </div>
                            ` : ''}
                            <div style="display: flex; gap: 0.5rem;">
                                <select class="form-select" id="inp-account" style="flex: 1;" required ${(state.data.accounts || []).length === 0 ? 'disabled' : ''}>
                                    <option value="">${t('select_account')}</option>
                                    ${(state.data.accounts || []).map(acc => `<option value="${acc.name}" ${(item?.account === acc.name || (!item?.account && item?.paymentMethod && item.paymentMethod === acc.type)) ? 'selected' : ''}>${acc.name} (${acc.type})</option>`).join('')}
                                </select>
                                <button type="button" class="btn-icon" onclick="closeModal(); setTimeout(() => switchTab('accounts'), 100);" title="Manage Accounts">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Expense for / Given to (${t('optional')})</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <select class="form-select" id="inp-expense-for" style="flex: 1;" onchange="updateContributionUI()">
                                    <option value="">None (Shared expense)</option>
                                    ${(state.data.familyMembers || []).filter(m => m.active !== false).map(member => `<option value="${member.name}" ${item?.expenseFor === member.name ? 'selected' : ''}>${member.name}${member.relation ? ` (${member.relation})` : ''}</option>`).join('')}
                                </select>
                                <button type="button" class="btn-icon" onclick="closeModal(); setTimeout(() => switchTab('family'), 100);" title="Manage Family Members">‚öôÔ∏è</button>
                            </div>
                            <small style="color: var(--text-light); font-size: 0.75rem; display: block; margin-top: 0.25rem;">
                                Select a family member if this expense is given to them. The full amount will be counted for both the recipient and all selected contributors below.
                            </small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('family_members')} - Contributors (${t('optional')})</label>
                            <div style="display: flex; gap: 0.5rem; align-items: start;">
                                <div style="flex: 1; display: flex; flex-direction: column; gap: 0.5rem;">
                                    ${(state.data.familyMembers || []).filter(m => m.active !== false).map((member, idx) => {
                        const actualIdx = (state.data.familyMembers || []).indexOf(member);
                        return `
                                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer; padding: 0.5rem; background: #f7fafc; border-radius: 4px;">
                                            <input type="checkbox" id="inp-family-member-${actualIdx}" value="${member.name}" ${item?.familyMembers && Array.isArray(item.familyMembers) && item.familyMembers.includes(member.name) ? 'checked' : ''} onchange="updateContributionUI()">
                                            <span>${member.name}${member.relation ? ` (${member.relation})` : ''}</span>
                                        </label>
                                    `;
                    }).join('')}
                                    ${(state.data.familyMembers || []).filter(m => m.active !== false).length === 0 ? `<div style="padding: 0.5rem; color: var(--text-light); font-size: 0.875rem;">No active family members. <a href="#" onclick="closeModal(); setTimeout(() => switchTab('family'), 100);" style="color: var(--primary);">Add or activate family members</a> first.</div>` : ''}
                                </div>
                                <button type="button" class="btn-icon" onclick="closeModal(); setTimeout(() => switchTab('family'), 100);" title="Manage Family Members">‚öôÔ∏è</button>
                            </div>
                            <div id="contribution-type-section" style="margin-top: 0.5rem; display: none;">
                                <div class="form-group" style="margin-bottom: 0.5rem;">
                                    <label class="form-label">Contribution Type</label>
                                    <select class="form-select" id="inp-contribution-type" onchange="updateContributionUI()">
                                        <option value="equal" ${!item?.contributionType || item?.contributionType === 'equal' ? 'selected' : ''}>Equal (Divide equally)</option>
                                        <option value="custom" ${item?.contributionType === 'custom' ? 'selected' : ''}>Custom (Set individual amounts)</option>
                                    </select>
                                </div>
                                <div id="equal-contribution-display" style="padding: 0.5rem; background: #e6fffa; border-radius: 4px; display: none;">
                                    <div style="font-size: 0.875rem; color: var(--text-main);">
                                        <strong>Per person:</strong> <span id="per-person-amount">0</span>
                                    </div>
                                </div>
                                <div id="custom-contribution-inputs" style="display: none; padding: 0.5rem; background: #f7fafc; border-radius: 4px;">
                                    ${(state.data.familyMembers || []).filter(m => m.active !== false).map((member, idx) => {
                        const actualIdx = (state.data.familyMembers || []).indexOf(member);
                        const contributions = item?.contributions || {};
                        const memberAmount = contributions[member.name] || '';
                        const isSelected = item?.familyMembers && Array.isArray(item.familyMembers) && item.familyMembers.includes(member.name);
                        return `
                                        <div class="form-group" style="margin-bottom: 0.5rem; display: none;" id="contribution-${actualIdx}">
                                            <label class="form-label" style="font-size: 0.875rem;">${member.name}${member.relation ? ` (${member.relation})` : ''}</label>
                                            <input type="number" class="form-input" id="inp-contribution-${actualIdx}" step="0.01" value="${memberAmount}" placeholder="0.00" onchange="updateContributionTotal()">
                                        </div>
                                    `;
                    }).join('')}
                                    <div id="contribution-total" style="margin-top: 0.5rem; padding: 0.5rem; background: #fff3cd; border-radius: 4px; font-size: 0.875rem;">
                                        <strong>Total:</strong> <span id="contribution-total-amount">0.00</span> / <span id="expense-total-amount">0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('notes_optional')}</label>
                            <textarea class="form-input" id="inp-notes" placeholder="${t('additional_notes')}" rows="2">${item?.notes || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="inp-recurring" ${item?.recurring ? 'checked' : ''} onchange="toggleRecurringOptions('expense')">
                                <span>${t('recurring_transaction')}</span>
                            </label>
                        </div>
                        <div id="recurring-options-expense" style="display: ${item?.recurring ? 'block' : 'none'}; margin-top: 0.5rem; padding: 1rem; background: #f7fafc; border-radius: 8px;">
                            <div class="form-group">
                                <label class="form-label">${t('frequency')}</label>
                                <select class="form-select" id="inp-recurring-frequency-expense">
                                    <option value="daily" ${item?.recurringFrequency === 'daily' ? 'selected' : ''}>${t('daily')}</option>
                                    <option value="weekly" ${item?.recurringFrequency === 'weekly' ? 'selected' : ''}>${t('weekly')}</option>
                                    <option value="monthly" ${item?.recurringFrequency === 'monthly' || !item?.recurringFrequency ? 'selected' : ''}>${t('monthly')}</option>
                                    <option value="yearly" ${item?.recurringFrequency === 'yearly' ? 'selected' : ''}>${t('yearly')}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Next Occurrence Date</label>
                                <input type="date" class="form-input" id="inp-recurring-next-expense" value="${item?.recurringNextDate || ''}">
                            </div>
                        </div>
                    `;
                } else if (type === 'receivable') {
                    formHTML += `
                        <div class="form-group">
                            <label class="form-label">${t('from_client')}</label>
                            <input type="text" class="form-input" id="inp-from" placeholder="${t('name_placeholder')}" value="${item?.from || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('description')}</label>
                            <input type="text" class="form-input" id="inp-desc" placeholder="${t('reason')}" value="${item?.description || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('amount')}</label>
                            <input type="number" class="form-input" id="inp-amount" placeholder="0" value="${item?.amount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('due_date')}</label>
                            <input type="date" class="form-input" id="inp-duedate" value="${item?.dueDate || today}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('status')}</label>
                            <select class="form-select" id="inp-status">
                                <option value="unpaid" ${(item?.status || 'unpaid') === 'unpaid' ? 'selected' : ''}>${t('unpaid')}</option>
                                <option value="paid" ${item?.status === 'paid' ? 'selected' : ''}>${t('paid')}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('priority')}</label>
                            <select class="form-select" id="inp-priority">
                                <option value="low" ${(item?.priority || 'medium') === 'low' ? 'selected' : ''}>${t('low')}</option>
                                <option value="medium" ${(item?.priority || 'medium') === 'medium' ? 'selected' : ''}>${t('medium')}</option>
                                <option value="high" ${item?.priority === 'high' ? 'selected' : ''}>${t('high')}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('notes_optional')}</label>
                            <textarea class="form-input" id="inp-notes" placeholder="${t('additional_notes')}" rows="2">${item?.notes || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('reminder_days_before')}</label>
                            <input type="number" class="form-input" id="inp-reminder-days" placeholder="${t('placeholder_example_3')}" min="0" value="${item?.reminderDays || ''}">
                            <small style="color: var(--text-light); font-size: 0.75rem;">${t('reminder_help_text')}</small>
                        </div>
                    `;
                } else if (type === 'payable') {
                    formHTML += `
                        <div class="form-group">
                            <label class="form-label">${t('to_vendor')}</label>
                            <input type="text" class="form-input" id="inp-to" placeholder="${t('name_placeholder')}" value="${item?.to || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('description')}</label>
                            <input type="text" class="form-input" id="inp-desc" placeholder="${t('reason')}" value="${item?.description || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('amount')}</label>
                            <input type="number" class="form-input" id="inp-amount" placeholder="0" value="${item?.amount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('due_date')}</label>
                            <input type="date" class="form-input" id="inp-duedate" value="${item?.dueDate || today}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('status')}</label>
                            <select class="form-select" id="inp-status">
                                <option value="unpaid" ${(item?.status || 'unpaid') === 'unpaid' ? 'selected' : ''}>${t('unpaid')}</option>
                                <option value="paid" ${item?.status === 'paid' ? 'selected' : ''}>${t('paid')}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('priority')}</label>
                            <select class="form-select" id="inp-priority">
                                <option value="low" ${(item?.priority || 'medium') === 'low' ? 'selected' : ''}>${t('low')}</option>
                                <option value="medium" ${(item?.priority || 'medium') === 'medium' ? 'selected' : ''}>${t('medium')}</option>
                                <option value="high" ${item?.priority === 'high' ? 'selected' : ''}>${t('high')}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('notes_optional')}</label>
                            <textarea class="form-input" id="inp-notes" placeholder="${t('additional_notes')}" rows="2">${item?.notes || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('reminder_days_before')}</label>
                            <input type="number" class="form-input" id="inp-reminder-days" placeholder="${t('placeholder_example_3')}" min="0" value="${item?.reminderDays || ''}">
                            <small style="color: var(--text-light); font-size: 0.75rem;">${t('reminder_help_text')}</small>
                        </div>
                    `;
                } else if (type === 'plan') {
                    formHTML += `
                        <div class="form-group">
                            <label class="form-label">${t('plan_title')}</label>
                            <input type="text" class="form-input" id="inp-title" placeholder="${t('placeholder_new_laptop')}" value="${item?.title || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('target_amount')}</label>
                            <input type="number" class="form-input" id="inp-target" placeholder="0" value="${item?.targetAmount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('start_date')}</label>
                            <input type="date" class="form-input" id="inp-start-date" value="${item?.startDate || today}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('target_deadline')}</label>
                            <input type="date" class="form-input" id="inp-deadline" value="${item?.deadline || today}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('status')}</label>
                            <select class="form-select" id="inp-status">
                                <option value="in progress" ${(item?.status || 'in progress') === 'in progress' ? 'selected' : ''}>${t('in_progress')}</option>
                                <option value="completed" ${item?.status === 'completed' ? 'selected' : ''}>${t('completed')}</option>
                                <option value="cancelled" ${item?.status === 'cancelled' ? 'selected' : ''}>${t('cancelled')}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('priority')}</label>
                            <select class="form-select" id="inp-priority">
                                <option value="low" ${(item?.priority || 'medium') === 'low' ? 'selected' : ''}>${t('low')}</option>
                                <option value="medium" ${(item?.priority || 'medium') === 'medium' ? 'selected' : ''}>${t('medium')}</option>
                                <option value="high" ${item?.priority === 'high' ? 'selected' : ''}>${t('high')}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('notes_optional')}</label>
                            <textarea class="form-input" id="inp-notes" placeholder="${t('additional_notes')}" rows="2">${item?.notes || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('reminder_days_before_deadline')}</label>
                            <input type="number" class="form-input" id="inp-reminder-days" placeholder="${t('placeholder_example_7')}" min="0" value="${item?.reminderDays || ''}">
                            <small style="color: var(--text-light); font-size: 0.75rem;">${t('reminder_deadline_help')}</small>
                        </div>
                        <div style="padding: 1rem; background: #f7fafc; border-radius: 8px; font-size: 0.875rem; color: var(--text-light);">
                            ${t('progress_note')}
                        </div>
                    `;
                } else if (type === 'category') {
                    const categoryType = editIndex === null && typeof editIndex !== 'number' ? (window.lastCategoryType || 'expense') : (item?.type || 'expense');
                    const colors = ['#4299e1', '#48bb78', '#ed8936', '#e53e3e', '#9f7aea', '#38b2ac', '#f56565', '#805ad5', '#d69e2e', '#319795'];
                    const currentColor = item?.color || colors[0];
                    formHTML += `
                        <div class="form-group">
                            <label class="form-label">${t('category')} ${t('name')}</label>
                            <input type="text" class="form-input" id="inp-name" placeholder="${t('placeholder_groceries_salary')}" value="${item?.name || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('type')}</label>
                            <select class="form-select" id="inp-type" ${item ? 'disabled' : ''}>
                                <option value="income" ${categoryType === 'income' ? 'selected' : ''}>${t('income')}</option>
                                <option value="expense" ${categoryType === 'expense' ? 'selected' : ''}>${t('expenses')}</option>
                            </select>
                            ${item ? `<small style="color: var(--text-light);">${t('type_cannot_change')}</small>` : ''}
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('color')}</label>
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem;">
                                ${colors.map(color => `
                                    <label style="cursor: pointer; display: flex; align-items: center; gap: 0.25rem;">
                                        <input type="radio" name="category-color" value="${color}" ${currentColor === color ? 'checked' : ''} style="display: none;">
                                        <span style="width: 32px; height: 32px; border-radius: 50%; background: ${color}; border: ${currentColor === color ? '3px solid #000' : '2px solid #e2e8f0'}; display: block;"></span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `;
                } else if (type === 'budget') {
                    const categories = [...new Set(state.data.expenses.map(e => e.category).filter(Boolean))].sort();
                    const categoryOptions = categories.map(cat => `<option${item?.category === cat ? ' selected' : ''}>${cat}</option>`).join('');
                    const periodValue = item?.period || 'monthly';
                    formHTML += `
                        <div class="form-group">
                            <label class="form-label">Category</label>
                            <select class="form-select" id="inp-category" ${isEditing ? 'disabled' : ''}>
                                <option value="">Select Category</option>
                                ${categoryOptions}
                            </select>
                            ${isEditing ? '<small style="color: var(--text-light);">Category cannot be changed after creation</small>' : ''}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Budget Amount</label>
                            <input type="number" class="form-input" id="inp-amount" placeholder="0" value="${item?.amount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('period')}</label>
                            <select class="form-select" id="inp-period">
                                <option value="daily" ${periodValue === 'daily' ? 'selected' : ''}>${t('daily')}</option>
                                <option value="monthly" ${periodValue === 'monthly' ? 'selected' : ''}>${t('monthly')}</option>
                                <option value="per 3 month" ${periodValue === 'per 3 month' ? 'selected' : ''}>${t('per_3_month')}</option>
                                <option value="per 6 month" ${periodValue === 'per 6 month' ? 'selected' : ''}>${t('per_6_month')}</option>
                                <option value="yearly" ${periodValue === 'yearly' ? 'selected' : ''}>${t('yearly')}</option>
                            </select>
                        </div>
                        <div style="padding: 1rem; background: #f7fafc; border-radius: 8px; font-size: 0.875rem; color: var(--text-light);">
                            ${t('budget_tracks_info')}
                        </div>
                    `;
                }

                formHTML += `
                    <button class="btn btn-primary" onclick="submitForm('${type}')">${isEditing ? t('update_item') : t('save_item')}</button>
                    <button class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
                `;

                content.innerHTML = formHTML;
                setTimeout(() => {
                    translatePage();
                    // Setup expense contribution UI if it's an expense form
                    if (type === 'expense') {
                        const amountInput = document.getElementById('inp-amount');
                        if (amountInput) {
                            amountInput.addEventListener('input', updateContributionUI);
                            amountInput.addEventListener('change', updateContributionUI);
                        }

                        const expenseForSelect = document.getElementById('inp-expense-for');
                        if (expenseForSelect) {
                            expenseForSelect.addEventListener('change', updateContributionUI);
                        }

                        document.querySelectorAll('input[id^="inp-family-member-"]').forEach(checkbox => {
                            checkbox.addEventListener('change', updateContributionUI);
                        });

                        // Initial calculation
                        setTimeout(updateContributionUI, 100);
                    }
                }, 50);
            }
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
            editingIndex = null;
            editingType = null;
        }

        function editItem(type, index) {
            // Map data type to form type
            if (type === 'income') openModal('form', 'income', index);
            else if (type === 'expenses') openModal('form', 'expense', index);
            else if (type === 'receivables') openModal('form', 'receivable', index);
            else if (type === 'payables') openModal('form', 'payable', index);
            else if (type === 'plans') openModal('form', 'plan', index);
            else if (type === 'budgets') openModal('form', 'budget', index);
            else if (type === 'categories') openModal('form', 'category', index);
            else if (type === 'templates') editTemplate(index);
            else if (type === 'accounts') editAccount(index);
            else if (type === 'debts') editDebt(index);
            else if (type === 'transfers') editTransfer(index);
        }

        function duplicateTransaction(type, index) {
            const data = state.data[type];
            if (data && data[index]) {
                const original = data[index];
                const duplicate = { ...original };
                duplicate.date = new Date().toISOString().split('T')[0]; // Set to today
                delete duplicate.id; // Remove any ID if present
                data.push(duplicate);
                writeExcelFile().then(() => {
                    showToast('Transaction duplicated successfully!', 'success');
                    renderAll();
                });
            }
        }

        function openCategorySelector() {
            closeModal();
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">Add Category</div>
                <div class="form-group">
                    <label class="form-label">Category Type</label>
                    <select class="form-select" id="cat-type-selector" onchange="updateCategoryForm()">
                        <option value="income">Income</option>
                        <option value="expense">Expense</option>
                    </select>
                </div>
                <div id="category-form-content"></div>
                <button class="btn btn-primary" onclick="submitCategoryFromSelector()">${t('add')} ${t('categories')}</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            `;
            updateCategoryForm();
        }

        function updateCategoryForm() {
            const type = document.getElementById('cat-type-selector')?.value || 'expense';
            const formContent = document.getElementById('category-form-content');
            if (formContent) {
                formContent.innerHTML = `
                    <div class="form-group">
                        <label class="form-label">Category Name</label>
                        <input type="text" class="form-input" id="cat-name-input" placeholder="${t('placeholder_groceries_salary')}" required>
                    </div>
                    <div style="padding: 1rem; background: #f7fafc; border-radius: 8px; font-size: 0.875rem; color: var(--text-light);">
                        This category will be available for ${type} transactions.
                    </div>
                `;
            }
        }

        function submitCategoryFromSelector() {
            const type = document.getElementById('cat-type-selector')?.value || 'expense';
            const name = document.getElementById('cat-name-input')?.value.trim();

            if (!name) {
                showToast(t('category_name_required'), 'error');
                return;
            }

            const newCategory = { name, type };

            // Check if category already exists
            if (!state.data.categories) state.data.categories = [];
            const exists = state.data.categories.find(c =>
                c.name.toLowerCase() === name.toLowerCase() && c.type === type
            );

            if (exists) {
                showToast('This category already exists!', 'error');
                return;
            }

            state.data.categories.push(newCategory);
            writeExcelFile().then(() => {
                showToast('Category added successfully!', 'success');
                closeModal();
                if (window.location.hash === '#categories' || document.querySelector('.nav-tab.active')?.textContent.includes('Categor')) {
                    switchTab('categories');
                } else {
                    renderAll();
                }
            });
        }

        function submitForm(type) {
            let newItem = {};

            // Map form type to data array name
            const dataTypeMap = {
                'income': 'income',
                'expense': 'expenses',
                'receivable': 'receivables',
                'payable': 'payables',
                'plan': 'plans',
                'budget': 'budgets',
                'category': 'categories'
            };
            const dataType = dataTypeMap[type] || type;

            // Helper to get value
            const val = (id) => document.getElementById(id)?.value || '';
            const num = (id) => Number(document.getElementById(id)?.value) || 0;

            const isEditing = editingIndex !== null;

            // Ensure the data array exists
            if (!state.data[dataType]) state.data[dataType] = [];

            // Save to transaction history before making changes
            if (!state.data.transactionHistory) state.data.transactionHistory = [];
            const historyEntry = {
                timestamp: new Date().toISOString(),
                action: isEditing ? 'edit' : 'add',
                type: type,
                data: isEditing && editingIndex !== null && state.data[dataType][editingIndex] ? JSON.parse(JSON.stringify(state.data[dataType][editingIndex])) : null
            };
            state.data.transactionHistory.push(historyEntry);
            // Keep only last 50 history entries
            if (state.data.transactionHistory.length > 50) {
                state.data.transactionHistory.shift();
            }

            // Validation helper
            const validateRequired = (value, fieldName) => {
                if (!value || value.trim() === '') {
                    showToast(`${fieldName} ${t('is_required')}`, 'error');
                    return false;
                }
                return true;
            };

            const validateAmount = (amount, fieldName = t('amount')) => {
                if (!amount || amount <= 0) {
                    showToast(`${fieldName} ${t('must_be_greater_than_zero')}`, 'error');
                    return false;
                }
                return true;
            };

            if (type === 'income') {
                if (!validateRequired(val('inp-source'), 'Source')) return;
                if (!validateAmount(num('inp-amount'), 'Amount')) return;
                if (!validateRequired(val('inp-date'), 'Date')) return;
                if (!validateRequired(val('inp-account'), 'Account')) return;
                const familyMember = val('inp-family-member');
                newItem = {
                    source: val('inp-source'),
                    category: val('inp-category') || 'Other',
                    amount: num('inp-amount'),
                    date: val('inp-date'),
                    account: val('inp-account'),
                    familyMember: familyMember || undefined,
                    notes: val('inp-notes'),
                    recurring: document.getElementById('inp-recurring')?.checked || false,
                    recurringFrequency: document.getElementById('inp-recurring')?.checked ? (val('inp-recurring-frequency-income') || 'monthly') : '',
                    recurringNextDate: document.getElementById('inp-recurring')?.checked ? val('inp-recurring-next-income') : ''
                };
                if (isEditing && editingIndex !== null) {
                    state.data[dataType][editingIndex] = newItem;
                } else {
                    state.data[dataType].push(newItem);
                }
            } else if (type === 'expense') {
                if (!validateRequired(val('inp-desc'), 'Description')) return;
                if (!validateAmount(num('inp-amount'), 'Amount')) return;
                if (!validateRequired(val('inp-date'), 'Date')) return;
                if (!validateRequired(val('inp-account'), 'Account')) return;
                // Get "Expense for / Given to" field
                const expenseFor = val('inp-expense-for') || undefined;

                // Get selected family members (only active ones) - these are the contributors
                const selectedFamilyMembers = [];
                const contributionType = val('inp-contribution-type') || 'equal';
                const contributions = {};

                (state.data.familyMembers || []).forEach((member, idx) => {
                    if (member.active === false) return; // Skip inactive members
                    const checkbox = document.getElementById(`inp-family-member-${idx}`);
                    if (checkbox && checkbox.checked) {
                        selectedFamilyMembers.push(member.name);
                        // If custom contribution, get the amount
                        if (contributionType === 'custom') {
                            const contributionInput = document.getElementById(`inp-contribution-${idx}`);
                            if (contributionInput && contributionInput.value) {
                                contributions[member.name] = parseFloat(contributionInput.value) || 0;
                            }
                        }
                    }
                });

                newItem = {
                    description: val('inp-desc'),
                    category: val('inp-category') || 'Other',
                    amount: num('inp-amount'),
                    date: val('inp-date'),
                    account: val('inp-account'),
                    expenseFor: expenseFor, // Person the expense is given to
                    familyMembers: selectedFamilyMembers.length > 0 ? selectedFamilyMembers : undefined, // Contributors
                    contributionType: selectedFamilyMembers.length > 0 ? contributionType : undefined,
                    contributions: selectedFamilyMembers.length > 0 && contributionType === 'custom' && Object.keys(contributions).length > 0 ? contributions : undefined,
                    notes: val('inp-notes'),
                    recurring: document.getElementById('inp-recurring')?.checked || false,
                    recurringFrequency: document.getElementById('inp-recurring')?.checked ? (val('inp-recurring-frequency-expense') || 'monthly') : '',
                    recurringNextDate: document.getElementById('inp-recurring')?.checked ? val('inp-recurring-next-expense') : ''
                };
                if (isEditing && editingIndex !== null) {
                    state.data[dataType][editingIndex] = newItem;
                } else {
                    state.data[dataType].push(newItem);
                }
            } else if (type === 'receivable') {
                if (!validateRequired(val('inp-from'), 'From')) return;
                if (!validateAmount(num('inp-amount'), 'Amount')) return;
                if (!validateRequired(val('inp-duedate'), 'Due Date')) return;
                newItem = {
                    from: val('inp-from'),
                    description: val('inp-desc'),
                    amount: num('inp-amount'),
                    dueDate: val('inp-duedate'),
                    status: val('inp-status') || 'unpaid',
                    priority: val('inp-priority') || 'medium',
                    notes: val('inp-notes'),
                    reminderDays: num('inp-reminder-days') || 0
                };
                if (isEditing && editingIndex !== null) {
                    state.data[dataType][editingIndex] = newItem;
                } else {
                    state.data[dataType].push(newItem);
                }
            } else if (type === 'payable') {
                if (!validateRequired(val('inp-to'), 'To')) return;
                if (!validateAmount(num('inp-amount'), 'Amount')) return;
                if (!validateRequired(val('inp-duedate'), 'Due Date')) return;
                newItem = {
                    to: val('inp-to'),
                    description: val('inp-desc'),
                    amount: num('inp-amount'),
                    dueDate: val('inp-duedate'),
                    status: val('inp-status') || 'unpaid',
                    priority: val('inp-priority') || 'medium',
                    notes: val('inp-notes'),
                    reminderDays: num('inp-reminder-days') || 0
                };
                if (isEditing && editingIndex !== null) {
                    state.data[dataType][editingIndex] = newItem;
                } else {
                    state.data[dataType].push(newItem);
                }
            } else if (type === 'plan') {
                if (!validateRequired(val('inp-title'), 'Plan Title')) return;
                if (!validateAmount(num('inp-target'), 'Target Amount')) return;
                if (!validateRequired(val('inp-deadline'), 'Deadline')) return;
                newItem = {
                    title: val('inp-title'),
                    targetAmount: num('inp-target'),
                    startDate: val('inp-start-date') || val('inp-deadline'),
                    deadline: val('inp-deadline'),
                    status: val('inp-status') || 'in progress',
                    priority: val('inp-priority') || 'medium',
                    notes: val('inp-notes'),
                    reminderDays: num('inp-reminder-days') || 0
                };
                if (isEditing && editingIndex !== null) {
                    state.data[dataType][editingIndex] = newItem;
                } else {
                    state.data[dataType].push(newItem);
                }
            } else if (type === 'budget') {
                if (!validateRequired(val('inp-category'), 'Category')) return;
                if (!validateAmount(num('inp-amount'), 'Budget Amount')) return;
                newItem = {
                    category: val('inp-category'),
                    amount: num('inp-amount'),
                    period: val('inp-period') || 'monthly'
                };
                if (isEditing && editingIndex !== null) {
                    state.data[dataType][editingIndex] = newItem;
                } else {
                    state.data[dataType].push(newItem);
                }
            } else if (type === 'category') {
                if (!validateRequired(val('inp-name'), 'Category Name')) return;
                const colorInput = document.querySelector('input[name="category-color"]:checked');
                newItem = {
                    name: val('inp-name'),
                    type: val('inp-type'),
                    color: colorInput?.value || '#4299e1'
                };
                if (isEditing && editingIndex !== null) {
                    state.data[dataType][editingIndex] = newItem;
                } else {
                    // Check if category already exists
                    const exists = state.data[dataType].find(c => c.name === newItem.name && c.type === newItem.type);
                    if (!exists) {
                        state.data[dataType].push(newItem);
                    } else {
                        showToast(t('category_already_exists'), 'error');
                        return;
                    }
                }
            }

            // Save to Excel and UI (check auto-save setting)
            if (shouldAutoSave()) {
                writeExcelFile().then(() => {
                    showToast(`${isEditing ? 'Updated' : 'Added'} ${type} successfully!`, 'success');
                    renderAll();
                    closeModal();
                }).catch(err => {
                    showToast('Error saving data. Please try again.', 'error');
                    console.error(err);
                });
            } else {
                // Just update UI without saving to Excel
                showToast(`${isEditing ? 'Updated' : 'Added'} ${type} successfully!`, 'success');
                renderAll();
                closeModal();
            }
        }

        // Professional Confirmation Modal
        function showConfirmModal(options) {
            return new Promise((resolve) => {
                const { title, message, type = 'warning', confirmText = 'Confirm', cancelText = 'Cancel', icon = '‚ö†Ô∏è' } = options;
                const iconClass = type === 'danger' ? 'danger' : type === 'info' ? 'info' : 'warning';
                const iconEmoji = type === 'danger' ? 'üóëÔ∏è' : type === 'info' ? '‚ÑπÔ∏è' : '‚ö†Ô∏è';

                const modalHTML = `
                    <div class="confirm-modal">
                        <div class="confirm-header">
                            <div class="confirm-icon ${iconClass}">${iconEmoji}</div>
                            <h3 class="confirm-title">${title}</h3>
                        </div>
                        <div class="confirm-body">
                            ${message}
                        </div>
                        <div class="confirm-actions">
                            <button class="btn btn-secondary" onclick="closeConfirmModal(false)">${cancelText}</button>
                            <button class="btn ${type === 'danger' ? 'btn-danger' : 'btn-primary'}" onclick="closeConfirmModal(true)">${confirmText}</button>
                        </div>
                    </div>
                `;

                const overlay = document.getElementById('modal-overlay');
                const content = document.getElementById('modal-content');
                content.innerHTML = modalHTML;
                overlay.classList.add('active');

                window.closeConfirmModal = (result) => {
                    overlay.classList.remove('active');
                    delete window.closeConfirmModal;
                    resolve(result);
                };

                // Close on overlay click
                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        window.closeConfirmModal(false);
                    }
                };
            });
        }

        // Show Excel connection options modal
        function showExcelConnectionOptions() {
            return new Promise((resolve) => {
                const modalHTML = `
                    <div class="confirm-modal" style="max-width: 500px;">
                        <div class="confirm-header">
                            <div class="confirm-icon info">üìä</div>
                            <h3 class="confirm-title" data-translate="connect_excel">Connect Excel</h3>
                        </div>
                        <div class="confirm-body" style="padding: 1.5rem;">
                            <div style="display: flex; flex-direction: column; gap: 1rem;">
                                <button class="btn btn-primary" style="width: 100%; justify-content: flex-start; text-align: left; padding: 1rem;" onclick="selectConnectionType('local')">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                        </svg>
                                        <div>
                                            <div style="font-weight: 600;" data-translate="local_excel">Local Excel File</div>
                                            <div style="font-size: 0.875rem; opacity: 0.8;" data-translate="local_excel_desc">Connect to a local Excel file on your computer</div>
                                        </div>
                                    </div>
                                </button>
                                <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start; text-align: left; padding: 1rem;" onclick="selectConnectionType('google-sheets')">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                                            <line x1="9" y1="3" x2="9" y2="21"></line>
                                            <line x1="3" y1="9" x2="21" y2="9"></line>
                                        </svg>
                                        <div>
                                            <div style="font-weight: 600;" data-translate="google_sheets">Google Sheets</div>
                                            <div style="font-size: 0.875rem; opacity: 0.8;" data-translate="google_sheets_desc">Connect to a Google Sheets document</div>
                                        </div>
                                    </div>
                                </button>
                                <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start; text-align: left; padding: 1rem; opacity: 0.6;" disabled>
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                        </svg>
                                        <div>
                                            <div style="font-weight: 600;" data-translate="other_options">Other Options</div>
                                            <div style="font-size: 0.875rem; opacity: 0.8;" data-translate="coming_soon">Coming Soon (OneDrive, Dropbox, etc.)</div>
                                        </div>
                                    </div>
                                </button>
                            </div>
                        </div>
                        <div class="confirm-actions">
                            <button class="btn btn-secondary" onclick="closeConnectionModal()" data-translate="cancel">Cancel</button>
                        </div>
                    </div>
                `;

                const overlay = document.getElementById('modal-overlay');
                const content = document.getElementById('modal-content');
                content.innerHTML = modalHTML;
                overlay.classList.add('active');

                window.selectConnectionType = (type) => {
                    overlay.classList.remove('active');
                    delete window.selectConnectionType;
                    delete window.closeConnectionModal;
                    resolve(type);
                };

                window.closeConnectionModal = () => {
                    overlay.classList.remove('active');
                    delete window.selectConnectionType;
                    delete window.closeConnectionModal;
                    resolve(null);
                };

                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        window.closeConnectionModal();
                    }
                };
            });
        }

        // Show backup storage options modal
        function showBackupStorageOptions() {
            return new Promise((resolve) => {
                const modalHTML = `
                    <div class="confirm-modal" style="max-width: 500px;">
                        <div class="confirm-header">
                            <div class="confirm-icon info">üíæ</div>
                            <h3 class="confirm-title" data-translate="backup_storage">Backup Storage</h3>
                        </div>
                        <div class="confirm-body" style="padding: 1.5rem;">
                            <div style="display: flex; flex-direction: column; gap: 1rem;">
                                <button class="btn btn-primary" style="width: 100%; justify-content: flex-start; text-align: left; padding: 1rem;" onclick="selectBackupStorage('local')">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                            <line x1="12" y1="22.08" x2="12" y2="12"></line>
                                        </svg>
                                        <div>
                                            <div style="font-weight: 600;" data-translate="local_storage">Local Storage</div>
                                            <div style="font-size: 0.875rem; opacity: 0.8;" data-translate="local_storage_desc">Save backup to your browser's local storage</div>
                                        </div>
                                    </div>
                                </button>
                                <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start; text-align: left; padding: 1rem;" onclick="selectBackupStorage('google-drive')">
                                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                        </svg>
                                        <div>
                                            <div style="font-weight: 600;" data-translate="google_drive">Google Drive</div>
                                            <div style="font-size: 0.875rem; opacity: 0.8;" data-translate="google_drive_desc">Save backup to your Google Drive</div>
                                        </div>
                                    </div>
                                </button>
                            </div>
                        </div>
                        <div class="confirm-actions">
                            <button class="btn btn-secondary" onclick="closeBackupModal()" data-translate="cancel">Cancel</button>
                        </div>
                    </div>
                `;

                const overlay = document.getElementById('modal-overlay');
                const content = document.getElementById('modal-content');
                content.innerHTML = modalHTML;
                overlay.classList.add('active');

                window.selectBackupStorage = (type) => {
                    overlay.classList.remove('active');
                    delete window.selectBackupStorage;
                    delete window.closeBackupModal;
                    resolve(type);
                };

                window.closeBackupModal = () => {
                    overlay.classList.remove('active');
                    delete window.selectBackupStorage;
                    delete window.closeBackupModal;
                    resolve(null);
                };

                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        window.closeBackupModal();
                    }
                };
            });
        }

        function deleteItem(type, index) {
            const itemName = type === 'income' ? 'income entry' :
                type === 'expenses' ? 'expense entry' :
                    type === 'receivables' ? 'receivable' :
                        type === 'payables' ? 'payable' :
                            type === 'plans' ? 'plan' :
                                type === 'budgets' ? 'budget' : 'item';

            showConfirmModal({
                title: 'Delete Item',
                message: `Are you sure you want to delete this ${itemName}? This action cannot be undone.`,
                type: 'danger',
                confirmText: 'Delete',
                cancelText: 'Cancel'
            }).then(confirmed => {
                if (confirmed) {
                    state.data[type].splice(index, 1);
                    writeExcelFile().then(() => {
                        showToast(`${itemName.charAt(0).toUpperCase() + itemName.slice(1)} deleted successfully`, 'success');
                        renderAll();
                    });
                }
            });
        }

        // --- 6. EXPORT FUNCTIONALITY ---
        function exportData() {
            if (!state.isConnected || !state.fileHandle) {
                showToast('Please connect to Excel file first.', 'warning');
                return;
            }
            if (!state.isConnected) {
                alert('Please connect to Excel file first.');
                return;
            }

            const wb = XLSX.utils.book_new();
            const incomeSheet = XLSX.utils.json_to_sheet(state.data.income);
            const expensesSheet = XLSX.utils.json_to_sheet(state.data.expenses);
            const receivablesSheet = XLSX.utils.json_to_sheet(state.data.receivables);
            const payablesSheet = XLSX.utils.json_to_sheet(state.data.payables);
            const plansSheet = XLSX.utils.json_to_sheet(state.data.plans);
            const budgetsSheet = XLSX.utils.json_to_sheet(state.data.budgets || []);
            const categoriesSheet = XLSX.utils.json_to_sheet(state.data.categories || []);

            XLSX.utils.book_append_sheet(wb, incomeSheet, "Income");
            XLSX.utils.book_append_sheet(wb, expensesSheet, "Expenses");
            XLSX.utils.book_append_sheet(wb, receivablesSheet, "Receivables");
            XLSX.utils.book_append_sheet(wb, payablesSheet, "Payables");
            XLSX.utils.book_append_sheet(wb, plansSheet, "Plans");
            XLSX.utils.book_append_sheet(wb, budgetsSheet, "Budgets");
            XLSX.utils.book_append_sheet(wb, categoriesSheet, "Categories");

            const dateStr = new Date().toISOString().split('T')[0];
            XLSX.writeFile(wb, `finance_data_export_${dateStr}.xlsx`);
            showToast('Data exported to Excel successfully', 'success');
        }

        function exportDataCSV() {
            const dateStr = new Date().toISOString().split('T')[0];
            let csvContent = '';

            // Export each data type as separate CSV
            const dataTypes = [
                { name: 'Income', data: state.data.income },
                { name: 'Expenses', data: state.data.expenses },
                { name: 'Receivables', data: state.data.receivables },
                { name: 'Payables', data: state.data.payables },
                { name: 'Plans', data: state.data.plans },
                { name: 'Budgets', data: state.data.budgets || [] },
                { name: 'Categories', data: state.data.categories || [] }
            ];

            dataTypes.forEach(({ name, data }) => {
                if (data.length > 0) {
                    csvContent += `\n=== ${name} ===\n`;
                    const headers = Object.keys(data[0]).join(',');
                    csvContent += headers + '\n';
                    data.forEach(item => {
                        const values = Object.values(item).map(v => {
                            if (v === null || v === undefined) return '';
                            if (typeof v === 'string' && v.includes(',')) return `"${v}"`;
                            return v;
                        }).join(',');
                        csvContent += values + '\n';
                    });
                    csvContent += '\n';
                }
            });

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `finance_data_export_${dateStr}.csv`;
            link.click();
            URL.revokeObjectURL(link.href);
            showToast('Data exported to CSV successfully', 'success');
        }

        function getFilteredMonthYear() {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];
            
            // Get dates from filtered data to determine actual min/max
            let minDate = null;
            let maxDate = null;
            
            if (filteredData && filteredData.length > 0) {
                const dateField = currentListType === 'receivables' || currentListType === 'payables' ? 'dueDate' : 'date';
                const dates = filteredData
                    .map(item => item[dateField])
                    .filter(date => date)
                    .map(date => new Date(date))
                    .filter(date => !isNaN(date.getTime()));
                
                if (dates.length > 0) {
                    minDate = new Date(Math.min(...dates.map(d => d.getTime())));
                    maxDate = new Date(Math.max(...dates.map(d => d.getTime())));
                }
            }
            
            // If we have dates from filtered data, use them
            if (minDate && maxDate) {
                const minMonth = minDate.getMonth();
                const minYear = minDate.getFullYear();
                const maxMonth = maxDate.getMonth();
                const maxYear = maxDate.getFullYear();
                
                // If same month and year, show single month
                if (minMonth === maxMonth && minYear === maxYear) {
                    return `${monthNames[minMonth]} ${minYear}`;
                }
                // Otherwise show range
                return `${monthNames[minMonth]} ${minYear} - ${monthNames[maxMonth]} ${maxYear}`;
            }
            
            // Fallback to date filters if no filtered data
            const dateFrom = document.getElementById('date-from-filter')?.value || '';
            const dateTo = document.getElementById('date-to-filter')?.value || '';
            
            if (dateFrom || dateTo) {
                const fromDate = dateFrom ? new Date(dateFrom) : null;
                const toDate = dateTo ? new Date(dateTo) : null;
                
                if (fromDate && toDate) {
                    const fromMonth = fromDate.getMonth();
                    const fromYear = fromDate.getFullYear();
                    const toMonth = toDate.getMonth();
                    const toYear = toDate.getFullYear();
                    
                    // If same month and year, show single month
                    if (fromMonth === toMonth && fromYear === toYear) {
                        return `${monthNames[fromMonth]} ${fromYear}`;
                    }
                    // Otherwise show range
                    return `${monthNames[fromMonth]} ${fromYear} - ${monthNames[toMonth]} ${toYear}`;
                } else if (fromDate) {
                    return `${monthNames[fromDate.getMonth()]} ${fromDate.getFullYear()}`;
                } else if (toDate) {
                    return `${monthNames[toDate.getMonth()]} ${toDate.getFullYear()}`;
                }
            }
            
            // If no date filter, use current month/year
            const now = new Date();
            return `${monthNames[now.getMonth()]} ${now.getFullYear()}`;
        }

        function exportFilteredToExcel() {
            if (!currentListType || !filteredData || filteredData.length === 0) {
                showToast('No filtered data to export', 'warning');
                return;
            }

            const monthYear = getFilteredMonthYear();
            
            // Calculate total
            const total = filteredData.reduce((sum, item) => sum + Number(item.amount || 0), 0);
            
            // Prepare data with only date, description, amount
            const exportData = filteredData.map(item => {
                const dateField = currentListType === 'receivables' || currentListType === 'payables' ? 'dueDate' : 'date';
                return {
                    'Date': item[dateField] || '',
                    'Description': item.description || item.source || item.from || item.to || '',
                    'Amount': item.amount || 0
                };
            });

            // Create workbook
            const wb = XLSX.utils.book_new();
            
            // Add header row with month/year
            const headerData = [
                [`${monthYear}`],
                [],
                ['Date', 'Description', 'Amount']
            ];
            
            // Convert to sheet
            const ws = XLSX.utils.aoa_to_sheet(headerData);
            
            // Add data starting from row 4 (after header)
            const dataStartRow = 4;
            XLSX.utils.sheet_add_json(ws, exportData, { origin: `A${dataStartRow}`, skipHeader: true });
            
            // Add total row after data
            const totalRow = exportData.length + dataStartRow;
            ws[`A${totalRow}`] = { t: 's', v: 'Total' };
            ws[`B${totalRow}`] = { t: 's', v: '' };
            ws[`C${totalRow}`] = { t: 'n', v: total };
            
            // Style the header (merge cells for month/year)
            if (!ws['!merges']) ws['!merges'] = [];
            ws['!merges'].push({ s: { r: 0, c: 0 }, e: { r: 0, c: 2 } });
            
            // Set column widths
            ws['!cols'] = [
                { wch: 12 }, // Date
                { wch: 40 }, // Description
                { wch: 15 }  // Amount
            ];
            
            XLSX.utils.book_append_sheet(wb, ws, 'Filtered Data');
            
            const dateStr = new Date().toISOString().split('T')[0];
            XLSX.writeFile(wb, `filtered_data_${dateStr}.xlsx`);
            showToast('Filtered data exported to Excel successfully', 'success');
        }

        function exportFilteredToImage() {
            if (!currentListType || !filteredData || filteredData.length === 0) {
                showToast('No filtered data to export', 'warning');
                return;
            }

            const monthYear = getFilteredMonthYear();
            
            // Create a temporary container for the export
            const exportContainer = document.createElement('div');
            exportContainer.style.cssText = 'position: absolute; left: -9999px; width: 1000px; min-width: 1000px; background: white; padding: 2rem; font-family: Arial, sans-serif; box-sizing: border-box;';
            
            // Build HTML table
            let html = `
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <h2 style="margin: 0; color: #333; font-size: 1.5rem;">${monthYear}</h2>
                </div>
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem; table-layout: fixed;">
                    <colgroup>
                        <col style="width: 15%;">
                        <col style="width: 50%;">
                        <col style="width: 35%;">
                    </colgroup>
                    <thead>
                        <tr style="background: #f5f5f5;">
                            <th style="padding: 0.75rem; text-align: left; border: 1px solid #ddd; word-wrap: break-word;">Date</th>
                            <th style="padding: 0.75rem; text-align: left; border: 1px solid #ddd; word-wrap: break-word;">Description</th>
                            <th style="padding: 0.75rem; text-align: right; border: 1px solid #ddd; word-wrap: break-word;">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            // Calculate total
            const total = filteredData.reduce((sum, item) => sum + Number(item.amount || 0), 0);
            const formattedTotal = formatCurrency(total);
            
            filteredData.forEach(item => {
                const dateField = currentListType === 'receivables' || currentListType === 'payables' ? 'dueDate' : 'date';
                const date = item[dateField] || '';
                const description = item.description || item.source || item.from || item.to || '';
                const amount = item.amount || 0;
                const formattedAmount = formatCurrency(amount);
                
                html += `
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #ddd; word-wrap: break-word; overflow-wrap: break-word;">${date}</td>
                        <td style="padding: 0.75rem; border: 1px solid #ddd; word-wrap: break-word; overflow-wrap: break-word;">${description}</td>
                        <td style="padding: 0.75rem; text-align: right; border: 1px solid #ddd; word-wrap: break-word; overflow-wrap: break-word; white-space: nowrap;">${formattedAmount}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                    <tfoot>
                        <tr style="background: #f5f5f5; font-weight: bold;">
                            <td style="padding: 0.75rem; border: 1px solid #ddd; text-align: right; word-wrap: break-word;" colspan="2">Total</td>
                            <td style="padding: 0.75rem; border: 1px solid #ddd; text-align: right; word-wrap: break-word; white-space: nowrap;">${formattedTotal}</td>
                        </tr>
                    </tfoot>
                </table>
            `;
            
            exportContainer.innerHTML = html;
            document.body.appendChild(exportContainer);
            
            // Wait for rendering to complete
            setTimeout(() => {
                // Use html2canvas to capture
                html2canvas(exportContainer, {
                    backgroundColor: '#ffffff',
                    scale: 2,
                    logging: false,
                    width: exportContainer.scrollWidth || 1000,
                    height: exportContainer.scrollHeight,
                    useCORS: true,
                    allowTaint: true,
                    windowWidth: exportContainer.scrollWidth || 1000
                }).then(canvas => {
                // Convert to blob and download
                canvas.toBlob(blob => {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    const dateStr = new Date().toISOString().split('T')[0];
                    link.download = `filtered_data_${dateStr}.png`;
                    link.click();
                    URL.revokeObjectURL(url);
                    
                    // Clean up
                    document.body.removeChild(exportContainer);
                    showToast('Filtered data exported as image successfully', 'success');
                }, 'image/png');
                }).catch(err => {
                    console.error('Error exporting to image:', err);
                    document.body.removeChild(exportContainer);
                    showToast('Error exporting to image', 'error');
                });
            }, 100);
        }

        function toggleRecurringOptions(type) {
            const checkbox = document.getElementById('inp-recurring');
            const optionsDiv = document.getElementById(`recurring-options-${type}`);
            if (optionsDiv) {
                optionsDiv.style.display = checkbox?.checked ? 'block' : 'none';
            }
        }

        // --- 7. INITIALIZATION ---
        // Initialize on page load
        (async function () {
            // Initialize language selector
            const langSelector = document.getElementById('language-selector');
            const langSelectorMobile = document.getElementById('language-selector-mobile');
            if (langSelector) {
                langSelector.value = currentLanguage;
            }
            if (langSelectorMobile) {
                langSelectorMobile.value = currentLanguage;
            }
            translatePage();

            // Initialize notifications
            updateNotificationBadge();

            // Initialize IndexedDB
            try {
                await initDB();
            } catch (err) {
                console.error('Failed to initialize database:', err);
            }

            // First, try to restore file handle from IndexedDB (might work in same session)
            try {
                const savedHandle = await loadFileHandle();
                if (savedHandle) {
                    const isValid = await verifyFileHandle(savedHandle);
                    if (isValid) {
                        state.fileHandle = savedHandle;
                        state.isConnected = true;
                        updateStatus(true);
                        await readExcelFile();
                        renderAll();
                        showToast('Restored connection to Excel file.', 'success');
                        return;
                    } else {
                        // Handle is invalid (stale from previous session), clear it
                        console.log('Stored file handle is invalid, clearing from storage');
                        await removeFileHandle();
                    }
                }
            } catch (err) {
                console.log('Could not restore from IndexedDB:', err);
                // Clear invalid handle on error
                try {
                    await removeFileHandle();
                } catch (clearErr) {
                    console.error('Error clearing invalid handle:', clearErr);
                }
            }

            // Check if we have stored file metadata
            const metadata = getStoredFileMetadata();

            if (metadata && metadata.name === CONFIG.fileName) {
                // We have a stored file, show message that reconnection is available
                const statusEl = document.getElementById('status-bar');
                if (statusEl) {
                    statusEl.className = 'status-bar status-disconnected';
                    statusEl.textContent = `Previously connected to ${CONFIG.fileName}. Click "Connect Excel" to reconnect.`;
                }
                updateStatus(false);
            } else {
                // No stored file, show disconnected state
                updateStatus(false);
            }
        })();
        // --- SETTINGS MANAGEMENT ---
        function getSettings() {
            return JSON.parse(localStorage.getItem('financeManagerSettings') || '{}');
        }

        function shouldAutoSave() {
            const settings = getSettings();
            return settings.autoSave !== false; // Default to true if not set
        }

        // Format date according to user's date format setting
        function formatDate(dateValue) {
            if (!dateValue) return '';

            // Get date format from settings
            const settings = getSettings();
            const dateFormat = settings.dateFormat || 'YYYY-MM-DD';

            // Parse the date value (could be string in YYYY-MM-DD format or Date object)
            let date;
            if (dateValue instanceof Date) {
                date = dateValue;
            } else if (typeof dateValue === 'string') {
                // If it's already in YYYY-MM-DD format, parse it
                if (/^\d{4}-\d{2}-\d{2}$/.test(dateValue)) {
                    const parts = dateValue.split('-');
                    date = new Date(parseInt(parts[0]), parseInt(parts[1]) - 1, parseInt(parts[2]));
                } else {
                    date = new Date(dateValue);
                }
            } else {
                return '';
            }

            // Check if date is valid
            if (isNaN(date.getTime())) return '';

            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');

            // Format according to setting
            switch (dateFormat) {
                case 'DD/MM/YYYY':
                    return `${day}/${month}/${year}`;
                case 'MM/DD/YYYY':
                    return `${month}/${day}/${year}`;
                case 'DD-MM-YYYY':
                    return `${day}-${month}-${year}`;
                case 'YYYY-MM-DD':
                default:
                    return `${year}-${month}-${day}`;
            }
        }

        function loadSettings() {
            const settings = getSettings();

            // Load currency setting
            const currency = settings.currency || '‡ß≥';
            if (document.getElementById('setting-currency')) {
                document.getElementById('setting-currency').value = currency;
            }
            // Apply currency to CONFIG
            CONFIG.currency = currency;

            // Load date format setting
            const dateFormat = settings.dateFormat || 'YYYY-MM-DD';
            if (document.getElementById('setting-date-format')) {
                document.getElementById('setting-date-format').value = dateFormat;
            }
            // Store date format in CONFIG for easy access
            CONFIG.dateFormat = dateFormat;

            // Load auto-save setting (default to true if not set)
            const autoSave = settings.autoSave !== undefined ? settings.autoSave : true;
            if (document.getElementById('setting-auto-save')) {
                document.getElementById('setting-auto-save').checked = autoSave;
            }

            // Update state.settings to sync with the other settings system
            if (state && state.settings) {
                state.settings.currency = currency;
                state.settings.dateFormat = dateFormat;
                state.settings.autoSave = autoSave;
            }
        }

        function saveSettings() {
            const currencyEl = document.getElementById('setting-currency');
            const dateFormatEl = document.getElementById('setting-date-format');
            const autoSaveEl = document.getElementById('setting-auto-save');

            if (!currencyEl || !dateFormatEl || !autoSaveEl) {
                console.error('Settings elements not found');
                return;
            }

            const currency = currencyEl.value || '‡ß≥';
            const dateFormat = dateFormatEl.value || 'YYYY-MM-DD';
            const autoSave = autoSaveEl.checked === true;

            const settings = {
                currency: currency,
                dateFormat: dateFormat,
                autoSave: autoSave
            };

            // Save to localStorage
            localStorage.setItem('financeManagerSettings', JSON.stringify(settings));

            // Apply settings immediately
            CONFIG.currency = currency;
            CONFIG.dateFormat = dateFormat;

            // Update state.settings to sync
            if (state && state.settings) {
                state.settings.currency = currency;
                state.settings.dateFormat = dateFormat;
                state.settings.autoSave = autoSave;
                saveSettingsToStorage();
            }

            // Re-render all views to apply date format changes
            const activeTab = document.querySelector('.nav-tab.active');
            if (activeTab) {
                const tabId = activeTab.getAttribute('onclick')?.match(/switchTab\('([^']+)'\)/)?.[1];
                if (tabId) {
                    switchTab(tabId);
                }
            }

            // Show success message
            const t = (key) => translations[currentLanguage] && translations[currentLanguage][key] ? translations[currentLanguage][key] : key;
            showToast(t('saved_successfully'), 'success');
        }

        // --- IMPORT FUNCTIONALITY ---
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.xlsx,.xls';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const data = new Uint8Array(event.target.result);
                        const workbook = XLSX.read(data, { type: 'array' });

                        showConfirmModal({
                            title: 'Import Data',
                            message: 'This will merge imported data with your existing data. Duplicate entries may be created. Continue?',
                            type: 'warning',
                            confirmText: 'Import',
                            cancelText: 'Cancel'
                        }).then(confirmed => {
                            if (!confirmed) return;

                            const sheetNames = ['Income', 'Expenses', 'Receivables', 'Payables', 'Plans', 'Budgets', 'Categories'];
                            let importedCount = 0;

                            sheetNames.forEach(sheetName => {
                                const sheet = workbook.Sheets[sheetName];
                                if (sheet) {
                                    const jsonData = XLSX.utils.sheet_to_json(sheet);
                                    const dataKey = sheetName.toLowerCase();
                                    if (state.data[dataKey]) {
                                        state.data[dataKey].push(...jsonData);
                                        importedCount += jsonData.length;
                                    }
                                }
                            });

                            writeExcelFile().then(() => {
                                showToast(`Successfully imported ${importedCount} items`, 'success');
                                renderAll();
                            });
                        });
                    } catch (error) {
                        showToast('Error importing file: ' + error.message, 'error');
                    }
                };
                reader.readAsArrayBuffer(file);
            };
            input.click();
        }

        // --- BACKUP & RESTORE ---
        async function backupData() {
            // Show backup storage options modal
            const storageType = await showBackupStorageOptions();
            if (!storageType) return; // User cancelled

            state.backupStorageType = storageType;

            const backup = {
                timestamp: new Date().toISOString(),
                version: '1.0',
                data: state.data
            };

            if (storageType === 'local') {
                await backupToLocalStorage(backup);
            } else if (storageType === 'google-drive') {
                await backupToGoogleDrive(backup);
            }
        }

        async function backupToLocalStorage(backup) {
            try {
                // Save to browser's local storage
                const backupKey = `finance_backup_${new Date().toISOString().split('T')[0]}`;
                localStorage.setItem(backupKey, JSON.stringify(backup));

                // Also download as file
                const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `finance_backup_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);

                showToast('Backup saved to local storage and downloaded', 'success');
            } catch (err) {
                console.error('Error backing up to local storage:', err);
                showToast('Error creating backup: ' + err.message, 'error');
            }
        }

        async function backupToGoogleDrive(backup) {
            try {
                // NOTE: To use Google Drive backup, you need to:
                // 1. Create a project in Google Cloud Console
                // 2. Enable Google Drive API
                // 3. Create OAuth 2.0 credentials
                // 4. Replace 'YOUR_API_KEY' and 'YOUR_CLIENT_ID' below with your actual credentials

                // Initialize Google API
                await new Promise((resolve) => {
                    if (window.gapi && window.gapi.load) {
                        window.gapi.load('client:auth2', resolve);
                    } else {
                        setTimeout(() => {
                            if (window.gapi && window.gapi.load) {
                                window.gapi.load('client:auth2', resolve);
                            } else {
                                showToast('Google API not loaded. Please refresh the page.', 'error');
                                return;
                            }
                        }, 1000);
                    }
                });

                // Initialize the client
                await window.gapi.client.init({
                    apiKey: 'YOUR_API_KEY', // Replace with your Google API key
                    clientId: 'YOUR_CLIENT_ID', // Replace with your Google OAuth Client ID
                    discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],
                    scope: 'https://www.googleapis.com/auth/drive.file'
                });

                // Sign in
                const authInstance = window.gapi.auth2.getAuthInstance();
                const isSignedIn = authInstance.isSignedIn.get();

                if (!isSignedIn) {
                    await authInstance.signIn();
                }

                // Create file metadata
                const fileName = `finance_backup_${new Date().toISOString().split('T')[0]}.json`;
                const fileMetadata = {
                    name: fileName,
                    mimeType: 'application/json'
                };

                // Convert backup to blob
                const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
                const reader = new FileReader();

                reader.onload = async function () {
                    try {
                        const base64Data = btoa(reader.result);

                        // Upload to Google Drive
                        const response = await window.gapi.client.drive.files.create({
                            resource: fileMetadata,
                            fields: 'id'
                        });

                        // Upload file content
                        await fetch(`https://www.googleapis.com/upload/drive/v3/files/${response.result.id}?uploadType=media`, {
                            method: 'PATCH',
                            headers: {
                                'Authorization': `Bearer ${authInstance.currentUser.get().getAuthResponse().access_token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(backup)
                        });

                        state.googleDriveFileId = response.result.id;
                        showToast('Backup saved to Google Drive successfully!', 'success');
                    } catch (err) {
                        console.error('Error uploading to Google Drive:', err);
                        showToast('Error uploading to Google Drive: ' + err.message, 'error');
                    }
                };

                reader.readAsText(blob);

            } catch (err) {
                console.error('Error backing up to Google Drive:', err);
                showToast('Error backing up to Google Drive: ' + err.message, 'error');
            }
        }

        function restoreData() {
            // Check for local storage backups first
            const localBackups = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && key.startsWith('finance_backup_')) {
                    try {
                        const backup = JSON.parse(localStorage.getItem(key));
                        if (backup && backup.timestamp && backup.data) {
                            localBackups.push({ key, backup });
                        }
                    } catch (e) {
                        // Skip invalid entries
                    }
                }
            }

            if (localBackups.length > 0) {
                // Show modal to choose between local storage or file
                const modalHTML = `
                    <div class="confirm-modal" style="max-width: 500px;">
                        <div class="confirm-header">
                            <div class="confirm-icon info">üì•</div>
                            <h3 class="confirm-title" data-translate="restore_backup">Restore Backup</h3>
                        </div>
                        <div class="confirm-body" style="padding: 1.5rem;">
                            <div style="margin-bottom: 1rem;">
                                <div style="font-weight: 600; margin-bottom: 0.5rem;" data-translate="local_storage_backups">Local Storage Backups:</div>
                                <div style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border); border-radius: 6px; padding: 0.5rem;">
                                    ${localBackups.map((item, index) => `
                                        <button class="btn btn-secondary" style="width: 100%; justify-content: flex-start; text-align: left; margin-bottom: 0.5rem; padding: 0.75rem;" onclick="restoreFromLocalStorage('${item.key}')">
                                            <div>
                                                <div style="font-weight: 600;">${new Date(item.backup.timestamp).toLocaleString()}</div>
                                                <div style="font-size: 0.875rem; opacity: 0.8;">${item.key}</div>
                                            </div>
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                            <div style="text-align: center; margin: 1rem 0; color: var(--text-light);">OR</div>
                            <button class="btn btn-primary" style="width: 100%;" onclick="restoreFromFile()" data-translate="restore_from_file">Restore from File</button>
                        </div>
                        <div class="confirm-actions">
                            <button class="btn btn-secondary" onclick="closeRestoreModal()" data-translate="cancel">Cancel</button>
                        </div>
                    </div>
                `;

                const overlay = document.getElementById('modal-overlay');
                const content = document.getElementById('modal-content');
                content.innerHTML = modalHTML;
                overlay.classList.add('active');

                window.restoreFromLocalStorage = (key) => {
                    overlay.classList.remove('active');
                    const backup = JSON.parse(localStorage.getItem(key));
                    performRestore(backup);
                    delete window.restoreFromLocalStorage;
                    delete window.restoreFromFile;
                    delete window.closeRestoreModal;
                };

                window.restoreFromFile = () => {
                    overlay.classList.remove('active');
                    delete window.restoreFromLocalStorage;
                    delete window.restoreFromFile;
                    delete window.closeRestoreModal;
                    restoreFromFileInput();
                };

                window.closeRestoreModal = () => {
                    overlay.classList.remove('active');
                    delete window.restoreFromLocalStorage;
                    delete window.restoreFromFile;
                    delete window.closeRestoreModal;
                };

                overlay.onclick = (e) => {
                    if (e.target === overlay) {
                        window.closeRestoreModal();
                    }
                };
            } else {
                // No local backups, just show file picker
                restoreFromFileInput();
            }
        }

        function restoreFromFileInput() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const backup = JSON.parse(event.target.result);
                        performRestore(backup);
                    } catch (error) {
                        showToast('Error restoring backup: ' + error.message, 'error');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        function performRestore(backup) {
            showConfirmModal({
                title: 'Restore Backup',
                message: `This will replace all your current data with the backup from ${new Date(backup.timestamp).toLocaleString()}. This action cannot be undone. Continue?`,
                type: 'danger',
                confirmText: 'Restore',
                cancelText: 'Cancel'
            }).then(confirmed => {
                if (!confirmed) return;

                state.data = backup.data;
                writeExcelFile().then(() => {
                    showToast('Data restored successfully', 'success');
                    renderAll();
                });
            });
        }

        // --- TEMPLATES MANAGEMENT ---
        function renderTemplatesList() {
            const container = document.getElementById('templates-container');
            if (!container) return;
            container.innerHTML = '';

            const templates = state.data.templates || [];
            if (templates.length === 0) {
                container.innerHTML = '<div class="text-center" style="padding: 2rem; color: var(--text-light);">No templates created. Create one to quickly add common transactions.</div>';
                return;
            }

            templates.forEach((template, index) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.style.marginBottom = '1rem';
                div.style.padding = '1rem';
                const typeLabel = template.type === 'income' ? 'Income' : template.type === 'expense' ? 'Expense' : template.type === 'receivable' ? 'Receivable' : 'Payable';
                const typeColor = template.type === 'income' ? 'var(--success)' : template.type === 'expense' ? 'var(--danger)' : template.type === 'receivable' ? 'var(--warning)' : 'var(--purple)';

                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 1rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <h3 style="margin: 0; font-size: 1.1rem;">${template.name || 'Untitled Template'}</h3>
                                <span style="background: ${typeColor}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">${typeLabel}</span>
                            </div>
                            <div style="color: var(--text-light); font-size: 0.875rem; margin-bottom: 0.5rem;">
                                <div><strong>Amount:</strong> ${formatCurrency(template.amount || 0)}</div>
                                ${template.category ? `<div><strong>Category:</strong> ${template.category}</div>` : ''}
                                ${template.description ? `<div><strong>Description:</strong> ${template.description}</div>` : ''}
                                ${template.paymentMethod ? `<div><strong>Payment Method:</strong> ${template.paymentMethod}</div>` : ''}
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-primary" onclick="useTemplate(${index})" style="font-size: 0.875rem;">
                                Use Template
                            </button>
                            <button class="btn-edit" onclick="editTemplate(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-delete" onclick="deleteTemplate(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function openTemplateModal(templateIndex = null) {
            const template = templateIndex !== null ? state.data.templates[templateIndex] : null;
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            if (!overlay || !content) return;

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${template ? t('edit_template') : t('create_template')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <form id="template-form" onsubmit="saveTemplate(event, ${templateIndex !== null ? templateIndex : 'null'}); return false;">
                    <div class="form-group">
                        <label class="form-label">Template Name *</label>
                        <input type="text" class="form-input" id="template-name" required value="${template?.name || ''}" placeholder="e.g. Monthly Salary">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Transaction Type *</label>
                        <select class="form-input" id="template-type" required>
                            <option value="income" ${template?.type === 'income' ? 'selected' : ''}>Income</option>
                            <option value="expense" ${template?.type === 'expense' ? 'selected' : ''}>Expense</option>
                            <option value="receivable" ${template?.type === 'receivable' ? 'selected' : ''}>Receivable</option>
                            <option value="payable" ${template?.type === 'payable' ? 'selected' : ''}>Payable</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Amount *</label>
                        <input type="number" class="form-input" id="template-amount" required step="0.01" value="${template?.amount || ''}" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <input type="text" class="form-input" id="template-category" value="${template?.category || ''}" placeholder="e.g. Salary, Groceries">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-input" id="template-description" rows="3" placeholder="Optional description">${template?.description || ''}</textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Payment Method</label>
                        <select class="form-input" id="template-payment-method">
                            <option value="">Select Method</option>
                            <option value="Cash" ${template?.paymentMethod === 'Cash' ? 'selected' : ''}>Cash</option>
                            <option value="Bank Transfer" ${template?.paymentMethod === 'Bank Transfer' ? 'selected' : ''}>Bank Transfer</option>
                            <option value="Card" ${template?.paymentMethod === 'Card' ? 'selected' : ''}>Card</option>
                            <option value="Mobile Payment" ${template?.paymentMethod === 'Mobile Payment' ? 'selected' : ''}>Mobile Payment</option>
                            <option value="Other" ${template?.paymentMethod === 'Other' ? 'selected' : ''}>Other</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">${template ? 'Update' : 'Create'} Template</button>
                    </div>
                </form>
            `;
        }

        function saveTemplate(event, templateIndex) {
            if (event) event.preventDefault();
            if (!state.data.templates) state.data.templates = [];

            const template = {
                name: document.getElementById('template-name').value,
                type: document.getElementById('template-type').value,
                amount: document.getElementById('template-amount').value,
                category: document.getElementById('template-category').value,
                description: document.getElementById('template-description').value,
                paymentMethod: document.getElementById('template-payment-method').value
            };

            const index = templateIndex === 'null' || templateIndex === null ? null : parseInt(templateIndex);
            if (index !== null && index >= 0) {
                state.data.templates[index] = template;
            } else {
                state.data.templates.push(template);
            }

            writeExcelFile().then(() => {
                renderTemplatesList();
                closeModal();
                showToast(`Template ${index !== null ? 'updated' : 'created'} successfully`, 'success');
            });
        }

        function useTemplate(templateIndex) {
            const template = state.data.templates[templateIndex];
            if (!template) return;

            openModal('form', template.type);
            // Wait for modal to render, then fill in values
            setTimeout(() => {
                const amountInput = document.getElementById('inp-amount');
                const categoryInput = document.getElementById('inp-category') || document.getElementById('inp-source');
                const descriptionInput = document.getElementById('inp-description') || document.getElementById('inp-notes');
                const paymentMethodInput = document.getElementById('inp-payment-method');

                if (amountInput) amountInput.value = template.amount;
                if (categoryInput) categoryInput.value = template.category;
                if (descriptionInput) descriptionInput.value = template.description;
                if (paymentMethodInput) paymentMethodInput.value = template.paymentMethod;
            }, 100);
        }

        function editTemplate(templateIndex) {
            openTemplateModal(templateIndex);
        }

        function deleteTemplate(templateIndex) {
            showConfirmModal({
                title: 'Delete Template',
                message: t('are_you_sure_delete_template'),
                type: 'danger'
            }).then(confirmed => {
                if (!confirmed) return;
                state.data.templates.splice(templateIndex, 1);
                writeExcelFile().then(() => {
                    renderTemplatesList();
                    showToast('Template deleted successfully', 'success');
                });
            });
        }

        // --- ACCOUNTS MANAGEMENT ---
        function renderAccountsList() {
            const container = document.getElementById('accounts-container');
            if (!container) return;
            container.innerHTML = '';

            const accounts = state.data.accounts || [];
            if (accounts.length === 0) {
                container.innerHTML = '<div class="text-center" style="padding: 2rem; color: var(--text-light);">No accounts added. Add an account to track balances across different sources.</div>';
                return;
            }

            // Calculate balances for each account
            accounts.forEach((account, index) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.style.marginBottom = '1rem';
                div.style.padding = '1.5rem';

                // Calculate account balance from transactions
                let balance = Number(account.initialBalance || 0);
                state.data.income.forEach(item => {
                    if (item.account === account.name) balance += Number(item.amount || 0);
                });
                state.data.expenses.forEach(item => {
                    if (item.account === account.name) balance -= Number(item.amount || 0);
                });
                // Handle transfers
                (state.data.transfers || []).forEach(transfer => {
                    if (transfer.fromAccount === account.name) balance -= Number(transfer.amount || 0);
                    if (transfer.toAccount === account.name) balance += Number(transfer.amount || 0);
                });

                const typeColors = {
                    'Cash': 'var(--success)',
                    'Bank': 'var(--primary)',
                    'Credit Card': 'var(--danger)',
                    'Savings': 'var(--purple)',
                    'Investment': 'var(--warning)'
                };
                const typeColor = typeColors[account.type] || 'var(--text-light)';

                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 1rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <h3 style="margin: 0; font-size: 1.2rem;">${account.name || 'Unnamed Account'}</h3>
                                <span style="background: ${typeColor}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">${account.type || 'Other'}</span>
                            </div>
                            <div style="color: var(--text-light); font-size: 0.875rem; margin-bottom: 0.75rem;">
                                ${account.description || 'No description'}
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Current Balance</div>
                                    <div style="font-size: 1.5rem; font-weight: bold; color: ${balance >= 0 ? 'var(--success)' : 'var(--danger)'};">
                                        ${formatCurrency(balance)}
                                    </div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Initial Balance</div>
                                    <div style="font-size: 1.1rem; font-weight: 600;">
                                        ${formatCurrency(account.initialBalance || 0)}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn-edit" onclick="editAccount(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-delete" onclick="deleteAccount(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function openAccountModal(accountIndex = null) {
            const account = accountIndex !== null ? state.data.accounts[accountIndex] : null;
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            if (!overlay || !content) return;

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${account ? t('edit') + ' ' + t('accounts') : t('add_account')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <form id="account-form" onsubmit="saveAccount(event, ${accountIndex !== null ? accountIndex : 'null'}); return false;">
                    <div class="form-group">
                        <label class="form-label">${t('account_name')} *</label>
                        <input type="text" class="form-input" id="account-name" required value="${account?.name || ''}" placeholder="${t('placeholder_main_bank')}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('account_type')} *</label>
                        <select class="form-input" id="account-type" required>
                            <option value="Cash" ${account?.type === 'Cash' ? 'selected' : ''}>${t('cash')}</option>
                            <option value="Bank" ${account?.type === 'Bank' ? 'selected' : ''}>${t('bank_transfer')}</option>
                            <option value="Credit Card" ${account?.type === 'Credit Card' ? 'selected' : ''}>${t('card')}</option>
                            <option value="Savings" ${account?.type === 'Savings' ? 'selected' : ''}>${t('savings')}</option>
                            <option value="Investment" ${account?.type === 'Investment' ? 'selected' : ''}>${t('investments')}</option>
                            <option value="Other" ${account?.type === 'Other' ? 'selected' : ''}>${t('other')}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('initial_balance')}</label>
                        <input type="number" class="form-input" id="account-balance" step="0.01" value="${account?.initialBalance || 0}" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('description')}</label>
                        <textarea class="form-input" id="account-description" rows="3" placeholder="${t('optional_description')}">${account?.description || ''}</textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
                        <button type="submit" class="btn btn-primary">${account ? t('update_account') : t('add_account')}</button>
                    </div>
                </form>
            `;
        }

        function saveAccount(event, accountIndex) {
            if (event) event.preventDefault();
            if (!state.data.accounts) state.data.accounts = [];

            const account = {
                name: document.getElementById('account-name').value,
                type: document.getElementById('account-type').value,
                initialBalance: Number(document.getElementById('account-balance').value) || 0,
                description: document.getElementById('account-description').value
            };

            const index = accountIndex === 'null' || accountIndex === null ? null : parseInt(accountIndex);
            if (index !== null && index >= 0) {
                state.data.accounts[index] = account;
            } else {
                state.data.accounts.push(account);
            }

            writeExcelFile().then(() => {
                renderAccountsList();
                closeModal();
                showToast(`Account ${index !== null ? 'updated' : 'added'} successfully`, 'success');
            });
        }

        function editAccount(accountIndex) {
            openAccountModal(accountIndex);
        }

        function deleteAccount(accountIndex) {
            showConfirmModal({
                title: 'Delete Account',
                message: t('are_you_sure_delete_account'),
                type: 'danger'
            }).then(confirmed => {
                if (!confirmed) return;
                state.data.accounts.splice(accountIndex, 1);
                writeExcelFile().then(() => {
                    renderAccountsList();
                    showToast('Account deleted successfully', 'success');
                });
            });
        }

        // Undo Last Action
        function undoLastAction() {
            if (!state.data.transactionHistory || state.data.transactionHistory.length === 0) {
                showToast('No actions to undo', 'warning');
                return;
            }

            const lastAction = state.data.transactionHistory.pop();

            if (lastAction.action === 'delete') {
                // Restore deleted item
                if (lastAction.data && lastAction.index !== undefined) {
                    state.data[lastAction.type].splice(lastAction.index, 0, lastAction.data);
                    writeExcelFile().then(() => {
                        showToast('Last deletion undone', 'success');
                        renderAll();
                    });
                }
            } else if (lastAction.action === 'edit') {
                // Restore previous version
                if (lastAction.data && lastAction.index !== undefined) {
                    state.data[lastAction.type][lastAction.index] = lastAction.data;
                    writeExcelFile().then(() => {
                        showToast('Last edit undone', 'success');
                        renderAll();
                    });
                }
            } else if (lastAction.action === 'add') {
                // Remove last added item
                if (state.data[lastAction.type].length > 0) {
                    state.data[lastAction.type].pop();
                    writeExcelFile().then(() => {
                        showToast('Last addition undone', 'success');
                        renderAll();
                    });
                }
            }
        }

        // --- ACCOUNT TRANSFERS ---
        function renderTransfersList() {
            const container = document.getElementById('transfers-container');
            if (!container) return;
            container.innerHTML = '';

            const transfers = state.data.transfers || [];
            if (transfers.length === 0) {
                container.innerHTML = '<div class="text-center" style="padding: 2rem; color: var(--text-light);">No transfers recorded. Add a transfer to track money movement between accounts.</div>';
                return;
            }

            transfers.forEach((transfer, index) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.style.marginBottom = '1rem';
                div.style.padding = '1.5rem';

                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 1rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <h3 style="margin: 0; font-size: 1.2rem;">${transfer.fromAccount || 'Unknown'} ‚Üí ${transfer.toAccount || 'Unknown'}</h3>
                            </div>
                            <div style="color: var(--text-light); font-size: 0.875rem; margin-bottom: 0.75rem;">
                                ${transfer.description || 'No description'} ${transfer.date ? `‚Ä¢ Date: ${formatDate(transfer.date)}` : ''}
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Amount</div>
                                    <div style="font-size: 1.2rem; font-weight: bold;">${formatCurrency(transfer.amount || 0)}</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Date</div>
                                    <div style="font-size: 1rem; font-weight: 600;">${transfer.date ? formatDate(transfer.date) : '-'}</div>
                                </div>
                                ${transfer.notes ? `
                                <div style="grid-column: 1 / -1;">
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Notes</div>
                                    <div style="font-size: 0.875rem;">${transfer.notes}</div>
                                </div>
                                ` : ''}
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn-edit" onclick="editTransfer(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-delete" onclick="deleteTransfer(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function openTransferModal(transferIndex = null) {
            const transfer = transferIndex !== null ? state.data.transfers[transferIndex] : null;
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');
            const today = new Date().toISOString().split('T')[0];

            if (!overlay || !content) return;

            const accounts = state.data.accounts || [];
            const accountOptions = accounts.map(acc => `<option value="${acc.name}">${acc.name} (${acc.type})</option>`).join('');

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${transfer ? t('edit') + ' ' + t('transfer') : t('add_transfer')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <form onsubmit="saveTransfer(event, ${transferIndex !== null ? transferIndex : 'null'}); return false;">
                    <div class="form-group">
                        <label class="form-label">${t('from_account')} *</label>
                        <select class="form-select" id="transfer-from-account" required>
                            <option value="">${t('select_account')}</option>
                            ${accountOptions}
                            ${transfer?.fromAccount ? `<option value="${transfer.fromAccount}" selected>${transfer.fromAccount}</option>` : ''}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('to_account')} *</label>
                        <select class="form-select" id="transfer-to-account" required>
                            <option value="">${t('select_account')}</option>
                            ${accountOptions}
                            ${transfer?.toAccount ? `<option value="${transfer.toAccount}" selected>${transfer.toAccount}</option>` : ''}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('amount')} *</label>
                        <input type="number" class="form-input" id="transfer-amount" required step="0.01" value="${transfer?.amount || ''}" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('date')} *</label>
                        <input type="date" class="form-input" id="transfer-date" required value="${transfer?.date || today}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('description')}</label>
                        <input type="text" class="form-input" id="transfer-description" value="${transfer?.description || ''}" placeholder="${t('transfer_description_placeholder')}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('notes_optional')}</label>
                        <textarea class="form-input" id="transfer-notes" placeholder="${t('additional_notes')}" rows="2">${transfer?.notes || ''}</textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
                        <button type="submit" class="btn btn-primary">${transfer ? t('update') : t('save')}</button>
                    </div>
                </form>
            `;
        }

        function saveTransfer(event, transferIndex) {
            if (event) event.preventDefault();
            if (!state.data.transfers) state.data.transfers = [];

            const fromAccount = document.getElementById('transfer-from-account').value;
            const toAccount = document.getElementById('transfer-to-account').value;

            if (fromAccount === toAccount) {
                showToast('From and To accounts cannot be the same', 'error');
                return;
            }

            const transfer = {
                fromAccount: fromAccount,
                toAccount: toAccount,
                amount: Number(document.getElementById('transfer-amount').value) || 0,
                date: document.getElementById('transfer-date').value,
                description: document.getElementById('transfer-description').value || '',
                notes: document.getElementById('transfer-notes').value || ''
            };

            const index = transferIndex === 'null' || transferIndex === null ? null : parseInt(transferIndex);
            if (index !== null && index >= 0) {
                state.data.transfers[index] = transfer;
            } else {
                state.data.transfers.push(transfer);
            }

            writeExcelFile().then(() => {
                renderTransfersList();
                renderAccountsList(); // Refresh account balances
                closeModal();
                showToast(`Transfer ${index !== null ? 'updated' : 'added'} successfully`, 'success');
            });
        }

        function editTransfer(transferIndex) {
            openTransferModal(transferIndex);
        }

        function deleteTransfer(transferIndex) {
            showConfirmModal({
                title: 'Delete Transfer',
                message: 'Are you sure you want to delete this transfer?',
                type: 'danger'
            }).then(confirmed => {
                if (!confirmed) return;
                state.data.transfers.splice(transferIndex, 1);
                writeExcelFile().then(() => {
                    renderTransfersList();
                    renderAccountsList(); // Refresh account balances
                    showToast('Transfer deleted successfully', 'success');
                });
            });
        }

        // --- FAMILY MEMBERS MANAGEMENT ---
        function renderFamilyMembersList() {
            const container = document.getElementById('family-members-container');
            if (!container) return;
            container.innerHTML = '';

            const familyMembers = state.data.familyMembers || [];
            if (familyMembers.length === 0) {
                container.innerHTML = `<div class="text-center" style="padding: 2rem; color: var(--text-light);">${t('no_family_members')}</div>`;
                return;
            }

            // Calculate statistics for each family member
            const memberStats = calculateFamilyMemberStats();

            familyMembers.forEach((member, index) => {
                const stats = memberStats[member.name] || { totalIncome: 0, totalExpenses: 0, expenseCount: 0, incomeCount: 0, netContribution: 0 };
                const div = document.createElement('div');
                div.className = 'card';
                div.style.marginBottom = '1rem';
                div.style.padding = '1.5rem';
                div.style.cursor = 'pointer';
                div.onclick = () => showFamilyMemberDetails(index);

                const isActive = member.active !== false;
                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <div style="flex: 1;">
                            <h3 style="margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;">
                                ${member.name || 'Unnamed'}
                                ${stats.netContribution >= 0 ? '<span style="color: var(--success); font-size: 0.875rem;">‚úì</span>' : '<span style="color: var(--danger); font-size: 0.875rem;">!</span>'}
                                <span style="background: ${isActive ? 'var(--success)' : 'var(--text-light)'}; color: white; padding: 0.125rem 0.5rem; border-radius: 12px; font-size: 0.75rem; font-weight: 500;">
                                    ${isActive ? 'Active' : 'Inactive'}
                                </span>
                            </h3>
                            ${member.relation ? `<div style="color: var(--text-light); font-size: 0.875rem; margin-top: 0.25rem;">${member.relation}</div>` : ''}
                            ${member.email ? `<div style="color: var(--text-light); font-size: 0.875rem; margin-top: 0.25rem;">üìß ${member.email}</div>` : ''}
                            ${member.phone ? `<div style="color: var(--text-light); font-size: 0.875rem; margin-top: 0.25rem;">üì± ${member.phone}</div>` : ''}
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn-edit" onclick="event.stopPropagation(); editFamilyMember(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-delete" onclick="event.stopPropagation(); deleteFamilyMember(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border);">
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;" data-translate="income">Income</div>
                            <div style="font-size: 1.1rem; font-weight: 600; color: var(--success);">${formatCurrency(stats.totalIncome)}</div>
                            <div style="font-size: 0.75rem; color: var(--text-light);">${stats.incomeCount} ${stats.incomeCount === 1 ? t('item') : t('items')}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;" data-translate="expenses">Expenses</div>
                            <div style="font-size: 1.1rem; font-weight: 600; color: var(--danger);">${formatCurrency(stats.totalExpenses)}</div>
                            <div style="font-size: 0.75rem; color: var(--text-light);">${stats.expenseCount} ${stats.expenseCount === 1 ? t('item') : t('items')}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-bottom: 0.25rem;">Net Contribution</div>
                            <div style="font-size: 1.1rem; font-weight: 600; color: ${stats.netContribution >= 0 ? 'var(--success)' : 'var(--danger)'};">
                                ${stats.netContribution >= 0 ? '+' : ''}${formatCurrency(stats.netContribution)}
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-light);">${stats.netContribution >= 0 ? 'Contributor' : 'Owed'}</div>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Calculate statistics for all family members
        function calculateFamilyMemberStats() {
            const stats = {};
            const familyMembers = state.data.familyMembers || [];

            // Initialize stats for each member
            familyMembers.forEach(member => {
                stats[member.name] = {
                    totalIncome: 0,
                    totalExpenses: 0,
                    expenseCount: 0,
                    incomeCount: 0,
                    netContribution: 0
                };
            });

            // Calculate income contributions
            (state.data.income || []).forEach(income => {
                if (income.familyMember && stats[income.familyMember]) {
                    const amount = Number(income.amount || 0);
                    stats[income.familyMember].totalIncome += amount;
                    stats[income.familyMember].incomeCount++;
                }
            });

            // Calculate expense shares
            (state.data.expenses || []).forEach(expense => {
                const amount = Number(expense.amount || 0);

                // Handle "Expense for / Given to" - when expense is given to a specific person
                if (expense.expenseFor && stats[expense.expenseFor]) {
                    // Full amount goes to the person it's given to
                    stats[expense.expenseFor].totalExpenses += amount;
                    stats[expense.expenseFor].expenseCount++;
                }

                // Handle contributors (family members who contributed)
                if (expense.familyMembers && Array.isArray(expense.familyMembers)) {
                    if (expense.expenseFor) {
                        // If expenseFor is set, contributors split the amount among themselves
                        if (expense.contributionType === 'custom' && expense.contributions) {
                            // Custom contributions - use the specified amounts
                            expense.familyMembers.forEach(memberName => {
                                if (stats[memberName]) {
                                    const contributionAmount = Number(expense.contributions[memberName] || 0);
                                    stats[memberName].totalExpenses += contributionAmount;
                                    stats[memberName].expenseCount++;
                                }
                            });
                        } else {
                            // Equal split among contributors
                            const shareCount = expense.familyMembers.length;
                            const sharePerPerson = shareCount > 0 ? amount / shareCount : 0;

                            expense.familyMembers.forEach(memberName => {
                                if (stats[memberName]) {
                                    stats[memberName].totalExpenses += sharePerPerson;
                                    stats[memberName].expenseCount++;
                                }
                            });
                        }
                    } else {
                        // Normal shared expense - divide equally
                        if (expense.contributionType === 'custom' && expense.contributions) {
                            // Custom contributions - use the specified amounts
                            expense.familyMembers.forEach(memberName => {
                                if (stats[memberName]) {
                                    const contributionAmount = Number(expense.contributions[memberName] || 0);
                                    stats[memberName].totalExpenses += contributionAmount;
                                    stats[memberName].expenseCount++;
                                }
                            });
                        } else {
                            // Equal split
                            const shareCount = expense.familyMembers.length;
                            const sharePerPerson = shareCount > 0 ? amount / shareCount : 0;

                            expense.familyMembers.forEach(memberName => {
                                if (stats[memberName]) {
                                    stats[memberName].totalExpenses += sharePerPerson;
                                    stats[memberName].expenseCount++;
                                }
                            });
                        }
                    }
                }
            });

            // Calculate net contribution
            familyMembers.forEach(member => {
                if (stats[member.name]) {
                    stats[member.name].netContribution = stats[member.name].totalIncome - stats[member.name].totalExpenses;
                }
            });

            return stats;
        }

        // Show detailed view for a family member
        function showFamilyMemberDetails(memberIndex) {
            const member = state.data.familyMembers[memberIndex];
            if (!member) return;

            const stats = calculateFamilyMemberStats()[member.name] || { totalIncome: 0, totalExpenses: 0, expenseCount: 0, incomeCount: 0, netContribution: 0 };

            // Get related transactions
            const relatedIncome = (state.data.income || []).filter(i => i.familyMember === member.name);
            const relatedExpenses = (state.data.expenses || []).filter(e =>
                (e.familyMembers && Array.isArray(e.familyMembers) && e.familyMembers.includes(member.name)) ||
                e.expenseFor === member.name
            );

            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            if (!overlay || !content) return;

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${member.name} - ${t('details')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <div style="padding: 1.5rem; max-height: 80vh; overflow-y: auto;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                        <div class="card" style="border-color: var(--success);">
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.5rem;" data-translate="total_income">Total Income</div>
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--success);">${formatCurrency(stats.totalIncome)}</div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">${stats.incomeCount} ${stats.incomeCount === 1 ? t('item') : t('items')}</div>
                        </div>
                        <div class="card" style="border-color: var(--danger);">
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.5rem;" data-translate="total_expenses">Total Expenses</div>
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--danger);">${formatCurrency(stats.totalExpenses)}</div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">${stats.expenseCount} ${stats.expenseCount === 1 ? t('item') : t('items')}</div>
                        </div>
                        <div class="card" style="border-color: ${stats.netContribution >= 0 ? 'var(--success)' : 'var(--danger)'};">
                            <div style="font-size: 0.875rem; color: var(--text-light); margin-bottom: 0.5rem;" data-translate="net_contribution">Net Contribution</div>
                            <div style="font-size: 1.5rem; font-weight: 600; color: ${stats.netContribution >= 0 ? 'var(--success)' : 'var(--danger)'};">
                                ${stats.netContribution >= 0 ? '+' : ''}${formatCurrency(stats.netContribution)}
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.25rem;">${stats.netContribution >= 0 ? t('net_contributor') : t('net_owed')}</div>
                        </div>
                    </div>
                    
                    ${member.relation || member.email || member.phone || member.notes ? `
                    <div class="card" style="margin-bottom: 1.5rem;">
                        <h3 style="margin: 0 0 1rem 0; font-size: 1.1rem;" data-translate="member_information">Member Information</h3>
                        <div style="display: grid; gap: 0.75rem;">
                            ${member.relation ? `<div><strong>Relation:</strong> ${member.relation}</div>` : ''}
                            ${member.email ? `<div><strong>Email:</strong> <a href="mailto:${member.email}">${member.email}</a></div>` : ''}
                            ${member.phone ? `<div><strong>Phone:</strong> <a href="tel:${member.phone}">${member.phone}</a></div>` : ''}
                            ${member.notes ? `<div><strong>Notes:</strong> <div style="margin-top: 0.25rem; color: var(--text-light);">${member.notes}</div></div>` : ''}
                        </div>
                    </div>
                    ` : ''}
                    
                    ${relatedIncome.length > 0 ? `
                    <div class="card" style="margin-bottom: 1.5rem;">
                        <h3 style="margin: 0 0 1rem 0; font-size: 1.1rem;" data-translate="income">Income</h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="border-bottom: 1px solid var(--border);">
                                        <th style="text-align: left; padding: 0.5rem;" data-translate="date">Date</th>
                                        <th style="text-align: left; padding: 0.5rem;" data-translate="source">Source</th>
                                        <th style="text-align: right; padding: 0.5rem;" data-translate="amount">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${relatedIncome.map(income => `
                                        <tr style="border-bottom: 1px solid var(--border);">
                                            <td style="padding: 0.5rem;">${formatDate(income.date)}</td>
                                            <td style="padding: 0.5rem;">${income.source || '-'}</td>
                                            <td style="padding: 0.5rem; text-align: right; color: var(--success); font-weight: 600;">${formatCurrency(income.amount)}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    ` : ''}
                    
                    ${relatedExpenses.length > 0 ? `
                    <div class="card">
                        <h3 style="margin: 0 0 1rem 0; font-size: 1.1rem;" data-translate="expenses">Expenses</h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="border-bottom: 1px solid var(--border);">
                                        <th style="text-align: left; padding: 0.5rem;" data-translate="date">Date</th>
                                        <th style="text-align: left; padding: 0.5rem;" data-translate="description">Description</th>
                                        <th style="text-align: right; padding: 0.5rem;">Share</th>
                                        <th style="text-align: right; padding: 0.5rem;" data-translate="amount">Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${relatedExpenses.map(expense => {
                const shareCount = expense.familyMembers ? expense.familyMembers.length : 1;
                const share = Number(expense.amount || 0) / shareCount;
                return `
                                            <tr style="border-bottom: 1px solid var(--border);">
                                                <td style="padding: 0.5rem;">${formatDate(expense.date)}</td>
                                                <td style="padding: 0.5rem;">${expense.description || '-'}</td>
                                                <td style="padding: 0.5rem; text-align: right; color: var(--danger);">${formatCurrency(share)}</td>
                                                <td style="padding: 0.5rem; text-align: right; color: var(--text-light); font-size: 0.875rem;">${formatCurrency(expense.amount)} (${shareCount} ${shareCount === 1 ? t('person') : t('people')})</td>
                                            </tr>
                                        `;
            }).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    ` : ''}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">${t('close')}</button>
                    <button type="button" class="btn btn-primary" onclick="closeModal(); editFamilyMember(${memberIndex})">${t('edit')}</button>
                </div>
            `;
        }

        function openFamilyMemberModal(memberIndex = null) {
            const member = memberIndex !== null ? state.data.familyMembers[memberIndex] : null;
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            if (!overlay || !content) return;

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${member ? t('edit_family_member') : t('add_family_member')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <form onsubmit="saveFamilyMember(event, ${memberIndex !== null ? memberIndex : 'null'}); return false;">
                    <div class="form-group">
                        <label class="form-label">${t('family_member_name')} *</label>
                        <input type="text" class="form-input" id="family-member-name" required value="${member?.name || ''}" placeholder="e.g. John Doe">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Relation (Optional)</label>
                        <input type="text" class="form-input" id="family-member-relation" value="${member?.relation || ''}" placeholder="e.g. Spouse, Child, Parent">
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="family-member-active" ${member?.active !== false ? 'checked' : ''}>
                            <span>Active (Inactive members won't appear in expense selection)</span>
                        </label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
                        <button type="submit" class="btn btn-primary">${member ? t('update') : t('save')}</button>
                    </div>
                </form>
            `;
        }

        function saveFamilyMember(event, memberIndex) {
            if (event) event.preventDefault();
            if (!state.data.familyMembers) state.data.familyMembers = [];

            const nameEl = document.getElementById('family-member-name');
            const relationEl = document.getElementById('family-member-relation');
            const emailEl = document.getElementById('family-member-email');
            const phoneEl = document.getElementById('family-member-phone');
            const notesEl = document.getElementById('family-member-notes');
            const activeEl = document.getElementById('family-member-active');

            const member = {
                name: nameEl ? nameEl.value.trim() : '',
                relation: relationEl ? relationEl.value.trim() : '',
                email: emailEl ? emailEl.value.trim() : '',
                phone: phoneEl ? phoneEl.value.trim() : '',
                notes: notesEl ? notesEl.value.trim() : '',
                active: activeEl ? activeEl.checked : true
            };

            if (!member.name) {
                showToast('Family member name is required', 'error');
                return;
            }

            const index = memberIndex === 'null' || memberIndex === null ? null : parseInt(memberIndex);
            if (index !== null && index >= 0) {
                state.data.familyMembers[index] = member;
            } else {
                // Check if name already exists
                const exists = state.data.familyMembers.find(m => m.name.toLowerCase() === member.name.toLowerCase());
                if (exists) {
                    showToast('Family member with this name already exists', 'error');
                    return;
                }
                state.data.familyMembers.push(member);
            }

            writeExcelFile().then(() => {
                renderFamilyMembersList();
                closeModal();
                showToast(`Family member ${index !== null ? 'updated' : 'added'} successfully`, 'success');
            });
        }

        function editFamilyMember(memberIndex) {
            openFamilyMemberModal(memberIndex);
        }

        function deleteFamilyMember(memberIndex) {
            showConfirmModal({
                title: t('delete_family_member'),
                message: t('are_you_sure_delete_family_member'),
                type: 'danger'
            }).then(confirmed => {
                if (!confirmed) return;
                state.data.familyMembers.splice(memberIndex, 1);
                writeExcelFile().then(() => {
                    renderFamilyMembersList();
                    showToast('Family member deleted successfully', 'success');
                });
            });
        }

        // --- DEBT TRACKER ---
        function renderDebtsList() {
            const container = document.getElementById('debts-container');
            if (!container) return;
            container.innerHTML = '';

            const debts = state.data.debts || [];
            if (debts.length === 0) {
                container.innerHTML = '<div class="text-center" style="padding: 2rem; color: var(--text-light);">No debts tracked. Add a debt to start tracking.</div>';
                return;
            }

            let totalDebt = 0;
            debts.forEach((debt, index) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.style.marginBottom = '1rem';
                div.style.padding = '1.5rem';

                const principal = Number(debt.principal || 0);
                const paid = Number(debt.paid || 0);
                const remaining = principal - paid;
                totalDebt += remaining;
                const percentPaid = principal > 0 ? (paid / principal) * 100 : 0;

                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 1rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <h3 style="margin: 0; font-size: 1.2rem;">${debt.name || 'Unnamed Debt'}</h3>
                                <span style="background: ${debt.type === 'Loan' ? 'var(--primary)' : 'var(--danger)'}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">${debt.type || 'Debt'}</span>
                            </div>
                            <div style="color: var(--text-light); font-size: 0.875rem; margin-bottom: 0.75rem;">
                                ${debt.description || 'No description'} ${debt.creditor ? `‚Ä¢ Creditor: ${debt.creditor}` : ''}
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Principal</div>
                                    <div style="font-size: 1.2rem; font-weight: bold;">${formatCurrency(principal)}</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Paid</div>
                                    <div style="font-size: 1.2rem; font-weight: bold; color: var(--success);">${formatCurrency(paid)}</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Remaining</div>
                                    <div style="font-size: 1.2rem; font-weight: bold; color: var(--danger);">${formatCurrency(remaining)}</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Progress</div>
                                    <div style="font-size: 1.2rem; font-weight: bold;">${Math.round(percentPaid)}%</div>
                                </div>
                            </div>
                            <div class="progress-track" style="margin-bottom: 0.5rem;">
                                <div class="progress-fill" style="width: ${Math.min(100, percentPaid)}%; background: var(--success);"></div>
                            </div>
                            ${debt.dueDate ? `<div style="font-size: 0.75rem; color: var(--text-light);">Due Date: ${formatDate(debt.dueDate)}</div>` : ''}
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-primary" onclick="makePayment(${index})" style="font-size: 0.875rem;">
                                Record Payment
                            </button>
                            <button class="btn-edit" onclick="editDebt(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-delete" onclick="deleteDebt(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });

            // Add summary
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'card';
            summaryDiv.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;';
            summaryDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Total Debt Remaining</div>
                        <div style="font-size: 2rem; font-weight: bold;">${formatCurrency(totalDebt)}</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Total Debts</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">${debts.length}</div>
                    </div>
                </div>
            `;
            container.insertBefore(summaryDiv, container.firstChild);
        }

        function openDebtModal(debtIndex = null) {
            const debt = debtIndex !== null ? state.data.debts[debtIndex] : null;
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            if (!overlay || !content) return;

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${debt ? t('edit') + ' ' + t('debts') : t('add_debt')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <form onsubmit="saveDebt(event, ${debtIndex !== null ? debtIndex : 'null'}); return false;">
                    <div class="form-group">
                        <label class="form-label">${t('debt_name')} *</label>
                        <input type="text" class="form-input" id="debt-name" required value="${debt?.name || ''}" placeholder="e.g. Home Loan">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('debt_type')} *</label>
                        <select class="form-input" id="debt-type" required>
                            <option value="Loan" ${debt?.type === 'Loan' ? 'selected' : ''}>${t('loan')}</option>
                            <option value="Credit Card" ${debt?.type === 'Credit Card' ? 'selected' : ''}>${t('card')}</option>
                            <option value="Mortgage" ${debt?.type === 'Mortgage' ? 'selected' : ''}>${t('mortgage')}</option>
                            <option value="Personal Loan" ${debt?.type === 'Personal Loan' ? 'selected' : ''}>${t('personal_loan')}</option>
                            <option value="Other" ${debt?.type === 'Other' ? 'selected' : ''}>${t('other')}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('principal_amount')} *</label>
                        <input type="number" class="form-input" id="debt-principal" required step="0.01" value="${debt?.principal || ''}" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('amount_paid')}</label>
                        <input type="number" class="form-input" id="debt-paid" step="0.01" value="${debt?.paid || 0}" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('creditor_lender')}</label>
                        <input type="text" class="form-input" id="debt-creditor" value="${debt?.creditor || ''}" placeholder="e.g. Bank Name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('due_date')}</label>
                        <input type="date" class="form-input" id="debt-due-date" value="${debt?.dueDate || ''}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">${t('description')}</label>
                        <textarea class="form-input" id="debt-description" rows="3" placeholder="${t('optional_description')}">${debt?.description || ''}</textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
                        <button type="submit" class="btn btn-primary">${debt ? t('update_debt') : t('add_debt')}</button>
                    </div>
                </form>
            `;
        }

        function saveDebt(event, debtIndex) {
            if (event) event.preventDefault();
            if (!state.data.debts) state.data.debts = [];

            const debt = {
                name: document.getElementById('debt-name').value,
                type: document.getElementById('debt-type').value,
                principal: Number(document.getElementById('debt-principal').value) || 0,
                paid: Number(document.getElementById('debt-paid').value) || 0,
                creditor: document.getElementById('debt-creditor').value,
                dueDate: document.getElementById('debt-due-date').value,
                description: document.getElementById('debt-description').value
            };

            const index = debtIndex === 'null' || debtIndex === null ? null : parseInt(debtIndex);
            if (index !== null && index >= 0) {
                state.data.debts[index] = debt;
            } else {
                state.data.debts.push(debt);
            }

            writeExcelFile().then(() => {
                renderDebtsList();
                closeModal();
                showToast(`Debt ${index !== null ? 'updated' : 'added'} successfully`, 'success');
            });
        }

        function makePayment(debtIndex) {
            const debt = state.data.debts[debtIndex];
            const modal = document.getElementById('modal');
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Record Payment</h2>
                        <button class="modal-close" onclick="closeModal()">√ó</button>
                    </div>
                    <form onsubmit="savePayment(event, ${debtIndex})">
                        <div class="form-group">
                            <label class="form-label">Payment Amount *</label>
                            <input type="number" class="form-input" id="payment-amount" required step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Payment Date</label>
                            <input type="date" class="form-input" id="payment-date" value="${new Date().toISOString().split('T')[0]}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Notes</label>
                            <textarea class="form-input" id="payment-notes" rows="3" placeholder="${t('optional_notes')}"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Record Payment</button>
                        </div>
                    </form>
                </div>
            `;
            modal.classList.add('show');
        }

        function savePayment(event, debtIndex) {
            event.preventDefault();
            const paymentAmount = Number(document.getElementById('payment-amount').value) || 0;
            const debt = state.data.debts[debtIndex];

            debt.paid = (Number(debt.paid || 0) + paymentAmount);
            if (debt.paid > debt.principal) debt.paid = debt.principal;

            writeExcelFile().then(() => {
                renderDebtsList();
                closeModal();
                showToast('Payment recorded successfully', 'success');
            });
        }

        function editDebt(debtIndex) {
            openDebtModal(debtIndex);
        }

        function deleteDebt(debtIndex) {
            showConfirmModal({
                title: 'Delete Debt',
                message: t('are_you_sure_delete_debt'),
                type: 'danger'
            }).then(confirmed => {
                if (!confirmed) return;
                state.data.debts.splice(debtIndex, 1);
                writeExcelFile().then(() => {
                    renderDebtsList();
                    showToast('Debt deleted successfully', 'success');
                });
            });
        }

        // --- RECURRING TRANSACTIONS MANAGER ---
        function renderRecurringList() {
            const container = document.getElementById('recurring-container');
            if (!container) return;
            container.innerHTML = '';

            const allRecurring = [
                ...state.data.income.filter(item => item.recurring).map(item => ({ ...item, type: 'income', typeLabel: 'Income' })),
                ...state.data.expenses.filter(item => item.recurring).map(item => ({ ...item, type: 'expense', typeLabel: 'Expense' })),
                ...state.data.receivables.filter(item => item.recurring).map(item => ({ ...item, type: 'receivable', typeLabel: 'Receivable' })),
                ...state.data.payables.filter(item => item.recurring).map(item => ({ ...item, type: 'payable', typeLabel: 'Payable' }))
            ];

            if (allRecurring.length === 0) {
                container.innerHTML = '<div class="text-center" style="padding: 2rem; color: var(--text-light);">No recurring transactions found. Mark transactions as recurring to see them here.</div>';
                return;
            }

            allRecurring.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.style.marginBottom = '1rem';
                div.style.padding = '1rem';

                const typeColor = item.type === 'income' ? 'var(--success)' : item.type === 'expense' ? 'var(--danger)' : item.type === 'receivable' ? 'var(--warning)' : 'var(--purple)';
                const nextDate = item.recurringNextDate || item.date || item.dueDate || 'Not set';
                const frequency = item.recurringFrequency || 'monthly';

                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 1rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span style="background: ${typeColor}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">${item.typeLabel}</span>
                                <strong>${item.source || item.description || item.from || item.to || 'Unnamed'}</strong>
                            </div>
                            <div style="color: var(--text-light); font-size: 0.875rem; margin-bottom: 0.5rem;">
                                Amount: <strong style="color: ${typeColor};">${formatCurrency(item.amount)}</strong> ‚Ä¢ Frequency: ${frequency} ‚Ä¢ Next: ${nextDate}
                            </div>
                            ${item.category ? `<div style="font-size: 0.75rem; color: var(--text-light);">Category: ${item.category}</div>` : ''}
                        </div>
                        <button class="btn btn-secondary" onclick="editRecurringItem('${item.type}', ${state.data[item.type === 'income' ? 'income' : item.type === 'expense' ? 'expenses' : item.type === 'receivable' ? 'receivables' : 'payables'].indexOf(item)})" style="font-size: 0.875rem;">
                            Edit
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function generateRecurringTransactions() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            let generatedCount = 0;

            const generateForType = (items, type) => {
                items.forEach(item => {
                    if (!item.recurring || !item.recurringNextDate) return;

                    const nextDate = new Date(item.recurringNextDate);
                    nextDate.setHours(0, 0, 0, 0);

                    if (nextDate <= today) {
                        // Create new transaction
                        const newItem = { ...item };
                        delete newItem.recurringNextDate;

                        // Set date based on type
                        if (type === 'income' || type === 'expense') {
                            newItem.date = item.recurringNextDate;
                        } else {
                            newItem.dueDate = item.recurringNextDate;
                        }

                        // Calculate next date
                        const frequency = item.recurringFrequency || 'monthly';
                        const next = new Date(nextDate);
                        switch (frequency) {
                            case 'daily':
                                next.setDate(next.getDate() + 1);
                                break;
                            case 'weekly':
                                next.setDate(next.getDate() + 7);
                                break;
                            case 'monthly':
                                next.setMonth(next.getMonth() + 1);
                                break;
                            case 'yearly':
                                next.setFullYear(next.getFullYear() + 1);
                                break;
                        }

                        // Update next date
                        item.recurringNextDate = next.toISOString().split('T')[0];

                        // Add to appropriate array
                        if (type === 'income') {
                            state.data.income.push(newItem);
                        } else if (type === 'expense') {
                            state.data.expenses.push(newItem);
                        } else if (type === 'receivable') {
                            state.data.receivables.push(newItem);
                        } else if (type === 'payable') {
                            state.data.payables.push(newItem);
                        }

                        generatedCount++;
                    }
                });
            };

            generateForType(state.data.income, 'income');
            generateForType(state.data.expenses, 'expense');
            generateForType(state.data.receivables, 'receivable');
            generateForType(state.data.payables, 'payable');

            if (generatedCount > 0) {
                writeExcelFile().then(() => {
                    showToast(`Generated ${generatedCount} recurring transaction(s)`, 'success');
                    renderAll();
                });
            } else {
                showToast('No recurring transactions due at this time', 'info');
            }
        }

        function editRecurringItem(type, index) {
            openModal('form', type);
            setTimeout(() => {
                const item = state.data[type === 'income' ? 'income' : type === 'expenses' ? 'expenses' : type === 'receivable' ? 'receivables' : 'payables'][index];
                editingIndex = index;
                // Form will be populated by openModal function
            }, 100);
        }

        // --- FINANCIAL CALENDAR ---
        let currentCalendarDate = new Date();

        function renderFinancialCalendar() {
            const container = document.getElementById('calendar-container');
            if (!container) return;

            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();

            // Get all transactions for the month
            const monthStart = `${year}-${String(month + 1).padStart(2, '0')}-01`;
            const monthEnd = `${year}-${String(month + 1).padStart(2, '0')}-${String(daysInMonth).padStart(2, '0')}`;

            const transactionsByDate = {};

            [...state.data.income, ...state.data.expenses, ...state.data.receivables, ...state.data.payables].forEach(item => {
                const date = item.date || item.dueDate;
                if (date && date >= monthStart && date <= monthEnd) {
                    if (!transactionsByDate[date]) transactionsByDate[date] = [];
                    transactionsByDate[date].push(item);
                }
            });

            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

            let html = `
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem;">${monthNames[month]} ${year}</h3>
                </div>
                <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
            `;

            // Day headers
            dayNames.forEach(day => {
                html += `<div style="text-align: center; font-weight: 600; padding: 0.5rem; background: var(--card-bg); border-radius: 4px;">${day}</div>`;
            });

            // Empty cells for days before month starts
            for (let i = 0; i < startingDayOfWeek; i++) {
                html += `<div style="min-height: 80px; border: 1px solid var(--border); border-radius: 4px;"></div>`;
            }

            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayTransactions = transactionsByDate[dateStr] || [];
                const isToday = dateStr === new Date().toISOString().split('T')[0];

                let incomeTotal = 0;
                let expenseTotal = 0;
                dayTransactions.forEach(t => {
                    if (t.amount) {
                        if (state.data.income.includes(t) || (t.type === 'receivable' && (t.status || 'unpaid') === 'unpaid')) {
                            incomeTotal += Number(t.amount);
                        } else {
                            expenseTotal += Number(t.amount);
                        }
                    }
                });

                html += `
                    <div style="min-height: 80px; border: 1px solid var(--border); border-radius: 4px; padding: 0.5rem; ${isToday ? 'background: #e6f3ff; border: 2px solid var(--primary);' : ''}">
                        <div style="font-weight: 600; margin-bottom: 0.25rem; ${isToday ? 'color: var(--primary);' : ''}">${day}</div>
                        ${incomeTotal > 0 ? `<div style="font-size: 0.75rem; color: var(--success);">+${formatCurrency(incomeTotal)}</div>` : ''}
                        ${expenseTotal > 0 ? `<div style="font-size: 0.75rem; color: var(--danger);">-${formatCurrency(expenseTotal)}</div>` : ''}
                        ${dayTransactions.length > 0 ? `<div style="font-size: 0.7rem; color: var(--text-light); margin-top: 0.25rem;">${dayTransactions.length} transaction(s)</div>` : ''}
                    </div>
                `;
            }

            html += '</div>';
            container.innerHTML = html;
        }

        function changeCalendarMonth(direction) {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() + direction);
            renderFinancialCalendar();
        }

        // --- CASH FLOW ANALYSIS ---
        function renderCashFlow() {
            const container = document.getElementById('cashflow-container');
            if (!container) return;

            const period = document.getElementById('cashflow-period')?.value || 'monthly';
            const today = new Date();
            const periods = [];

            // Get data for last 12 periods
            for (let i = 11; i >= 0; i--) {
                let periodStart, periodEnd, periodLabel;
                const periodDate = new Date(today);

                if (period === 'monthly') {
                    periodDate.setMonth(today.getMonth() - i);
                    periodStart = `${periodDate.getFullYear()}-${String(periodDate.getMonth() + 1).padStart(2, '0')}-01`;
                    const lastDay = new Date(periodDate.getFullYear(), periodDate.getMonth() + 1, 0).getDate();
                    periodEnd = `${periodDate.getFullYear()}-${String(periodDate.getMonth() + 1).padStart(2, '0')}-${String(lastDay).padStart(2, '0')}`;
                    periodLabel = periodDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
                } else if (period === 'quarterly') {
                    const quarter = Math.floor((today.getMonth() - i * 3) / 3);
                    const year = periodDate.getFullYear() - Math.floor((today.getMonth() - i * 3) / 12);
                    periodDate.setFullYear(year);
                    periodDate.setMonth(quarter * 3);
                    periodStart = `${periodDate.getFullYear()}-${String(periodDate.getMonth() + 1).padStart(2, '0')}-01`;
                    const lastDay = new Date(periodDate.getFullYear(), periodDate.getMonth() + 3, 0).getDate();
                    periodEnd = `${periodDate.getFullYear()}-${String(periodDate.getMonth() + 3).padStart(2, '0')}-${String(lastDay).padStart(2, '0')}`;
                    periodLabel = `Q${quarter + 1} ${year}`;
                } else {
                    periodDate.setFullYear(today.getFullYear() - i);
                    periodStart = `${periodDate.getFullYear()}-01-01`;
                    periodEnd = `${periodDate.getFullYear()}-12-31`;
                    periodLabel = periodDate.getFullYear().toString();
                }

                const income = state.data.income
                    .filter(item => item.date && item.date >= periodStart && item.date <= periodEnd)
                    .reduce((sum, item) => sum + Number(item.amount || 0), 0);

                const expenses = state.data.expenses
                    .filter(item => item.date && item.date >= periodStart && item.date <= periodEnd)
                    .reduce((sum, item) => sum + Number(item.amount || 0), 0);

                const cashFlow = income - expenses;
                periods.push({ label: periodLabel, income, expenses, cashFlow });
            }

            let html = `
                <div style="overflow-x: auto;">
                    <table style="width: 100%; min-width: 600px;">
                        <thead>
                            <tr style="background: var(--card-bg);">
                                <th style="padding: 1rem; text-align: left;">Period</th>
                                <th style="padding: 1rem; text-align: right;">Income</th>
                                <th style="padding: 1rem; text-align: right;">Expenses</th>
                                <th style="padding: 1rem; text-align: right;">Cash Flow</th>
                                <th style="padding: 1rem; text-align: center;">Trend</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            periods.forEach((p, index) => {
                const trend = index > 0 ? (p.cashFlow - periods[index - 1].cashFlow) : 0;
                html += `
                    <tr style="border-bottom: 1px solid var(--border);">
                        <td style="padding: 1rem; font-weight: 600;">${p.label}</td>
                        <td style="padding: 1rem; text-align: right; color: var(--success);">${formatCurrency(p.income)}</td>
                        <td style="padding: 1rem; text-align: right; color: var(--danger);">${formatCurrency(p.expenses)}</td>
                        <td style="padding: 1rem; text-align: right; font-weight: bold; color: ${p.cashFlow >= 0 ? 'var(--success)' : 'var(--danger)'};">
                            ${formatCurrency(p.cashFlow)}
                        </td>
                        <td style="padding: 1rem; text-align: center;">
                            ${trend > 0 ? 'üìà' : trend < 0 ? 'üìâ' : '‚û°Ô∏è'}
                            ${trend !== 0 ? `<span style="font-size: 0.75rem; color: ${trend > 0 ? 'var(--success)' : 'var(--danger)'};">${trend > 0 ? '+' : ''}${formatCurrency(trend)}</span>` : ''}
                        </td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>
            `;

            container.innerHTML = html;
        }

        // --- INVESTMENT PORTFOLIO TRACKER ---
        function renderInvestmentsList() {
            const container = document.getElementById('investments-container');
            if (!container) return;
            container.innerHTML = '';

            const investments = state.data.investments || [];
            if (investments.length === 0) {
                container.innerHTML = '<div class="text-center" style="padding: 2rem; color: var(--text-light);">No investments tracked. Add an investment to start tracking your portfolio.</div>';
                return;
            }

            let totalValue = 0;
            let totalCost = 0;

            investments.forEach((investment, index) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.style.marginBottom = '1rem';
                div.style.padding = '1.5rem';

                const cost = Number(investment.cost || 0);
                const currentValue = Number(investment.currentValue || cost);
                const gain = currentValue - cost;
                const gainPercent = cost > 0 ? ((gain / cost) * 100) : 0;
                totalValue += currentValue;
                totalCost += cost;

                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 1rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <h3 style="margin: 0; font-size: 1.2rem;">${investment.name || 'Unnamed Investment'}</h3>
                                <span style="background: ${investment.type === 'Stock' ? 'var(--primary)' : investment.type === 'Bond' ? 'var(--success)' : investment.type === 'Mutual Fund' ? 'var(--purple)' : 'var(--warning)'}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 500;">${investment.type || 'Investment'}</span>
                            </div>
                            <div style="color: var(--text-light); font-size: 0.875rem; margin-bottom: 0.75rem;">
                                ${investment.description || 'No description'} ${investment.symbol ? `‚Ä¢ Symbol: ${investment.symbol}` : ''}
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Cost Basis</div>
                                    <div style="font-size: 1.2rem; font-weight: bold;">${formatCurrency(cost)}</div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Current Value</div>
                                    <div style="font-size: 1.2rem; font-weight: bold; color: ${currentValue >= cost ? 'var(--success)' : 'var(--danger)'};">
                                        ${formatCurrency(currentValue)}
                                    </div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Gain/Loss</div>
                                    <div style="font-size: 1.2rem; font-weight: bold; color: ${gain >= 0 ? 'var(--success)' : 'var(--danger)'};">
                                        ${gain >= 0 ? '+' : ''}${formatCurrency(gain)}
                                    </div>
                                </div>
                                <div>
                                    <div style="font-size: 0.75rem; color: var(--text-light);">Return %</div>
                                    <div style="font-size: 1.2rem; font-weight: bold; color: ${gainPercent >= 0 ? 'var(--success)' : 'var(--danger)'};">
                                        ${gainPercent >= 0 ? '+' : ''}${gainPercent.toFixed(2)}%
                                    </div>
                                </div>
                            </div>
                            ${investment.purchaseDate ? `<div style="font-size: 0.75rem; color: var(--text-light); margin-top: 0.5rem;">Purchase Date: ${investment.purchaseDate}</div>` : ''}
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-primary" onclick="updateInvestmentValue(${index})" style="font-size: 0.875rem;">
                                Update Value
                            </button>
                            <button class="btn-edit" onclick="editInvestment(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                            </button>
                            <button class="btn-delete" onclick="deleteInvestment(${index})">
                                <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });

            // Add portfolio summary
            const totalGain = totalValue - totalCost;
            const totalGainPercent = totalCost > 0 ? ((totalGain / totalCost) * 100) : 0;
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'card';
            summaryDiv.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;';
            summaryDiv.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                    <div>
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">Total Portfolio Value</div>
                        <div style="font-size: 2rem; font-weight: bold;">${formatCurrency(totalValue)}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">${t('total_cost_basis')}</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">${formatCurrency(totalCost)}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">${t('total_gain_loss')}</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">${totalGain >= 0 ? '+' : ''}${formatCurrency(totalGain)}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.875rem; opacity: 0.9; margin-bottom: 0.5rem;">${t('total_return')}</div>
                        <div style="font-size: 1.5rem; font-weight: bold;">${totalGainPercent >= 0 ? '+' : ''}${totalGainPercent.toFixed(2)}%</div>
                    </div>
                </div>
            `;
            container.insertBefore(summaryDiv, container.firstChild);
        }

        function openInvestmentModal(investmentIndex = null) {
            const investment = investmentIndex !== null ? state.data.investments[investmentIndex] : null;
            const overlay = document.getElementById('modal-overlay');
            const content = document.getElementById('modal-content');

            if (!overlay || !content) return;

            overlay.classList.add('active');
            content.innerHTML = `
                <div class="modal-header">
                    <h2>${investment ? t('edit_investment') : t('add_investment')}</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <form onsubmit="saveInvestment(event, ${investmentIndex !== null ? investmentIndex : 'null'}); return false;">
                        <div class="form-group">
                            <label class="form-label">${t('investment_name')} *</label>
                            <input type="text" class="form-input" id="investment-name" required value="${investment?.name || ''}" placeholder="${t('placeholder_apple_inc')}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('type')} *</label>
                            <select class="form-input" id="investment-type" required>
                                <option value="Stock" ${investment?.type === 'Stock' ? 'selected' : ''}>${t('stock')}</option>
                                <option value="Bond" ${investment?.type === 'Bond' ? 'selected' : ''}>${t('bond')}</option>
                                <option value="Mutual Fund" ${investment?.type === 'Mutual Fund' ? 'selected' : ''}>${t('mutual_fund')}</option>
                                <option value="ETF" ${investment?.type === 'ETF' ? 'selected' : ''}>${t('etf')}</option>
                                <option value="Crypto" ${investment?.type === 'Crypto' ? 'selected' : ''}>${t('cryptocurrency')}</option>
                                <option value="Other" ${investment?.type === 'Other' ? 'selected' : ''}>${t('other')}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('symbol_ticker')}</label>
                            <input type="text" class="form-input" id="investment-symbol" value="${investment?.symbol || ''}" placeholder="${t('placeholder_aapl')}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('cost_basis')} *</label>
                            <input type="number" class="form-input" id="investment-cost" required step="0.01" value="${investment?.cost || ''}" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('current_value')}</label>
                            <input type="number" class="form-input" id="investment-value" step="0.01" value="${investment?.currentValue || investment?.cost || ''}" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('purchase_date')}</label>
                            <input type="date" class="form-input" id="investment-date" value="${investment?.purchaseDate || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">${t('description')}</label>
                            <textarea class="form-input" id="investment-description" rows="3" placeholder="${t('optional_description')}">${investment?.description || ''}</textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">${t('cancel')}</button>
                            <button type="submit" class="btn btn-primary">${investment ? t('update_investment') : t('add_investment')}</button>
                        </div>
                    </form>
            `;
        }

        function saveInvestment(event, investmentIndex) {
            if (event) event.preventDefault();
            if (!state.data.investments) state.data.investments = [];

            const investment = {
                name: document.getElementById('investment-name').value,
                type: document.getElementById('investment-type').value,
                symbol: document.getElementById('investment-symbol').value,
                cost: Number(document.getElementById('investment-cost').value) || 0,
                currentValue: Number(document.getElementById('investment-value').value) || Number(document.getElementById('investment-cost').value) || 0,
                purchaseDate: document.getElementById('investment-date').value,
                description: document.getElementById('investment-description').value
            };

            const index = investmentIndex === 'null' || investmentIndex === null ? null : parseInt(investmentIndex);
            if (index !== null && index >= 0) {
                state.data.investments[index] = investment;
            } else {
                state.data.investments.push(investment);
            }

            writeExcelFile().then(() => {
                renderInvestmentsList();
                closeModal();
                showToast(`Investment ${index !== null ? 'updated' : 'added'} successfully`, 'success');
            });
        }

        function updateInvestmentValue(investmentIndex) {
            const investment = state.data.investments[investmentIndex];
            const modal = document.getElementById('modal');
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Update Investment Value</h2>
                        <button class="modal-close" onclick="closeModal()">√ó</button>
                    </div>
                    <form onsubmit="saveInvestmentValue(event, ${investmentIndex})">
                        <div class="form-group">
                            <label class="form-label">Current Value *</label>
                            <input type="number" class="form-input" id="investment-update-value" required step="0.01" value="${investment?.currentValue || investment?.cost || 0}" placeholder="0.00">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Update Value</button>
                        </div>
                    </form>
                </div>
            `;
            modal.classList.add('show');
        }

        function saveInvestmentValue(event, investmentIndex) {
            event.preventDefault();
            const currentValue = Number(document.getElementById('investment-update-value').value) || 0;
            const investment = state.data.investments[investmentIndex];

            investment.currentValue = currentValue;

            writeExcelFile().then(() => {
                renderInvestmentsList();
                closeModal();
                showToast('Investment value updated successfully', 'success');
            });
        }

        function editInvestment(investmentIndex) {
            openInvestmentModal(investmentIndex);
        }

        function deleteInvestment(investmentIndex) {
            showConfirmModal({
                title: 'Delete Investment',
                message: t('are_you_sure_delete_investment'),
                type: 'danger'
            }).then(confirmed => {
                if (!confirmed) return;
                state.data.investments.splice(investmentIndex, 1);
                writeExcelFile().then(() => {
                    renderInvestmentsList();
                    showToast('Investment deleted successfully', 'success');
                });
            });
        }

        // --- KEYBOARD SHORTCUTS ---
        document.addEventListener('keydown', (e) => {
            // Don't trigger shortcuts when typing in inputs, textareas, or contenteditable elements
            const target = e.target;
            const isInputFocused = target.tagName === 'INPUT' ||
                target.tagName === 'TEXTAREA' ||
                target.isContentEditable ||
                (target.closest('.modal') && target.tagName !== 'BUTTON');

            // Ctrl/Cmd combinations
            if (e.ctrlKey || e.metaKey) {
                switch (e.key.toLowerCase()) {
                    case '1':
                        e.preventDefault();
                        switchTab('dashboard');
                        break;
                    case '2':
                        e.preventDefault();
                        switchTab('income');
                        break;
                    case '3':
                        e.preventDefault();
                        switchTab('expenses');
                        break;
                    case '4':
                        e.preventDefault();
                        switchTab('receivables');
                        break;
                    case '5':
                        e.preventDefault();
                        switchTab('payables');
                        break;
                    case '6':
                        e.preventDefault();
                        switchTab('plans');
                        break;
                    case '7':
                        e.preventDefault();
                        switchTab('budgets');
                        break;
                    case '8':
                        e.preventDefault();
                        switchTab('categories');
                        break;
                    case '9':
                        e.preventDefault();
                        switchTab('reports');
                        break;
                    case '0':
                        e.preventDefault();
                        switchTab('settings');
                        break;
                    case 'n':
                        e.preventDefault();
                        if (!isInputFocused) {
                            const activeTab = document.querySelector('.nav-tab.active')?.getAttribute('onclick');
                            if (activeTab) {
                                const match = activeTab.match(/'([^']+)'/);
                                if (match) {
                                    const tab = match[1];
                                    if (tab === 'income') openModal('form', 'income');
                                    else if (tab === 'expenses') openModal('form', 'expense');
                                    else if (tab === 'receivables') openModal('form', 'receivable');
                                    else if (tab === 'payables') openModal('form', 'payable');
                                    else if (tab === 'plans') openModal('form', 'plan');
                                    else if (tab === 'budgets') openModal('form', 'budget');
                                    else if (tab === 'accounts') openModal('form', 'account');
                                    else if (tab === 'debts') openModal('form', 'debt');
                                    else if (tab === 'goals') openModal('form', 'goal');
                                    else if (tab === 'investments') openModal('form', 'investment');
                                }
                            }
                        }
                        break;
                    case 's':
                        e.preventDefault();
                        if (!isInputFocused && state.isConnected) {
                            writeExcelFile().then(() => {
                                showToast('Saved successfully', 'success');
                            });
                        }
                        break;
                    case 'f':
                        e.preventDefault();
                        if (!isInputFocused) {
                            const searchInput = document.getElementById('search-input');
                            if (searchInput) searchInput.focus();
                        }
                        break;
                    case 'e':
                        e.preventDefault();
                        if (!isInputFocused && state.isConnected) {
                            exportData();
                        }
                        break;
                    case 'i':
                        e.preventDefault();
                        if (!isInputFocused && state.isConnected) {
                            importData();
                        }
                        break;
                    case 'b':
                        e.preventDefault();
                        if (!isInputFocused) {
                            backupData();
                        }
                        break;
                    case 'z':
                        e.preventDefault();
                        if (!isInputFocused) {
                            undoLastAction();
                        }
                        break;
                    case 'r':
                        e.preventDefault();
                        if (!isInputFocused && state.isConnected) {
                            refreshData();
                        }
                        break;
                    case ',':
                    case 'p':
                        e.preventDefault();
                        if (!isInputFocused) {
                            switchTab('settings');
                        }
                        break;
                    case '/':
                        e.preventDefault();
                        if (!isInputFocused) {
                            // Scroll to keyboard shortcuts section in settings
                            switchTab('settings');
                            setTimeout(() => {
                                const shortcutsSection = document.querySelector('[data-translate="keyboard_shortcuts"]');
                                if (shortcutsSection) {
                                    shortcutsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                }
                            }, 100);
                        }
                        break;
                }
            }

            // Function keys
            if (e.key === 'F1') {
                e.preventDefault();
                switchTab('settings');
                setTimeout(() => {
                    const shortcutsSection = document.querySelector('[data-translate="keyboard_shortcuts"]');
                    if (shortcutsSection) {
                        shortcutsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 100);
            }

            // Escape key - close modal or clear search
            if (e.key === 'Escape') {
                const overlay = document.getElementById('modal-overlay');
                if (overlay && overlay.classList.contains('active')) {
                    e.preventDefault();
                    closeModal();
                } else {
                    // Clear search if search input is focused
                    const searchInput = document.getElementById('search-input');
                    if (document.activeElement === searchInput && searchInput.value) {
                        e.preventDefault();
                        searchInput.value = '';
                        searchInput.dispatchEvent(new Event('input'));
                    }
                }
            }

            // Enter key - submit form when modal is open
            if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey && !e.metaKey) {
                const overlay = document.getElementById('modal-overlay');
                const modalForm = overlay?.querySelector('form');
                if (overlay?.classList.contains('active') && modalForm && !isInputFocused) {
                    const submitButton = modalForm.querySelector('button[type="submit"], .btn-primary');
                    if (submitButton && !submitButton.disabled) {
                        e.preventDefault();
                        submitButton.click();
                    }
                }
            }

            // Delete key for bulk delete
            if (e.key === 'Delete' && selectedItems.size > 0 && !isInputFocused) {
                e.preventDefault();
                bulkDelete();
            }

            // Tab navigation with arrow keys (when not in input)
            if (!isInputFocused && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
                const navTabs = Array.from(document.querySelectorAll('.nav-tab'));
                const activeIndex = navTabs.findIndex(tab => tab.classList.contains('active'));

                if (activeIndex !== -1) {
                    if (e.key === 'ArrowLeft' && activeIndex > 0) {
                        e.preventDefault();
                        const prevTab = navTabs[activeIndex - 1];
                        const match = prevTab.getAttribute('onclick')?.match(/switchTab\('([^']+)'\)/);
                        if (match) switchTab(match[1]);
                    } else if (e.key === 'ArrowRight' && activeIndex < navTabs.length - 1) {
                        e.preventDefault();
                        const nextTab = navTabs[activeIndex + 1];
                        const match = nextTab.getAttribute('onclick')?.match(/switchTab\('([^']+)'\)/);
                        if (match) switchTab(match[1]);
                    }
                }
            }
        });

        // Update contribution UI for expense form
        window.updateContributionUI = function () {
            const amountInput = document.getElementById('inp-amount');
            const contributionTypeSection = document.getElementById('contribution-type-section');
            const contributionTypeSelect = document.getElementById('inp-contribution-type');
            const equalDisplay = document.getElementById('equal-contribution-display');
            const customInputs = document.getElementById('custom-contribution-inputs');
            const perPersonAmount = document.getElementById('per-person-amount');
            const expenseTotalAmount = document.getElementById('expense-total-amount');
            const expenseForSelect = document.getElementById('inp-expense-for');

            if (!amountInput || !contributionTypeSection) return;

            const amount = parseFloat(amountInput.value) || 0;
            const selectedCount = document.querySelectorAll('input[id^="inp-family-member-"]:checked').length;
            const expenseFor = expenseForSelect ? expenseForSelect.value : '';

            // Show/hide contribution section based on selected members
            if (selectedCount > 0) {
                contributionTypeSection.style.display = 'block';
                const contributionType = contributionTypeSelect ? contributionTypeSelect.value : 'equal';

                // If expenseFor is set, show special message
                if (expenseFor) {
                    if (equalDisplay) {
                        equalDisplay.style.display = 'block';
                        equalDisplay.style.background = '#fff3cd';
                        if (perPersonAmount) {
                            perPersonAmount.textContent = `Full amount (${formatCurrency(amount)}) will be counted for "${expenseFor}" and each contributor`;
                        }
                    }
                    if (customInputs) customInputs.style.display = 'none';
                } else {
                    if (equalDisplay) equalDisplay.style.background = '#e6fffa';
                    if (contributionType === 'equal') {
                        if (equalDisplay) equalDisplay.style.display = 'block';
                        if (customInputs) customInputs.style.display = 'none';
                        if (perPersonAmount && amount > 0) {
                            const perPerson = amount / selectedCount;
                            perPersonAmount.textContent = formatCurrency(perPerson);
                        }
                    } else {
                        if (equalDisplay) equalDisplay.style.display = 'none';
                        if (customInputs) customInputs.style.display = 'block';
                        // Show/hide individual contribution inputs based on selection
                        document.querySelectorAll('input[id^="inp-family-member-"]').forEach(checkbox => {
                            const idx = checkbox.id.replace('inp-family-member-', '');
                            const contributionDiv = document.getElementById(`contribution-${idx}`);
                            if (contributionDiv) {
                                contributionDiv.style.display = checkbox.checked ? 'block' : 'none';
                            }
                        });
                        updateContributionTotal();
                    }
                }
                if (expenseTotalAmount) {
                    expenseTotalAmount.textContent = formatCurrency(amount);
                }
            } else {
                contributionTypeSection.style.display = 'none';
            }
        };

        // Update contribution total for custom contributions
        window.updateContributionTotal = function () {
            const totalSpan = document.getElementById('contribution-total-amount');
            const expenseTotalSpan = document.getElementById('expense-total-amount');
            if (!totalSpan) return;

            let total = 0;
            document.querySelectorAll('input[id^="inp-contribution-"]').forEach(input => {
                const value = parseFloat(input.value) || 0;
                total += value;
            });

            totalSpan.textContent = formatCurrency(total);

            const expenseAmount = parseFloat(document.getElementById('inp-amount')?.value || 0);
            if (expenseTotalSpan) {
                expenseTotalSpan.textContent = formatCurrency(expenseAmount);
            }

            // Highlight if total doesn't match expense amount
            const totalDiv = document.getElementById('contribution-total');
            if (totalDiv) {
                if (Math.abs(total - expenseAmount) > 0.01) {
                    totalDiv.style.background = '#fee';
                    totalDiv.style.color = '#c00';
                } else {
                    totalDiv.style.background = '#e6fffa';
                    totalDiv.style.color = 'var(--text-main)';
                }
            }
        };

        // Initialize settings on load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                loadSettings();
                loadSettingsFromStorage();
            });
        } else {
            loadSettings();
            loadSettingsFromStorage();
        }
    </script>
</body>

</html>